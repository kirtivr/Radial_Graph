(function(q,z){"use strict";var A={};function B(a,c){var m,d=[];for(var i=0;i<a.length;++i){m=A[a[i]]||E(a[i]);if(!m){throw'module definition dependecy not found: '+a[i];}d.push(m);}c.apply(null,d);}function C(i,d,a){if(typeof i!=='string'){throw'invalid module definition, module id must be defined and be a string';}if(d===z){throw'invalid module definition, dependencies must be specified';}if(a===z){throw'invalid module definition, definition function must be specified';}B(d,function(){A[i]=a.apply(null,arguments);});}function D(i){return!!A[i];}function E(i){var t=q;var f=i.split(/[.\/]/);for(var a=0;a<f.length;++a){if(!t[f[a]]){return;}t=t[f[a]];}return t;}function F(a){for(var i=0;i<a.length;i++){var t=q;var b=a[i];var f=b.split(/[.\/]/);for(var c=0;c<f.length-1;++c){if(t[f[c]]===z){t[f[c]]={};}t=t[f[c]];}t[f[f.length-1]]=A[b];}}
/**
 * EventUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/EventUtils",[],function(){"use strict";var a="mce-data-";var m=/^(?:mouse|contextmenu)|click/;var d={keyLocation:1,layerX:1,layerY:1,returnValue:1};function b(t,n,e,h){if(t.addEventListener){t.addEventListener(n,e,h||false);}else if(t.attachEvent){t.attachEvent('on'+n,e);}}function r(t,n,e,h){if(t.removeEventListener){t.removeEventListener(n,e,h||false);}else if(t.detachEvent){t.detachEvent('on'+n,e);}}function f(o,e){var n,h=e||{},u;function i(){return false;}function j(){return true;}for(n in o){if(!d[n]){h[n]=o[n];}}if(!h.target){h.target=h.srcElement||document;}if(o&&m.test(o.type)&&o.pageX===u&&o.clientX!==u){var k=h.target.ownerDocument||document;var l=k.documentElement;var p=k.body;h.pageX=o.clientX+(l&&l.scrollLeft||p&&p.scrollLeft||0)-(l&&l.clientLeft||p&&p.clientLeft||0);h.pageY=o.clientY+(l&&l.scrollTop||p&&p.scrollTop||0)-(l&&l.clientTop||p&&p.clientTop||0);}h.preventDefault=function(){h.isDefaultPrevented=j;if(o){if(o.preventDefault){o.preventDefault();}else{o.returnValue=false;}}};h.stopPropagation=function(){h.isPropagationStopped=j;if(o){if(o.stopPropagation){o.stopPropagation();}else{o.cancelBubble=true;}}};h.stopImmediatePropagation=function(){h.isImmediatePropagationStopped=j;h.stopPropagation();};if(!h.isDefaultPrevented){h.isDefaultPrevented=i;h.isPropagationStopped=i;h.isImmediatePropagationStopped=i;}return h;}function c(w,e,h){var i=w.document,j={type:'ready'};if(h.domLoaded){e(j);return;}function k(){if(!h.domLoaded){h.domLoaded=true;e(j);}}function l(){if(i.readyState==="complete"||(i.readyState==="interactive"&&i.body)){r(i,"readystatechange",l);k();}}function t(){try{
// If IE is used, use the trick by Diego Perini licensed under MIT by request to the author.
i.documentElement.doScroll("left");}catch(n){setTimeout(t,0);return;}k();}if(i.addEventListener){if(i.readyState==="complete"){k();}else{b(w,'DOMContentLoaded',k);}}else{b(i,"readystatechange",l);if(i.documentElement.doScroll&&w.self===w.top){t();}}b(w,'load',k);}function g(){var s=this,h={},j,k,n,o,p;k=a+(+new Date()).toString(32);o="onmouseenter"in document.documentElement;n="onfocusin"in document.documentElement;p={mouseenter:'mouseover',mouseleave:'mouseout'};j=1;s.domLoaded=false;s.events=h;function t(e,u){var v,i,l,w,x=h[u];v=x&&x[e.type];if(v){for(i=0,l=v.length;i<l;i++){w=v[i];if(w&&w.func.call(w.scope,e)===false){e.preventDefault();}if(e.isImmediatePropagationStopped()){return;}}}}s.bind=function(e,l,u,v){var w,x,i,y,G,H,I,J=window;function K(L){t(f(L||J.event),w);}if(!e||e.nodeType===3||e.nodeType===8){return;}if(!e[k]){w=j++;e[k]=w;h[w]={};}else{w=e[k];}v=v||e;l=l.split(' ');i=l.length;while(i--){y=l[i];H=K;G=I=false;if(y==="DOMContentLoaded"){y="ready";}if(s.domLoaded&&y==="ready"&&e.readyState=='complete'){u.call(v,f({type:y}));continue;}if(!o){G=p[y];if(G){H=function(L){var M,N;M=L.currentTarget;N=L.relatedTarget;if(N&&M.contains){N=M.contains(N);}else{while(N&&N!==M){N=N.parentNode;}}if(!N){L=f(L||J.event);L.type=L.type==='mouseout'?'mouseleave':'mouseenter';L.target=M;t(L,w);}};}}if(!n&&(y==="focusin"||y==="focusout")){I=true;G=y==="focusin"?"focus":"blur";H=function(L){L=f(L||J.event);L.type=L.type==='focus'?'focusin':'focusout';t(L,w);};}x=h[w][y];if(!x){h[w][y]=x=[{func:u,scope:v}];x.fakeName=G;x.capture=I;x.nativeHandler=H;if(y==="ready"){c(e,H,s);}else{b(e,G||y,H,I);}}else{if(y==="ready"&&s.domLoaded){u({type:y});}else{x.push({func:u,scope:v});}}}e=x=0;return u;};s.unbind=function(e,l,u){var v,w,i,x,y,G;if(!e||e.nodeType===3||e.nodeType===8){return s;}v=e[k];if(v){G=h[v];if(l){l=l.split(' ');i=l.length;while(i--){y=l[i];w=G[y];if(w){if(u){x=w.length;while(x--){if(w[x].func===u){var H=w.nativeHandler;var I=w.fakeName,J=w.capture;w=w.slice(0,x).concat(w.slice(x+1));w.nativeHandler=H;w.fakeName=I;w.capture=J;G[y]=w;}}}if(!u||w.length===0){delete G[y];r(e,w.fakeName||y,w.nativeHandler,w.capture);}}}}else{for(y in G){w=G[y];r(e,w.fakeName||y,w.nativeHandler,w.capture);}G={};}for(y in G){return s;}delete h[v];try{delete e[k];}catch(K){e[k]=null;}}return s;};s.fire=function(e,i,l){var u;if(!e||e.nodeType===3||e.nodeType===8){return s;}l=f(null,l);l.type=i;l.target=e;do{u=e[k];if(u){t(l,u);}e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;}while(e&&!l.isPropagationStopped());return s;};s.clean=function(e){var i,l,u=s.unbind;if(!e||e.nodeType===3||e.nodeType===8){return s;}if(e[k]){u(e);}if(!e.getElementsByTagName){e=e.document;}if(e&&e.getElementsByTagName){u(e);l=e.getElementsByTagName('*');i=l.length;while(i--){e=l[i];if(e[k]){u(e);}}}return s;};s.destroy=function(){h={};};s.cancel=function(e){if(e){e.preventDefault();e.stopImmediatePropagation();}return false;};}g.Event=new g();g.Event.bind(window,'ready',function(){});return g;});
/**
 * Sizzle.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */
/**
 * Sizzle CSS Selector Engine v@VERSION
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: @DATE
 */
C("tinymce/dom/Sizzle",[],function(){var i,s,c,g,d,t,f,h,o,k,l,n,p,r,u,v,w,x,y,G="sizzle"+-(new Date()),H=window.document,I=0,J=0,K=r1(),L=r1(),M=r1(),N=function(a,b){if(a===b){l=true;}return 0;},O=typeof z,P=1<<31,Q=({}).hasOwnProperty,R=[],S=R.pop,T=R.push,U=R.push,V=R.slice,W=R.indexOf||function(a){var i=0,b=this.length;for(;i<b;i++){if(this[i]===a){return i;}}return-1;},X="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Y="[\\x20\\t\\r\\n\\f]",Z="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",$="\\["+Y+"*("+Z+")(?:"+Y+"*([*^$|!~]?=)"+Y+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Z+"))|)"+Y+"*\\]",a1=":("+Z+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+$+")*)|"+".*"+")\\)|)",b1=new RegExp("^"+Y+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Y+"+$","g"),c1=new RegExp("^"+Y+"*,"+Y+"*"),d1=new RegExp("^"+Y+"*([>+~]|"+Y+")"+Y+"*"),e1=new RegExp("="+Y+"*([^\\]'\"]*?)"+Y+"*\\]","g"),f1=new RegExp(a1),g1=new RegExp("^"+Z+"$"),h1={"ID":new RegExp("^#("+Z+")"),"CLASS":new RegExp("^\\.("+Z+")"),"TAG":new RegExp("^("+Z+"|[*])"),"ATTR":new RegExp("^"+$),"PSEUDO":new RegExp("^"+a1),"CHILD":new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Y+"*(even|odd|(([+-]|)(\\d*)n|)"+Y+"*(?:([+-]|)"+Y+"*(\\d+)|))"+Y+"*\\)|)","i"),"bool":new RegExp("^(?:"+X+")$","i"),"needsContext":new RegExp("^"+Y+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Y+"*((?:-\\d)?\\d*)"+Y+"*\\)|)(?=[^-]|$)","i")},i1=/^(?:input|select|textarea|button)$/i,j1=/^h\d$/i,k1=/^[^{]+\{\s*\[native \w/,l1=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,m1=/[+~]/,n1=/'|\\/g,o1=new RegExp("\\\\([\\da-f]{1,6}"+Y+"?|("+Y+")|.)","ig"),p1=function(_,a,b){var j="0x"+a-0x10000;return j!==j||b?a:j<0?String.fromCharCode(j+0x10000):String.fromCharCode(j>>10|0xD800,j&0x3FF|0xDC00);};try{U.apply((R=V.call(H.childNodes)),H.childNodes);R[H.childNodes.length].nodeType;}catch(e){U={apply:R.length?function(a,b){T.apply(a,V.call(b));}:function(a,b){var j=a.length,i=0;while((a[j++]=b[i++])){}a.length=j-1;}};}function q1(a,b,j,_){var J1,K1,m,L1,i,M1,N1,O1,P1,Q1;if((b?b.ownerDocument||b:H)!==p){n(b);}b=b||p;j=j||[];if(!a||typeof a!=="string"){return j;}if((L1=b.nodeType)!==1&&L1!==9){return[];}if(u&&!_){if((J1=l1.exec(a))){if((m=J1[1])){if(L1===9){K1=b.getElementById(m);if(K1&&K1.parentNode){if(K1.id===m){j.push(K1);return j;}}else{return j;}}else{if(b.ownerDocument&&(K1=b.ownerDocument.getElementById(m))&&y(b,K1)&&K1.id===m){j.push(K1);return j;}}}else if(J1[2]){U.apply(j,b.getElementsByTagName(a));return j;}else if((m=J1[3])&&s.getElementsByClassName){U.apply(j,b.getElementsByClassName(m));return j;}}if(s.qsa&&(!v||!v.test(a))){O1=N1=G;P1=b;Q1=L1===9&&a;if(L1===1&&b.nodeName.toLowerCase()!=="object"){M1=t(a);if((N1=b.getAttribute("id"))){O1=N1.replace(n1,"\\$&");}else{b.setAttribute("id",O1);}O1="[id='"+O1+"'] ";i=M1.length;while(i--){M1[i]=O1+B1(M1[i]);}P1=m1.test(a)&&z1(b.parentNode)||b;Q1=M1.join(",");}if(Q1){try{U.apply(j,P1.querySelectorAll(Q1));return j;}catch(R1){}finally{if(!N1){b.removeAttribute("id");}}}}}return h(a.replace(b1,"$1"),b,j,_);}function r1(){var a=[];function b(j,m){if(a.push(j+" ")>c.cacheLength){delete b[a.shift()];}return(b[j+" "]=m);}return b;}function s1(a){a[G]=true;return a;}function t1(a){var b=p.createElement("div");try{return!!a(b);}catch(e){return false;}finally{if(b.parentNode){b.parentNode.removeChild(b);}b=null;}}function u1(a,b){var R=a.split("|"),i=a.length;while(i--){c.attrHandle[R[i]]=b;}}function v1(a,b){var j=b&&a,m=j&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||P)-(~a.sourceIndex||P);if(m){return m;}if(j){while((j=j.nextSibling)){if(j===b){return-1;}}}return a?1:-1;}function w1(a){return function(b){var j=b.nodeName.toLowerCase();return j==="input"&&b.type===a;};}function x1(a){return function(b){var j=b.nodeName.toLowerCase();return(j==="input"||j==="button")&&b.type===a;};}function y1(a){return s1(function(b){b=+b;return s1(function(m,x){var j,_=a([],m.length,b),i=_.length;while(i--){if(m[(j=_[i])]){m[j]=!(x[j]=m[j]);}}});});}function z1(a){return a&&typeof a.getElementsByTagName!==O&&a;}s=q1.support={};d=q1.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":false;};n=q1.setDocument=function(j){var _,J1=j?j.ownerDocument||j:H,K1=J1.defaultView;if(J1===p||J1.nodeType!==9||!J1.documentElement){return p;}p=J1;r=J1.documentElement;u=!d(J1);if(K1&&K1!==K1.top){if(K1.addEventListener){K1.addEventListener("unload",function(){n();},false);}else if(K1.attachEvent){K1.attachEvent("onunload",function(){n();});}}s.attributes=t1(function(a){a.className="i";return!a.getAttribute("className");});s.getElementsByTagName=t1(function(a){a.appendChild(J1.createComment(""));return!a.getElementsByTagName("*").length;});s.getElementsByClassName=k1.test(J1.getElementsByClassName);s.getById=t1(function(a){r.appendChild(a).id=G;return!J1.getElementsByName||!J1.getElementsByName(G).length;});if(s.getById){c.find["ID"]=function(a,b){if(typeof b.getElementById!==O&&u){var m=b.getElementById(a);return m&&m.parentNode?[m]:[];}};c.filter["ID"]=function(a){var b=a.replace(o1,p1);return function(m){return m.getAttribute("id")===b;};};}else{delete c.find["ID"];c.filter["ID"]=function(a){var b=a.replace(o1,p1);return function(m){var j=typeof m.getAttributeNode!==O&&m.getAttributeNode("id");return j&&j.value===b;};};}c.find["TAG"]=s.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==O){return b.getElementsByTagName(a);}}:function(a,b){var m,L1=[],i=0,M1=b.getElementsByTagName(a);if(a==="*"){while((m=M1[i++])){if(m.nodeType===1){L1.push(m);}}return L1;}return M1;};c.find["CLASS"]=s.getElementsByClassName&&function(a,b){if(u){return b.getElementsByClassName(a);}};w=[];v=[];if((s.qsa=k1.test(J1.querySelectorAll))){t1(function(a){a.innerHTML="<select msallowcapture=''><option selected=''></option></select>";if(a.querySelectorAll("[msallowcapture^='']").length){v.push("[*^$]="+Y+"*(?:''|\"\")");}if(!a.querySelectorAll("[selected]").length){v.push("\\["+Y+"*(?:value|"+X+")");}if(!a.querySelectorAll(":checked").length){v.push(":checked");}});t1(function(a){var b=J1.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("name","D");if(a.querySelectorAll("[name=d]").length){v.push("name"+Y+"*[*^$|!~]?=");}if(!a.querySelectorAll(":enabled").length){v.push(":enabled",":disabled");}a.querySelectorAll("*,:x");v.push(",.*:");});}if((s.matchesSelector=k1.test((x=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector)))){t1(function(a){s.disconnectedMatch=x.call(a,"div");x.call(a,"[s!='']:x");w.push("!=",a1);});}v=v.length&&new RegExp(v.join("|"));w=w.length&&new RegExp(w.join("|"));_=k1.test(r.compareDocumentPosition);y=_||k1.test(r.contains)?function(a,b){var m=a.nodeType===9?a.documentElement:a,L1=b&&b.parentNode;return a===L1||!!(L1&&L1.nodeType===1&&(m.contains?m.contains(L1):a.compareDocumentPosition&&a.compareDocumentPosition(L1)&16));}:function(a,b){if(b){while((b=b.parentNode)){if(b===a){return true;}}}return false;};N=_?function(a,b){if(a===b){l=true;return 0;}var m=!a.compareDocumentPosition-!b.compareDocumentPosition;if(m){return m;}m=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(m&1||(!s.sortDetached&&b.compareDocumentPosition(a)===m)){if(a===J1||a.ownerDocument===H&&y(H,a)){return-1;}if(b===J1||b.ownerDocument===H&&y(H,b)){return 1;}return k?(W.call(k,a)-W.call(k,b)):0;}return m&4?-1:1;}:function(a,b){if(a===b){l=true;return 0;}var m,i=0,L1=a.parentNode,M1=b.parentNode,ap=[a],bp=[b];if(!L1||!M1){return a===J1?-1:b===J1?1:L1?-1:M1?1:k?(W.call(k,a)-W.call(k,b)):0;}else if(L1===M1){return v1(a,b);}m=a;while((m=m.parentNode)){ap.unshift(m);}m=b;while((m=m.parentNode)){bp.unshift(m);}while(ap[i]===bp[i]){i++;}return i?v1(ap[i],bp[i]):ap[i]===H?-1:bp[i]===H?1:0;};return J1;};q1.matches=function(a,b){return q1(a,null,null,b);};q1.matchesSelector=function(a,b){if((a.ownerDocument||a)!==p){n(a);}b=b.replace(e1,"='$1']");if(s.matchesSelector&&u&&(!w||!w.test(b))&&(!v||!v.test(b))){try{var j=x.call(a,b);if(j||s.disconnectedMatch||a.document&&a.document.nodeType!==11){return j;}}catch(e){}}return q1(b,p,null,[a]).length>0;};q1.contains=function(a,b){if((a.ownerDocument||a)!==p){n(a);}return y(a,b);};q1.attr=function(a,b){if((a.ownerDocument||a)!==p){n(a);}var j=c.attrHandle[b.toLowerCase()],m=j&&Q.call(c.attrHandle,b.toLowerCase())?j(a,b,!u):z;return m!==z?m:s.attributes||!u?a.getAttribute(b):(m=a.getAttributeNode(b))&&m.specified?m.value:null;};q1.error=function(m){throw new Error("Syntax error, unrecognized expression: "+m);};q1.uniqueSort=function(a){var b,m=[],j=0,i=0;l=!s.detectDuplicates;k=!s.sortStable&&a.slice(0);a.sort(N);if(l){while((b=a[i++])){if(b===a[i]){j=m.push(i);}}while(j--){a.splice(m[j],1);}}k=null;return a;};g=q1.getText=function(a){var b,j="",i=0,m=a.nodeType;if(!m){while((b=a[i++])){j+=g(b);}}else if(m===1||m===9||m===11){if(typeof a.textContent==="string"){return a.textContent;}else{for(a=a.firstChild;a;a=a.nextSibling){j+=g(a);}}}else if(m===3||m===4){return a.nodeValue;}return j;};c=q1.selectors={cacheLength:50,createPseudo:s1,match:h1,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{"ATTR":function(m){m[1]=m[1].replace(o1,p1);m[3]=(m[3]||m[4]||m[5]||"").replace(o1,p1);if(m[2]==="~="){m[3]=" "+m[3]+" ";}return m.slice(0,4);},"CHILD":function(m){m[1]=m[1].toLowerCase();if(m[1].slice(0,3)==="nth"){if(!m[3]){q1.error(m[0]);}m[4]=+(m[4]?m[5]+(m[6]||1):2*(m[3]==="even"||m[3]==="odd"));m[5]=+((m[7]+m[8])||m[3]==="odd");}else if(m[3]){q1.error(m[0]);}return m;},"PSEUDO":function(m){var a,b=!m[6]&&m[2];if(h1["CHILD"].test(m[0])){return null;}if(m[3]){m[2]=m[4]||m[5]||"";}else if(b&&f1.test(b)&&(a=t(b,true))&&(a=b.indexOf(")",b.length-a)-b.length)){m[0]=m[0].slice(0,a);m[2]=b.slice(0,a);}return m.slice(0,3);}},filter:{"TAG":function(a){var b=a.replace(o1,p1).toLowerCase();return a==="*"?function(){return true;}:function(j){return j.nodeName&&j.nodeName.toLowerCase()===b;};},"CLASS":function(a){var b=K[a+" "];return b||(b=new RegExp("(^|"+Y+")"+a+"("+Y+"|$)"))&&K(a,function(j){return b.test(typeof j.className==="string"&&j.className||typeof j.getAttribute!==O&&j.getAttribute("class")||"");});},"ATTR":function(a,b,j){return function(m){var _=q1.attr(m,a);if(_==null){return b==="!=";}if(!b){return true;}_+="";return b==="="?_===j:b==="!="?_!==j:b==="^="?j&&_.indexOf(j)===0:b==="*="?j&&_.indexOf(j)>-1:b==="$="?j&&_.slice(-j.length)===j:b==="~="?(" "+_+" ").indexOf(j)>-1:b==="|="?_===j||_.slice(0,j.length+1)===j+"-":false;};},"CHILD":function(a,b,j,m,_){var J1=a.slice(0,3)!=="nth",K1=a.slice(-4)!=="last",L1=b==="of-type";return m===1&&_===0?function(M1){return!!M1.parentNode;}:function(M1,N1,O1){var P1,Q1,R1,S1,T1,U1,V1=J1!==K1?"nextSibling":"previousSibling",W1=M1.parentNode,X1=L1&&M1.nodeName.toLowerCase(),Y1=!O1&&!L1;if(W1){if(J1){while(V1){R1=M1;while((R1=R1[V1])){if(L1?R1.nodeName.toLowerCase()===X1:R1.nodeType===1){return false;}}U1=V1=a==="only"&&!U1&&"nextSibling";}return true;}U1=[K1?W1.firstChild:W1.lastChild];if(K1&&Y1){Q1=W1[G]||(W1[G]={});P1=Q1[a]||[];T1=P1[0]===I&&P1[1];S1=P1[0]===I&&P1[2];R1=T1&&W1.childNodes[T1];while((R1=++T1&&R1&&R1[V1]||(S1=T1=0)||U1.pop())){if(R1.nodeType===1&&++S1&&R1===M1){Q1[a]=[I,T1,S1];break;}}}else if(Y1&&(P1=(M1[G]||(M1[G]={}))[a])&&P1[0]===I){S1=P1[1];}else{while((R1=++T1&&R1&&R1[V1]||(S1=T1=0)||U1.pop())){if((L1?R1.nodeName.toLowerCase()===X1:R1.nodeType===1)&&++S1){if(Y1){(R1[G]||(R1[G]={}))[a]=[I,S1];}if(R1===M1){break;}}}}S1-=_;return S1===m||(S1%m===0&&S1/m>=0);}};},"PSEUDO":function(a,b){var j,m=c.pseudos[a]||c.setFilters[a.toLowerCase()]||q1.error("unsupported pseudo: "+a);if(m[G]){return m(b);}if(m.length>1){j=[a,a,"",b];return c.setFilters.hasOwnProperty(a.toLowerCase())?s1(function(_,x){var J1,K1=m(_,b),i=K1.length;while(i--){J1=W.call(_,K1[i]);_[J1]=!(x[J1]=K1[i]);}}):function(_){return m(_,0,j);};}return m;}},pseudos:{"not":s1(function(a){var b=[],j=[],m=f(a.replace(b1,"$1"));return m[G]?s1(function(_,x,J1,K1){var L1,M1=m(_,null,K1,[]),i=_.length;while(i--){if((L1=M1[i])){_[i]=!(x[i]=L1);}}}):function(_,J1,K1){b[0]=_;m(b,null,K1,j);return!j.pop();};}),"has":s1(function(a){return function(b){return q1(a,b).length>0;};}),"contains":s1(function(a){a=a.replace(o1,p1);return function(b){return(b.textContent||b.innerText||g(b)).indexOf(a)>-1;};}),"lang":s1(function(a){if(!g1.test(a||"")){q1.error("unsupported lang: "+a);}a=a.replace(o1,p1).toLowerCase();return function(b){var j;do{if((j=u?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))){j=j.toLowerCase();return j===a||j.indexOf(a+"-")===0;}}while((b=b.parentNode)&&b.nodeType===1);return false;};}),"target":function(a){var b=window.location&&window.location.hash;return b&&b.slice(1)===a.id;},"root":function(a){return a===r;},"focus":function(a){return a===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(a.type||a.href||~a.tabIndex);},"enabled":function(a){return a.disabled===false;},"disabled":function(a){return a.disabled===true;},"checked":function(a){var b=a.nodeName.toLowerCase();return(b==="input"&&!!a.checked)||(b==="option"&&!!a.selected);},"selected":function(a){if(a.parentNode){a.parentNode.selectedIndex;}return a.selected===true;},"empty":function(a){for(a=a.firstChild;a;a=a.nextSibling){if(a.nodeType<6){return false;}}return true;},"parent":function(a){return!c.pseudos["empty"](a);},"header":function(a){return j1.test(a.nodeName);},"input":function(a){return i1.test(a.nodeName);},"button":function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button";},"text":function(a){var b;return a.nodeName.toLowerCase()==="input"&&a.type==="text"&&((b=a.getAttribute("type"))==null||b.toLowerCase()==="text");},"first":y1(function(){return[0];}),"last":y1(function(m,a){return[a-1];}),"eq":y1(function(m,a,b){return[b<0?b+a:b];}),"even":y1(function(m,a){var i=0;for(;i<a;i+=2){m.push(i);}return m;}),"odd":y1(function(m,a){var i=1;for(;i<a;i+=2){m.push(i);}return m;}),"lt":y1(function(m,a,b){var i=b<0?b+a:b;for(;--i>=0;){m.push(i);}return m;}),"gt":y1(function(m,a,b){var i=b<0?b+a:b;for(;++i<a;){m.push(i);}return m;})}};c.pseudos["nth"]=c.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){c.pseudos[i]=w1(i);}for(i in{submit:true,reset:true}){c.pseudos[i]=x1(i);}function A1(){}A1.prototype=c.filters=c.pseudos;c.setFilters=new A1();t=q1.tokenize=function(a,b){var m,j,_,J1,K1,L1,M1,N1=L[a+" "];if(N1){return b?0:N1.slice(0);}K1=a;L1=[];M1=c.preFilter;while(K1){if(!m||(j=c1.exec(K1))){if(j){K1=K1.slice(j[0].length)||K1;}L1.push((_=[]));}m=false;if((j=d1.exec(K1))){m=j.shift();_.push({value:m,type:j[0].replace(b1," ")});K1=K1.slice(m.length);}for(J1 in c.filter){if((j=h1[J1].exec(K1))&&(!M1[J1]||(j=M1[J1](j)))){m=j.shift();_.push({value:m,type:J1,matches:j});K1=K1.slice(m.length);}}if(!m){break;}}return b?K1.length:K1?q1.error(a):L(a,L1).slice(0);};function B1(a){var i=0,b=a.length,j="";for(;i<b;i++){j+=a[i].value;}return j;}function C1(m,a,b){var j=a.dir,_=b&&j==="parentNode",J1=J++;return a.first?function(K1,L1,M1){while((K1=K1[j])){if(K1.nodeType===1||_){return m(K1,L1,M1);}}}:function(K1,L1,M1){var N1,O1,P1=[I,J1];if(M1){while((K1=K1[j])){if(K1.nodeType===1||_){if(m(K1,L1,M1)){return true;}}}}else{while((K1=K1[j])){if(K1.nodeType===1||_){O1=K1[G]||(K1[G]={});if((N1=O1[j])&&N1[0]===I&&N1[1]===J1){return(P1[2]=N1[2]);}else{O1[j]=P1;if((P1[2]=m(K1,L1,M1))){return true;}}}}}};}function D1(m){return m.length>1?function(a,b,j){var i=m.length;while(i--){if(!m[i](a,b,j)){return false;}}return true;}:m[0];}function E1(a,b,j){var i=0,m=b.length;for(;i<m;i++){q1(a,b[i],j);}return j;}function F1(a,m,b,j,_){var J1,K1=[],i=0,L1=a.length,M1=m!=null;for(;i<L1;i++){if((J1=a[i])){if(!b||b(J1,j,_)){K1.push(J1);if(M1){m.push(i);}}}}return K1;}function G1(a,b,m,j,_,J1){if(j&&!j[G]){j=G1(j);}if(_&&!_[G]){_=G1(_,J1);}return s1(function(K1,L1,M1,N1){var O1,i,P1,Q1=[],R1=[],S1=L1.length,T1=K1||E1(b||"*",M1.nodeType?[M1]:M1,[]),U1=a&&(K1||!b)?F1(T1,Q1,a,M1,N1):T1,V1=m?_||(K1?a:S1||j)?[]:L1:U1;if(m){m(U1,V1,M1,N1);}if(j){O1=F1(V1,R1);j(O1,[],M1,N1);i=O1.length;while(i--){if((P1=O1[i])){V1[R1[i]]=!(U1[R1[i]]=P1);}}}if(K1){if(_||a){if(_){O1=[];i=V1.length;while(i--){if((P1=V1[i])){O1.push((U1[i]=P1));}}_(null,(V1=[]),O1,N1);}i=V1.length;while(i--){if((P1=V1[i])&&(O1=_?W.call(K1,P1):Q1[i])>-1){K1[O1]=!(L1[O1]=P1);}}}}else{V1=F1(V1===L1?V1.splice(S1,V1.length):V1);if(_){_(null,L1,V1,N1);}else{U.apply(L1,V1);}}});}function H1(a){var b,m,j,_=a.length,J1=c.relative[a[0].type],K1=J1||c.relative[" "],i=J1?1:0,L1=C1(function(O1){return O1===b;},K1,true),M1=C1(function(O1){return W.call(b,O1)>-1;},K1,true),N1=[function(O1,P1,Q1){return(!J1&&(Q1||P1!==o))||((b=P1).nodeType?L1(O1,P1,Q1):M1(O1,P1,Q1));}];for(;i<_;i++){if((m=c.relative[a[i].type])){N1=[C1(D1(N1),m)];}else{m=c.filter[a[i].type].apply(null,a[i].matches);if(m[G]){j=++i;for(;j<_;j++){if(c.relative[a[j].type]){break;}}return G1(i>1&&D1(N1),i>1&&B1(a.slice(0,i-1).concat({value:a[i-2].type===" "?"*":""})).replace(b1,"$1"),m,i<j&&H1(a.slice(i,j)),j<_&&H1((a=a.slice(j))),j<_&&B1(a));}N1.push(m);}}return D1(N1);}function I1(a,b){var m=b.length>0,_=a.length>0,J1=function(K1,L1,M1,N1,O1){var P1,j,Q1,R1=0,i="0",S1=K1&&[],T1=[],U1=o,V1=K1||_&&c.find["TAG"]("*",O1),W1=(I+=U1==null?1:Math.random()||0.1),X1=V1.length;if(O1){o=L1!==p&&L1;}for(;i!==X1&&(P1=V1[i])!=null;i++){if(_&&P1){j=0;while((Q1=a[j++])){if(Q1(P1,L1,M1)){N1.push(P1);break;}}if(O1){I=W1;}}if(m){if((P1=!Q1&&P1)){R1--;}if(K1){S1.push(P1);}}}R1+=i;if(m&&i!==R1){j=0;while((Q1=b[j++])){Q1(S1,T1,L1,M1);}if(K1){if(R1>0){while(i--){if(!(S1[i]||T1[i])){T1[i]=S.call(N1);}}}T1=F1(T1);}U.apply(N1,T1);if(O1&&!K1&&T1.length>0&&(R1+b.length)>1){q1.uniqueSort(N1);}}if(O1){I=W1;o=U1;}return S1;};return m?s1(J1):J1;}f=q1.compile=function(a,m){var i,b=[],j=[],_=M[a+" "];if(!_){if(!m){m=t(a);}i=m.length;while(i--){_=H1(m[i]);if(_[G]){b.push(_);}else{j.push(_);}}_=M(a,I1(j,b));_.selector=a;}return _;};h=q1.select=function(a,b,j,m){var i,_,J1,K1,L1,M1=typeof a==="function"&&a,N1=!m&&t((a=M1.selector||a));j=j||[];if(N1.length===1){_=N1[0]=N1[0].slice(0);if(_.length>2&&(J1=_[0]).type==="ID"&&s.getById&&b.nodeType===9&&u&&c.relative[_[1].type]){b=(c.find["ID"](J1.matches[0].replace(o1,p1),b)||[])[0];if(!b){return j;}else if(M1){b=b.parentNode;}a=a.slice(_.shift().value.length);}i=h1["needsContext"].test(a)?0:_.length;while(i--){J1=_[i];if(c.relative[(K1=J1.type)]){break;}if((L1=c.find[K1])){if((m=L1(J1.matches[0].replace(o1,p1),m1.test(_[0].type)&&z1(b.parentNode)||b))){_.splice(i,1);a=m.length&&B1(_);if(!a){U.apply(j,m);return j;}break;}}}}(M1||f(a,N1))(m,b,!u,j,m1.test(a)&&z1(b.parentNode)||b);return j;};s.sortStable=G.split("").sort(N).join("")===G;s.detectDuplicates=!!l;n();s.sortDetached=t1(function(a){return a.compareDocumentPosition(p.createElement("div"))&1;});if(!t1(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild.getAttribute("href")==="#";})){u1("type|href|height|width",function(a,b,d){if(!d){return a.getAttribute(b,b.toLowerCase()==="type"?1:2);}});}if(!s.attributes||!t1(function(a){a.innerHTML="<input/>";a.firstChild.setAttribute("value","");return a.firstChild.getAttribute("value")==="";})){u1("value",function(a,b,d){if(!d&&a.nodeName.toLowerCase()==="input"){return a.defaultValue;}});}if(!t1(function(a){return a.getAttribute("disabled")==null;})){u1(X,function(a,b,d){var j;if(!d){return a[b]===true?b.toLowerCase():(j=a.getAttributeNode(b))&&j.specified?j.value:null;}});}return q1;});
/**
 * Env.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/Env",[],function(){var n=navigator,u=n.userAgent;var o,w,i,a,g,m,d;o=window.opera&&window.opera.buildNumber;w=/WebKit/.test(u);i=!w&&!o&&(/MSIE/gi).test(u)&&(/Explorer/gi).test(n.appName);i=i&&/MSIE (\w+)\./.exec(u)[1];a=u.indexOf('Trident/')!=-1&&(u.indexOf('rv:')!=-1||n.appName.indexOf('Netscape')!=-1)?11:false;i=i||a;g=!w&&!a&&/Gecko/.test(u);m=u.indexOf('Mac')!=-1;d=/(iPad|iPhone)/.test(u);var c=!d||u.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:o,webkit:w,ie:i,gecko:g,mac:m,iOS:d,contentEditable:c,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:i!=8,range:window.getSelection&&"Range"in window,documentMode:i?(document.documentMode||7):10};});
/**
 * Tools.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/Tools",["tinymce/Env"],function(b){var w=/^\s*|\s*$/g;function e(s){return(s===null||s===z)?'':(""+s).replace(w,'');}var g=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]";};function h(o,t){if(!t){return o!==z;}if(t=='array'&&g(o)){return true;}return typeof(o)==t;}function j(o){var a=o,i,l;if(!g(o)){a=[];for(i=0,l=o.length;i<l;i++){a[i]=o[i];}}return a;}function m(a,d,r){var i;a=a||[];d=d||',';if(typeof(a)=="string"){a=a.split(d);}r=r||{};i=a.length;while(i--){r[a[i]]={};}return r;}function k(o,c,s){var n,l;if(!o){return 0;}s=s||o;if(o.length!==z){for(n=0,l=o.length;n<l;n++){if(c.call(s,o[n],n,o)===false){return 0;}}}else{for(n in o){if(o.hasOwnProperty(n)){if(c.call(s,o[n],n,o)===false){return 0;}}}}return 1;}function r(a,c){var o=[];k(a,function(i){o.push(c(i));});return o;}function u(a,f){var o=[];k(a,function(v){if(!f||f(v)){o.push(v);}});return o;}function x(s,p,a){var d=this,i,l,o,t,c,v=0;s=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(s);o=s[3].match(/(^|\.)(\w+)$/i)[2];l=d.createNS(s[3].replace(/\.\w+$/,''),a);if(l[o]){return;}if(s[2]=='static'){l[o]=p;if(this.onCreate){this.onCreate(s[2],s[3],l[o]);}return;}if(!p[o]){p[o]=function(){};v=1;}l[o]=p[o];d.extend(l[o].prototype,p);if(s[5]){i=d.resolve(s[5]).prototype;t=s[5].match(/\.(\w+)$/i)[1];c=l[o];if(v){l[o]=function(){return i[t].apply(this,arguments);};}else{l[o]=function(){this.parent=i[t];return c.apply(this,arguments);};}l[o].prototype[o]=l[o];d.each(i,function(f,n){l[o].prototype[n]=i[n];});d.each(p,function(f,n){if(i[n]){l[o].prototype[n]=function(){this.parent=i[n];return f.apply(this,arguments);};}else{if(n!=o){l[o].prototype[n]=f;}}});}d.each(p['static'],function(f,n){l[o][n]=f;});}function y(a,v){var i,l;if(a){for(i=0,l=a.length;i<l;i++){if(a[i]===v){return i;}}}return-1;}function G(o,a){var i,l,n,c=arguments,v;for(i=1,l=c.length;i<l;i++){a=c[i];for(n in a){if(a.hasOwnProperty(n)){v=a[n];if(v!==z){o[n]=v;}}}}return o;}function H(o,f,n,s){s=s||this;if(o){if(n){o=o[n];}k(o,function(o,i){if(f.call(s,o,i,n)===false){return false;}H(o,f,n,s);});}}function I(n,o){var i,v;o=o||window;n=n.split('.');for(i=0;i<n.length;i++){v=n[i];if(!o[v]){o[v]={};}o=o[v];}return o;}function E(n,o){var i,l;o=o||window;n=n.split('.');for(i=0,l=n.length;i<l;i++){o=o[n[i]];if(!o){break;}}return o;}function J(s,d){if(!s||h(s,'array')){return s;}return r(s.split(d||','),e);}function _(a){var c=b.cacheSuffix;if(c){a+=(a.indexOf('?')===-1?'?':'&')+c;}return a;}return{trim:e,isArray:g,is:h,toArray:j,makeMap:m,each:k,map:r,grep:u,inArray:y,extend:G,create:x,walk:H,createNS:I,resolve:E,explode:J,_addCacheSuffix:_};});
/**
 * DomQuery.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/DomQuery",["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/Env"],function(c,S,T,d){var e=document,p=Array.prototype.push,s=Array.prototype.slice;var r=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/;var f=c.Event,u;function g(a){return typeof a!=='undefined';}function h(a){return typeof a==='string';}function j(a){return a&&a==a.window;}function k(a,b){var i,l,x;b=b||e;x=b.createElement('div');i=b.createDocumentFragment();x.innerHTML=a;while((l=x.firstChild)){i.appendChild(l);}return i;}function m(a,b,l,x){var i;if(h(b)){b=k(b,P(a[0]));}else if(b.length&&!b.nodeType){b=J.makeArray(b);if(x){for(i=b.length-1;i>=0;i--){m(a,b[i],l,x);}}else{for(i=0;i<b.length;i++){m(a,b[i],l,x);}}return a;}if(b.nodeType){i=a.length;while(i--){l.call(a[i],b);}}return a;}function n(a,b){return a&&b&&(' '+a.className+' ').indexOf(' '+b+' ')!==-1;}function w(a,b,i){var l,x;b=J(b)[0];a.each(function(){var y=this;if(!i||l!=y.parentNode){l=y.parentNode;x=b.cloneNode(false);y.parentNode.insertBefore(x,y);x.appendChild(y);}else{x.appendChild(y);}});return a;}var o=T.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom',' ');var t=T.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected',' ');var v={'for':'htmlFor','class':'className','readonly':'readOnly'};var G={'float':'cssFloat'};var H={},I={};function J(a,b){return new J.fn.init(a,b);}function K(a,b){var i;if(b.indexOf){return b.indexOf(a);}i=b.length;while(i--){if(b[i]===a){return i;}}return-1;}var L=/^\s*|\s*$/g;function M(a){return(a===null||a===u)?'':(""+a).replace(L,'');}function N(a,b){var l,x,i,u,y;if(a){l=a.length;if(l===u){for(x in a){if(a.hasOwnProperty(x)){y=a[x];if(b.call(y,x,y)===false){break;}}}}else{for(i=0;i<l;i++){y=a[i];if(b.call(y,i,y)===false){break;}}}}return a;}function O(a,b){var l=[];N(a,function(i,x){if(b(x,i)){l.push(x);}});return l;}function P(a){if(!a){return e;}if(a.nodeType==9){return a;}return a.ownerDocument;}J.fn=J.prototype={constructor:J,selector:"",context:null,length:0,init:function(a,b){var i=this,l,x;if(!a){return i;}if(a.nodeType){i.context=i[0]=a;i.length=1;return i;}if(b&&b.nodeType){i.context=b;}else{if(b){return J(a).attr(b);}else{i.context=b=document;}}if(h(a)){i.selector=a;if(a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3){l=[null,a,null];}else{l=r.exec(a);}if(l){if(l[1]){x=k(a,P(b)).firstChild;while(x){p.call(i,x);x=x.nextSibling;}}else{x=P(b).getElementById(l[2]);if(!x){return i;}if(x.id!==l[2]){return i.find(a);}i.length=1;i[0]=x;}}else{return J(b).find(a);}}else{this.add(a,false);}return i;},toArray:function(){return T.toArray(this);},add:function(a,b){var l=this,x,i;if(h(a)){return l.add(J(a));}if(b!==false){x=J.unique(l.toArray().concat(J.makeArray(a)));l.length=x.length;for(i=0;i<x.length;i++){l[i]=x[i];}}else{p.apply(l,J.makeArray(a));}return l;},attr:function(a,b){var i=this,l;if(typeof a==="object"){N(a,function(a,b){i.attr(a,b);});}else if(g(b)){this.each(function(){var l;if(this.nodeType===1){l=H[a];if(l&&l.set){l.set(this,b);return;}if(b===null){this.removeAttribute(a,2);}else{this.setAttribute(a,b,2);}}});}else{if(i[0]&&i[0].nodeType===1){l=H[a];if(l&&l.get){return l.get(i[0],a);}if(t[a]){return i.prop(a)?a:u;}b=i[0].getAttribute(a,2);if(b===null){b=u;}}return b;}return i;},removeAttr:function(a){return this.attr(a,null);},prop:function(a,b){var i=this;a=v[a]||a;if(typeof a==="object"){N(a,function(a,b){i.prop(a,b);});}else if(g(b)){this.each(function(){if(this.nodeType==1){this[a]=b;}});}else{if(i[0]&&i[0].nodeType&&a in i[0]){return i[0][a];}return b;}return i;},css:function(i,l){var x=this,y,W;function X(i){return i.replace(/-(\D)/g,function(a,b){return b.toUpperCase();});}function Y(i){return i.replace(/[A-Z]/g,function(a){return'-'+a;});}if(typeof i==="object"){N(i,function(i,l){x.css(i,l);});}else{if(g(l)){i=X(i);if(typeof(l)==='number'&&!o[i]){l+='px';}x.each(function(){var a=this.style;W=I[i];if(W&&W.set){W.set(this,l);return;}try{this.style[G[i]||i]=l;}catch(Z){}if(l===null||l===''){if(a.removeProperty){a.removeProperty(Y(i));}else{a.removeAttribute(i);}}});}else{y=x[0];W=I[i];if(W&&W.get){return W.get(y);}if(y.ownerDocument.defaultView){try{return y.ownerDocument.defaultView.getComputedStyle(y,null).getPropertyValue(Y(i));}catch(Z){return u;}}else if(y.currentStyle){return y.currentStyle[X(i)];}}}return x;},remove:function(){var a=this,b,i=this.length;while(i--){b=a[i];f.clean(b);if(b.parentNode){b.parentNode.removeChild(b);}}return this;},empty:function(){var a=this,b,i=this.length;while(i--){b=a[i];while(b.firstChild){b.removeChild(b.firstChild);}}return this;},html:function(a){var b=this,i;if(g(a)){i=b.length;try{while(i--){b[i].innerHTML=a;}}catch(l){J(b[i]).empty().append(a);}return b;}return b[0]?b[0].innerHTML:'';},text:function(a){var b=this,i;if(g(a)){i=b.length;while(i--){if("innerText"in b[i]){b[i].innerText=a;}else{b[0].textContent=a;}}return b;}return b[0]?(b[0].innerText||b[0].textContent):'';},append:function(){return m(this,arguments,function(a){if(this.nodeType===1){this.appendChild(a);}});},prepend:function(){return m(this,arguments,function(a){if(this.nodeType===1){this.insertBefore(a,this.firstChild);}},true);},before:function(){var a=this;if(a[0]&&a[0].parentNode){return m(a,arguments,function(b){this.parentNode.insertBefore(b,this);});}return a;},after:function(){var a=this;if(a[0]&&a[0].parentNode){return m(a,arguments,function(b){this.parentNode.insertBefore(b,this.nextSibling);},true);}return a;},appendTo:function(a){J(a).append(this);return this;},prependTo:function(a){J(a).prepend(this);return this;},replaceWith:function(a){return this.before(a).remove();},wrap:function(a){return w(this,a);},wrapAll:function(a){return w(this,a,true);},wrapInner:function(a){this.each(function(){J(this).contents().wrapAll(a);});return this;},unwrap:function(){return this.parent().each(function(){J(this).replaceWith(this.childNodes);});},clone:function(){var a=[];this.each(function(){a.push(this.cloneNode(true));});return J(a);},addClass:function(a){return this.toggleClass(a,true);},removeClass:function(a){return this.toggleClass(a,false);},toggleClass:function(a,b){var i=this;if(typeof a!='string'){return i;}if(a.indexOf(' ')!==-1){N(a.split(' '),function(){i.toggleClass(this,b);});}else{i.each(function(l,x){var y,W;W=n(x,a);if(W!==b){y=x.className;if(W){x.className=M((" "+y+" ").replace(' '+a+' ',' '));}else{x.className+=y?' '+a:a;}}});}return i;},hasClass:function(a){return n(this[0],a);},each:function(a){return N(this,a);},on:function(a,b){return this.each(function(){f.bind(this,a,b);});},off:function(a,b){return this.each(function(){f.unbind(this,a,b);});},trigger:function(a){return this.each(function(){if(typeof a=='object'){f.fire(this,a.type,a);}else{f.fire(this,a);}});},show:function(){return this.css('display','');},hide:function(){return this.css('display','none');},slice:function(){return new J(s.apply(this,arguments));},eq:function(i){return i===-1?this.slice(i):this.slice(i,+i+1);},first:function(){return this.eq(0);},last:function(){return this.eq(-1);},find:function(a){var i,l,b=[];for(i=0,l=this.length;i<l;i++){J.find(a,this[i],b);}return J(b);},filter:function(a){if(typeof a=='function'){return J(O(this.toArray(),function(b,i){return a(i,b);}));}return J(J.filter(a,this.toArray()));},closest:function(a){var b=[];if(a instanceof J){a=a[0];}this.each(function(i,l){while(l){if(typeof a=='string'&&J(l).is(a)){b.push(l);break;}else if(l==a){b.push(l);break;}l=l.parentNode;}});return J(b);},offset:function(a){var b,e,i;var x=0,y=0,l;if(!a){b=this[0];if(b){e=b.ownerDocument;i=e.documentElement;if(b.getBoundingClientRect){l=b.getBoundingClientRect();x=l.left+(i.scrollLeft||e.body.scrollLeft)-i.clientLeft;y=l.top+(i.scrollTop||e.body.scrollTop)-i.clientTop;}}return{left:x,top:y};}return this.css(a);},push:p,sort:[].sort,splice:[].splice};T.extend(J,{extend:T.extend,makeArray:function(a){if(j(a)||a.nodeType){return[a];}return T.toArray(a);},inArray:K,isArray:T.isArray,each:N,trim:M,grep:O,find:S,expr:S.selectors,unique:S.uniqueSort,text:S.getText,contains:S.contains,filter:function(a,b,l){var i=b.length;if(l){a=":not("+a+")";}while(i--){if(b[i].nodeType!=1){b.splice(i,1);}}if(b.length===1){b=J.find.matchesSelector(b[0],a)?[b[0]]:[];}else{b=J.find.matches(a,b);}return b;}});function Q(a,b,i){var l=[],x=a[b];if(typeof i!='string'&&i instanceof J){i=i[0];}while(x&&x.nodeType!==9){if(i!==z){if(x===i){break;}if(typeof i=='string'&&J(x).is(i)){break;}}if(x.nodeType===1){l.push(x);}x=x[b];}return l;}function R(a,b,i,l){var x=[];if(l instanceof J){l=l[0];}for(;a;a=a[b]){if(i&&a.nodeType!==i){continue;}if(l!==z){if(a===l){break;}if(typeof l=='string'&&J(a).is(l)){break;}}x.push(a);}return x;}function U(a,b,i){for(a=a[b];a;a=a[b]){if(a.nodeType==i){return a;}}return null;}N({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null;},parents:function(a){return Q(a,"parentNode");},next:function(a){return U(a,'nextSibling',1);},prev:function(a){return U(a,'previousSibling',1);},children:function(a){return R(a.firstChild,'nextSibling',1);},contents:function(a){return T.toArray((a.nodeName==="iframe"?a.contentDocument||a.contentWindow.document:a).childNodes);}},function(a,b){J.fn[a]=function(i){var l=this,x=[];l.each(function(){var y=b.call(x,this,i,x);if(y){if(J.isArray(y)){x.push.apply(x,y);}else{x.push(y);}}});if(this.length>1){x=J.unique(x);if(a.indexOf('parents')===0){x=x.reverse();}}x=J(x);if(i){return x.filter(i);}return x;};});N({parentsUntil:function(a,b){return Q(a,"parentNode",b);},nextUntil:function(a,b){return R(a,'nextSibling',1,b).slice(1);},prevUntil:function(a,b){return R(a,'previousSibling',1,b).slice(1);}},function(a,b){J.fn[a]=function(i,l){var x=this,y=[];x.each(function(){var W=b.call(y,this,i,y);if(W){if(J.isArray(W)){y.push.apply(y,W);}else{y.push(W);}}});if(this.length>1){y=J.unique(y);if(a.indexOf('parents')===0||a==='prevUntil'){y=y.reverse();}}y=J(y);if(l){return y.filter(l);}return y;};});J.fn.is=function(a){return!!a&&this.filter(a).length>0;};J.fn.init.prototype=J.fn;J.overrideDefaults=function(a){var b;function i(l,x){b=b||a();if(arguments.length===0){l=b.element;}if(!x){x=b.context;}return new i.fn.init(l,x);}J.extend(i,this);return i;};function V(a,b,i){N(i,function(l,x){a[l]=a[l]||{};a[l][b]=x;});}if(d.ie&&d.ie<8){V(H,'get',{maxlength:function(a){var b=a.maxLength;if(b===0x7fffffff){return u;}return b;},size:function(a){var b=a.size;if(b===20){return u;}return b;},'class':function(a){return a.className;},style:function(a){var b=a.style.cssText;if(b.length===0){return u;}return b;}});V(H,'set',{'class':function(a,b){a.className=b;},style:function(a,b){a.style.cssText=b;}});}if(d.ie&&d.ie<9){G['float']='styleFloat';V(I,'set',{opacity:function(a,b){var i=a.style;if(b===null||b===''){i.removeAttribute('filter');}else{i.zoom=1;i.filter='alpha(opacity='+(b*100)+')';}}});}J.attrHooks=H;J.cssHooks=I;return J;});
/**
 * Styles.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/html/Styles",[],function(){return function(s,d){var f=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,u=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,h=/\s*([^:]+):\s*([^;]+);?/g,t=/\s+$/,j,i,k={},m,v,n,o='\uFEFF';s=s||{};if(d){v=d.getValidStyles();n=d.getInvalidStyles();}m=('\\" \\\' \\; \\: ; : '+o).split(' ');for(i=0;i<m.length;i++){k[m[i]]=o+i;k[o+i]=m[i];}function p(a,r,g,b){function c(e){e=parseInt(e,10).toString(16);return e.length>1?e:'0'+e;}return'#'+c(r)+c(g)+c(b);}return{toHex:function(c){return c.replace(f,p);},parse:function(g){var l={},r,w,x,y,G=s.url_converter;var H=s.url_converter_scope||this;function I(a,b,c){var e,O,P,Q;e=l[a+'-top'+b];if(!e){return;}O=l[a+'-right'+b];if(!O){return;}P=l[a+'-bottom'+b];if(!P){return;}Q=l[a+'-left'+b];if(!Q){return;}var R=[e,O,P,Q];i=R.length-1;while(i--){if(R[i]!==R[i+1]){break;}}if(i>-1&&c){return;}l[a+b]=i==-1?R[0]:R.join(' ');delete l[a+'-top'+b];delete l[a+'-right'+b];delete l[a+'-bottom'+b];delete l[a+'-left'+b];}function J(a){var x=l[a],i;if(!x){return;}x=x.split(' ');i=x.length;while(i--){if(x[i]!==x[0]){return false;}}l[a]=x[0];return true;}function K(e,a,b,c){if(!J(a)){return;}if(!J(b)){return;}if(!J(c)){return;}l[e]=l[a]+' '+l[b]+' '+l[c];delete l[a];delete l[b];delete l[c];}function L(a){y=true;return k[a];}function M(a,b){if(y){a=a.replace(/\uFEFF[0-9]/g,function(a){return k[a];});}if(!b){a=a.replace(/\\([\'\";:])/g,"$1");}return a;}function N(a,b,c,e,O,P){O=O||P;if(O){O=M(O);return"'"+O.replace(/\'/g,"\\'")+"'";}b=M(b||c||e);if(!s.allow_script_urls){var Q=b.replace(/[\s\r\n]+/,'');if(/(java|vb)script:/i.test(Q)){return"";}if(!s.allow_svg_data_urls&&/^data:image\/svg/i.test(Q)){return"";}}if(G){b=G.call(H,b,'style');}return"url('"+b.replace(/\'/g,"\\'")+"')";}if(g){g=g.replace(/[\u0000-\u001F]/g,'');g=g.replace(/\\[\"\';:\uFEFF]/g,L).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,L);});while((r=h.exec(g))){w=r[1].replace(t,'').toLowerCase();x=r[2].replace(t,'');x=x.replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16));});if(w&&x.length>0){if(!s.allow_script_urls&&(w=="behavior"||/expression\s*\(|\/\*|\*\//.test(x))){continue;}if(w==='font-weight'&&x==='700'){x='bold';}else if(w==='color'||w==='background-color'){x=x.toLowerCase();}x=x.replace(f,p);x=x.replace(u,N);l[w]=y?M(x,true):x;}h.lastIndex=r.index+r[0].length;}I("border","",true);I("border","-width");I("border","-color");I("border","-style");I("padding","");I("margin","");K('border','border-width','border-style','border-color');if(l.border==='medium none'){delete l.border;}if(l['border-image']==='none'){delete l['border-image'];}}return l;},serialize:function(a,e){var c='',b,g;function r(b){var x,i,l,g;x=v[b];if(x){for(i=0,l=x.length;i<l;i++){b=x[i];g=a[b];if(g!==j&&g.length>0){c+=(c.length>0?' ':'')+b+': '+g+';';}}}}function w(b,e){var l;l=n['*'];if(l&&l[b]){return false;}l=n[e];if(l&&l[b]){return false;}return true;}if(e&&v){r('*');r(e);}else{for(b in a){g=a[b];if(g!==j&&g.length>0){if(!n||w(b,e)){c+=(c.length>0?' ':'')+b+': '+g+';';}}}}return c;}};};});
/**
 * TreeWalker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/TreeWalker",[],function(){return function(s,r){var n=s;function f(n,a,b,c){var d,p;if(n){if(!c&&n[a]){return n[a];}if(n!=r){d=n[b];if(d){return d;}for(p=n.parentNode;p&&p!=r;p=p.parentNode){d=p[b];if(d){return d;}}}}}this.current=function(){return n;};this.next=function(a){n=f(n,'firstChild','nextSibling',a);return n;};this.prev=function(a){n=f(n,'lastChild','previousSibling',a);return n;};};});
/**
 * Range.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/Range",["tinymce/util/Tools"],function(T){function R(d){var a=this,b=d.doc,e=0,g=1,i=2,j=true,k=false,S='startOffset',l='startContainer',m='endContainer',t='endOffset',u=T.extend,v=d.nodeIndex;function w(){return b.createDocumentFragment();}function x(n,o){Z(j,n,o);}function y(n,o){Z(k,n,o);}function G(n){x(n.parentNode,v(n));}function H(n){x(n.parentNode,v(n)+1);}function I(n){y(n.parentNode,v(n));}function J(n){y(n.parentNode,v(n)+1);}function K(c){if(c){a[m]=a[l];a[t]=a[S];}else{a[l]=a[m];a[S]=a[t];}a.collapsed=j;}function L(n){G(n);J(n);}function M(n){x(n,0);y(n,n.nodeType===1?n.childNodes.length:n.nodeValue.length);}function N(h,r){var s=a[l],c=a[S],f=a[m],n=a[t],o=r.startContainer,p=r.startOffset,j1=r.endContainer,k1=r.endOffset;if(h===0){return Y(s,c,o,p);}if(h===1){return Y(f,n,o,p);}if(h===2){return Y(f,n,j1,k1);}if(h===3){return Y(s,c,j1,k1);}}function O(){$(i);}function P(){return $(e);}function Q(){return $(g);}function U(n){var s=this[l],c=this[S],f,o;if((s.nodeType===3||s.nodeType===4)&&s.nodeValue){if(!c){s.parentNode.insertBefore(n,s);}else if(c>=s.nodeValue.length){d.insertAfter(n,s);}else{f=s.splitText(c);s.parentNode.insertBefore(n,f);}}else{if(s.childNodes.length>0){o=s.childNodes[c];}if(o){s.insertBefore(n,o);}else{if(s.nodeType==3){d.insertAfter(n,s);}else{s.appendChild(n);}}}}function V(n){var f=a.extractContents();a.insertNode(n);n.appendChild(f);a.selectNode(n);}function W(){return u(new R(d),{startContainer:a[l],startOffset:a[S],endContainer:a[m],endOffset:a[t],collapsed:a.collapsed,commonAncestorContainer:a.commonAncestorContainer});}function _(c,o){var f;if(c.nodeType==3){return c;}if(o<0){return c;}f=c.firstChild;while(f&&o>0){--o;f=f.nextSibling;}if(f){return f;}return c;}function X(){return(a[l]==a[m]&&a[S]==a[t]);}function Y(f,o,h,p){var c,r,n,s,j1,k1;if(f==h){if(o==p){return 0;}if(o<p){return-1;}return 1;}c=h;while(c&&c.parentNode!=f){c=c.parentNode;}if(c){r=0;n=f.firstChild;while(n!=c&&r<o){r++;n=n.nextSibling;}if(o<=r){return-1;}return 1;}c=f;while(c&&c.parentNode!=h){c=c.parentNode;}if(c){r=0;n=h.firstChild;while(n!=c&&r<p){r++;n=n.nextSibling;}if(r<p){return-1;}return 1;}s=d.findCommonAncestor(f,h);j1=f;while(j1&&j1.parentNode!=s){j1=j1.parentNode;}if(!j1){j1=s;}k1=h;while(k1&&k1.parentNode!=s){k1=k1.parentNode;}if(!k1){k1=s;}if(j1==k1){return 0;}n=s.firstChild;while(n){if(n==j1){return-1;}if(n==k1){return 1;}n=n.nextSibling;}}function Z(s,n,o){var c,f;if(s){a[l]=n;a[S]=o;}else{a[m]=n;a[t]=o;}c=a[m];while(c.parentNode){c=c.parentNode;}f=a[l];while(f.parentNode){f=f.parentNode;}if(f==c){if(Y(a[l],a[S],a[m],a[t])>0){a.collapse(s);}}else{a.collapse(s);}a.collapsed=X();a.commonAncestorContainer=d.findCommonAncestor(a[l],a[m]);}function $(h){var c,f=0,s=0,p,n,o,r,sp,ep;if(a[l]==a[m]){return a1(h);}for(c=a[m],p=c.parentNode;p;c=p,p=p.parentNode){if(p==a[l]){return b1(c,h);}++f;}for(c=a[l],p=c.parentNode;p;c=p,p=p.parentNode){if(p==a[m]){return c1(c,h);}++s;}n=s-f;o=a[l];while(n>0){o=o.parentNode;n--;}r=a[m];while(n<0){r=r.parentNode;n++;}for(sp=o.parentNode,ep=r.parentNode;sp!=ep;sp=sp.parentNode,ep=ep.parentNode){o=sp;r=ep;}return d1(o,r,h);}function a1(h){var f,s,c,n,o,p,r,j1,k1;if(h!=i){f=w();}if(a[S]==a[t]){return f;}if(a[l].nodeType==3){s=a[l].nodeValue;c=s.substring(a[S],a[t]);if(h!=g){n=a[l];j1=a[S];k1=a[t]-a[S];if(j1===0&&k1>=n.nodeValue.length-1){n.parentNode.removeChild(n);}else{n.deleteData(j1,k1);}a.collapse(j);}if(h==i){return;}if(c.length>0){f.appendChild(b.createTextNode(c));}return f;}n=_(a[l],a[S]);o=a[t]-a[S];while(n&&o>0){p=n.nextSibling;r=h1(n,h);if(f){f.appendChild(r);}--o;n=p;}if(h!=g){a.collapse(j);}return f;}function b1(c,h){var f,n,o,p,s,r;if(h!=i){f=w();}n=e1(c,h);if(f){f.appendChild(n);}o=v(c);p=o-a[S];if(p<=0){if(h!=g){a.setEndBefore(c);a.collapse(k);}return f;}n=c.previousSibling;while(p>0){s=n.previousSibling;r=h1(n,h);if(f){f.insertBefore(r,f.firstChild);}--p;n=s;}if(h!=g){a.setEndBefore(c);a.collapse(k);}return f;}function c1(s,h){var f,c,n,o,p,r;if(h!=i){f=w();}n=f1(s,h);if(f){f.appendChild(n);}c=v(s);++c;o=a[t]-c;n=s.nextSibling;while(n&&o>0){p=n.nextSibling;r=h1(n,h);if(f){f.appendChild(r);}--o;n=p;}if(h!=g){a.setStartAfter(s);a.collapse(j);}return f;}function d1(s,c,h){var n,f,o,p,r,j1,k1;if(h!=i){f=w();}n=f1(s,h);if(f){f.appendChild(n);}o=v(s);p=v(c);++o;r=p-o;j1=s.nextSibling;while(r>0){k1=j1.nextSibling;n=h1(j1,h);if(f){f.appendChild(n);}j1=k1;--r;}n=e1(c,h);if(f){f.appendChild(n);}if(h!=g){a.setStartAfter(s);a.collapse(j);}return f;}function e1(r,h){var n=_(a[m],a[t]-1),p,c;var f,o,s,j1=n!=a[m];if(n==r){return g1(n,j1,k,h);}p=n.parentNode;c=g1(p,k,k,h);while(p){while(n){f=n.previousSibling;o=g1(n,j1,k,h);if(h!=i){c.insertBefore(o,c.firstChild);}j1=j;n=f;}if(p==r){return c;}n=p.previousSibling;p=p.parentNode;s=g1(p,k,k,h);if(h!=i){s.appendChild(c);}c=s;}}function f1(r,h){var n=_(a[l],a[S]),c=n!=a[l];var p,f,o,s,j1;if(n==r){return g1(n,c,j,h);}p=n.parentNode;f=g1(p,k,j,h);while(p){while(n){o=n.nextSibling;s=g1(n,c,j,h);if(h!=i){f.appendChild(s);}c=j;n=o;}if(p==r){return f;}n=p.nextSibling;p=p.parentNode;j1=g1(p,k,j,h);if(h!=i){j1.appendChild(f);}f=j1;}}function g1(n,c,f,h){var o,p,r,s,j1;if(c){return h1(n,h);}if(n.nodeType==3){o=n.nodeValue;if(f){s=a[S];p=o.substring(s);r=o.substring(0,s);}else{s=a[t];p=o.substring(0,s);r=o.substring(s);}if(h!=g){n.nodeValue=r;}if(h==i){return;}j1=d.clone(n,k);j1.nodeValue=p;return j1;}if(h==i){return;}return d.clone(n,k);}function h1(n,h){if(h!=i){return h==g?d.clone(n,j):n;}n.parentNode.removeChild(n);}function i1(){return d.create('body',null,Q()).outerText;}u(a,{startContainer:b,startOffset:0,endContainer:b,endOffset:0,collapsed:j,commonAncestorContainer:b,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:x,setEnd:y,setStartBefore:G,setStartAfter:H,setEndBefore:I,setEndAfter:J,collapse:K,selectNode:L,selectNodeContents:M,compareBoundaryPoints:N,deleteContents:O,extractContents:P,cloneContents:Q,insertNode:U,surroundContents:V,cloneRange:W,toStringIE:i1});return a;}R.prototype.toString=function(){return this.toStringIE();};return R;});
/**
 * Entities.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/html/Entities",["tinymce/util/Tools"],function(T){var m=T.makeMap;var n,b,r,a=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,e=/&(#x|#)?([\w]+);/g,d={128:"\u20AC",130:"\u201A",131:"\u0192",132:"\u201E",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02C6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017D",145:"\u2018",146:"\u2019",147:"\u201C",148:"\u201D",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02DC",153:"\u2122",154:"\u0161",155:"\u203A",156:"\u0153",158:"\u017E",159:"\u0178"};b={'\"':'&quot;',"'":'&#39;','<':'&lt;','>':'&gt;','&':'&amp;','\u0060':'&#96;'};r={'&lt;':'<','&gt;':'>','&amp;':'&','&quot;':'"','&apos;':"'"};function f(i){var j;j=document.createElement("div");j.innerHTML=i;return j.textContent||j.innerText||i;}function g(j,k){var i,l,o,p={};if(j){j=j.split(',');k=k||10;for(i=0;i<j.length;i+=2){l=String.fromCharCode(parseInt(j[i],k));if(!b[l]){o='&'+j[i+1]+';';p[l]=o;p[o]=l;}}return p;}}n=g('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,'+'5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,'+'5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,'+'5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,'+'68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,'+'6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,'+'6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,'+'75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,'+'7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,'+'7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,'+'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,'+'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,'+'t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,'+'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,'+'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,'+'81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,'+'8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,'+'8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,'+'8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,'+'8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,'+'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,'+'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,'+'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,'+'80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,'+'811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro',32);var h={encodeRaw:function(i,j){return i.replace(j?a:t,function(k){return b[k]||k;});},encodeAllRaw:function(i){return(''+i).replace(c,function(j){return b[j]||j;});},encodeNumeric:function(i,j){return i.replace(j?a:t,function(k){if(k.length>1){return'&#'+(((k.charCodeAt(0)-0xD800)*0x400)+(k.charCodeAt(1)-0xDC00)+0x10000)+';';}return b[k]||'&#'+k.charCodeAt(0)+';';});},encodeNamed:function(i,j,k){k=k||n;return i.replace(j?a:t,function(l){return b[l]||k[l]||l;});},getEncodeFunc:function(i,j){j=g(j)||n;function k(o,p){return o.replace(p?a:t,function(s){return b[s]||j[s]||'&#'+s.charCodeAt(0)+';'||s;});}function l(o,p){return h.encodeNamed(o,p,j);}i=m(i.replace(/\+/g,','));if(i.named&&i.numeric){return k;}if(i.named){if(j){return l;}return h.encodeNamed;}if(i.numeric){return h.encodeNumeric;}return h.encodeRaw;},decode:function(i){return i.replace(e,function(j,k,v){if(k){v=parseInt(v,k.length===2?16:10);if(v>0xFFFF){v-=0x10000;return String.fromCharCode(0xD800+(v>>10),0xDC00+(v&0x3FF));}else{return d[v]||String.fromCharCode(v);}}return r[j]||n[j]||f(j);});}};return h;});
/**
 * StyleSheetLoader.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/StyleSheetLoader",["tinymce/util/Tools"],function(T){"use strict";return function(d,s){var a=0,l={},m;s=s||{};m=s.maxLoadTime||5000;function b(n){d.getElementsByTagName('head')[0].appendChild(n);}function c(u,e,f){var g,h,j,k;function p(){var v=k.passed,i=v.length;while(i--){v[i]();}k.status=2;k.passed=[];k.failed=[];}function n(){var v=k.failed,i=v.length;while(i--){v[i]();}k.status=3;k.passed=[];k.failed=[];}function o(){var i=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(i&&i[1]<536);}function w(i,v){if(!i()){if((new Date().getTime())-j<m){window.setTimeout(v,0);}else{n();}}}function r(){w(function(){var v=d.styleSheets,x,i=v.length,y;while(i--){x=v[i];y=x.ownerNode?x.ownerNode:x.owningElement;if(y&&y.id===g.id){p();return true;}}},r);}function t(){w(function(){try{var i=h.sheet.cssRules;p();return!!i;}catch(v){}},t);}u=T._addCacheSuffix(u);if(!l[u]){k={passed:[],failed:[]};l[u]=k;}else{k=l[u];}if(e){k.passed.push(e);}if(f){k.failed.push(f);}if(k.status==1){return;}if(k.status==2){p();return;}if(k.status==3){n();return;}k.status=1;g=d.createElement('link');g.rel='stylesheet';g.type='text/css';g.id='u'+(a++);g.async=false;g.defer=false;j=new Date().getTime();if("onload"in g&&!o()){g.onload=r;g.onerror=n;}else{if(navigator.userAgent.indexOf("Firefox")>0){h=d.createElement('style');h.textContent='@import "'+u+'"';t();b(h);return;}else{r();}}b(g);g.href=u;}this.load=c;};});
/**
 * DOMUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/DOMUtils",["tinymce/dom/Sizzle","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/EventUtils","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/dom/StyleSheetLoader"],function(S,$,c,d,T,R,f,g,j,k){var l=j.each,m=j.is,n=j.grep,t=j.trim;var o=g.ie;var s=/^([a-z0-9],?)+$/i;var p=/^[ \t\r\n]*$/;function u(a,b){var e={},h=b.keep_values,i;i={set:function(r,w,x){if(b.url_converter){w=b.url_converter.call(b.url_converter_scope||a,w,x,r[0]);}r.attr('data-mce-'+x,w).attr(x,w);},get:function(r,w){return r.attr('data-mce-'+w)||r.attr(w);}};e={style:{set:function(r,w){if(w!==null&&typeof w==='object'){r.css(w);return;}if(h){r.attr('data-mce-style',w);}r.attr('style',w);},get:function(r){var w=r.attr('data-mce-style')||r.attr('style');w=a.serializeStyle(a.parseStyle(w),r[0].nodeName);return w;}}};if(h){e.href=e.src=i;}return e;}function v(a,b){var e=this,h;e.doc=a;e.win=window;e.files={};e.counter=0;e.stdMode=!o||a.documentMode>=8;e.boxModel=!o||a.compatMode=="CSS1Compat"||e.stdMode;e.styleSheetLoader=new k(a);e.boundEvents=[];e.settings=b=b||{};e.schema=b.schema;e.styles=new c({url_converter:b.url_converter,url_converter_scope:b.url_converter_scope},b.schema);e.fixDoc(a);e.events=b.ownEvents?new d(b.proxy):d.Event;e.attrHooks=u(e,b);h=b.schema?b.schema.getBlockElements():{};e.$=$.overrideDefaults(function(){return{context:a,element:e.getRoot()};});e.isBlock=function(i){if(!i){return false;}var r=i.nodeType;if(r){return!!(r===1&&h[i.nodeName]);}return!!h[i];};}v.prototype={$$:function(e){if(typeof e=='string'){e=this.get(e);}return this.$(e);},root:null,fixDoc:function(a){var b=this.settings,e;if(o&&b.schema){('abbr article aside audio canvas '+'details figcaption figure footer '+'header hgroup mark menu meter nav '+'output progress section summary '+'time video').replace(/\w+/g,function(e){a.createElement(e);});for(e in b.schema.getCustomElements()){a.createElement(e);}}},clone:function(a,b){var e=this,h,i;if(!o||a.nodeType!==1||b){return a.cloneNode(b);}i=e.doc;if(!b){h=i.createElement(a.nodeName);l(e.getAttribs(a),function(r){e.setAttrib(h,r.nodeName,e.getAttrib(a,r.nodeName));});return h;}return h.firstChild;},getRoot:function(){var a=this;return a.settings.root_element||a.doc.body;},getViewPort:function(w){var a,r;w=!w?this.win:w;a=w.document;r=this.boxModel?a.documentElement:a.body;return{x:w.pageXOffset||r.scrollLeft,y:w.pageYOffset||r.scrollTop,w:w.innerWidth||r.clientWidth,h:w.innerHeight||r.clientHeight};},getRect:function(e){var a=this,b,h;e=a.get(e);b=a.getPos(e);h=a.getSize(e);return{x:b.x,y:b.y,w:h.w,h:h.h};},getSize:function(e){var a=this,w,h;e=a.get(e);w=a.getStyle(e,'width');h=a.getStyle(e,'height');if(w.indexOf('px')===-1){w=0;}if(h.indexOf('px')===-1){h=0;}return{w:parseInt(w,10)||e.offsetWidth||e.clientWidth,h:parseInt(h,10)||e.offsetHeight||e.clientHeight};},getParent:function(a,b,r){return this.getParents(a,b,r,false);},getParents:function(a,b,r,e){var h=this,i,w=[];a=h.get(a);e=e===z;r=r||(h.getRoot().nodeName!='BODY'?h.getRoot().parentNode:null);if(m(b,'string')){i=b;if(b==='*'){b=function(a){return a.nodeType==1;};}else{b=function(a){return h.is(a,i);};}}while(a){if(a==r||!a.nodeType||a.nodeType===9){break;}if(!b||b(a)){if(e){w.push(a);}else{return a;}}a=a.parentNode;}return e?w:null;},get:function(e){var a;if(e&&this.doc&&typeof(e)=='string'){a=e;e=this.doc.getElementById(e);if(e&&e.id!==a){return this.doc.getElementsByName(a)[1];}}return e;},getNext:function(a,b){return this._findSib(a,b,'nextSibling');},getPrev:function(a,b){return this._findSib(a,b,'previousSibling');},select:function(a,b){var e=this;return S(a,e.get(b)||e.settings.root_element||e.doc,[]);},is:function(e,a){var i;if(e.length===z){if(a==='*'){return e.nodeType==1;}if(s.test(a)){a=a.toLowerCase().split(/,/);e=e.nodeName.toLowerCase();for(i=a.length-1;i>=0;i--){if(a[i]==e){return true;}}return false;}}if(e.nodeType&&e.nodeType!=1){return false;}var b=e.nodeType?[e]:e;return S(a,b[0].ownerDocument||b[0],null,b).length>0;},add:function(a,b,e,h,i){var r=this;return this.run(a,function(a){var w;w=m(b,'string')?r.doc.createElement(b):b;r.setAttribs(w,e);if(h){if(h.nodeType){w.appendChild(h);}else{r.setHTML(w,h);}}return!i?a.appendChild(w):w;});},create:function(a,b,h){return this.add(this.doc.createElement(a),a,b,h,1);},createHTML:function(a,b,h){var e='',i;e+='<'+a;for(i in b){if(b.hasOwnProperty(i)&&b[i]!==null&&typeof b[i]!='undefined'){e+=' '+i+'="'+this.encode(b[i])+'"';}}if(typeof(h)!="undefined"){return e+'>'+h+'</'+a+'>';}return e+' />';},createFragment:function(h){var a,b,e=this.doc,i;i=e.createElement("div");a=e.createDocumentFragment();if(h){i.innerHTML=h;}while((b=i.firstChild)){a.appendChild(b);}return a;},remove:function(a,b){a=this.$$(a);if(b){a.each(function(){var e;while((e=this.firstChild)){if(e.nodeType==3&&e.data.length===0){this.removeChild(e);}else{this.parentNode.insertBefore(e,this);}}}).remove();}else{a.remove();}return a.length>1?a.toArray():a[0];},setStyle:function(e,a,b){e=this.$$(e).css(a,b);if(this.settings.update_styles){e.attr('data-mce-style',null);}},getStyle:function(e,h,i){e=this.$$(e);if(i){return e.css(h);}h=h.replace(/-(\D)/g,function(a,b){return b.toUpperCase();});if(h=='float'){h=o?'styleFloat':'cssFloat';}return e[0]&&e[0].style?e[0].style[h]:z;},setStyles:function(e,a){e=this.$$(e).css(a);if(this.settings.update_styles){e.attr('data-mce-style',null);}},removeAllAttribs:function(e){return this.run(e,function(e){var i,a=e.attributes;for(i=a.length-1;i>=0;i--){e.removeAttributeNode(a.item(i));}});},setAttrib:function(e,a,b){var h=this,i,r,w=h.settings;if(b===''){b=null;}e=h.$$(e);i=e.attr(a);if(!e.length){return;}r=h.attrHooks[a];if(r&&r.set){r.set(e,b,a);}else{e.attr(a,b);}if(i!=b&&w.onSetAttrib){w.onSetAttrib({attrElm:e,attrName:a,attrValue:b});}},setAttribs:function(e,a){var b=this;b.$$(e).each(function(i,h){l(a,function(r,w){b.setAttrib(h,w,r);});});},getAttrib:function(e,a,b){var h=this,i,r;e=h.$$(e);if(e.length){i=h.attrHooks[a];if(i&&i.get){r=i.get(e,a);}else{r=e.attr(a);}}if(typeof r=='undefined'){r=b||'';}return r;},getPos:function(e,r){var a=this,x=0,y=0,b,h=a.doc,i=h.body,w;e=a.get(e);r=r||i;if(e){if(r===i&&e.getBoundingClientRect&&$(i).css('position')==='static'){w=e.getBoundingClientRect();r=a.boxModel?h.documentElement:i;x=w.left+(h.documentElement.scrollLeft||i.scrollLeft)-r.clientLeft;y=w.top+(h.documentElement.scrollTop||i.scrollTop)-r.clientTop;return{x:x,y:y};}b=e;while(b&&b!=r&&b.nodeType){x+=b.offsetLeft||0;y+=b.offsetTop||0;b=b.offsetParent;}b=e.parentNode;while(b&&b!=r&&b.nodeType){x-=b.scrollLeft||0;y-=b.scrollTop||0;b=b.parentNode;}}return{x:x,y:y};},parseStyle:function(a){return this.styles.parse(a);},serializeStyle:function(a,b){return this.styles.serialize(a,b);},addStyle:function(a){var b=this,e=b.doc,h,i;if(b!==v.DOM&&e===document){var r=v.DOM.addedStyles;r=r||[];if(r[a]){return;}r[a]=true;v.DOM.addedStyles=r;}i=e.getElementById('mceDefaultStyles');if(!i){i=e.createElement('style');i.id='mceDefaultStyles';i.type='text/css';h=e.getElementsByTagName('head')[0];if(h.firstChild){h.insertBefore(i,h.firstChild);}else{h.appendChild(i);}}if(i.styleSheet){i.styleSheet.cssText+=a;}else{i.appendChild(e.createTextNode(a));}},loadCSS:function(a){var b=this,e=b.doc,h;if(b!==v.DOM&&e===document){v.DOM.loadCSS(a);return;}if(!a){a='';}h=e.getElementsByTagName('head')[0];l(a.split(','),function(a){var i;a=j._addCacheSuffix(a);if(b.files[a]){return;}b.files[a]=true;i=b.create('link',{rel:'stylesheet',href:a});if(o&&e.documentMode&&e.recalc){i.onload=function(){if(e.recalc){e.recalc();}i.onload=null;};}h.appendChild(i);});},addClass:function(e,a){this.$$(e).addClass(a);},removeClass:function(e,a){this.toggleClass(e,a,false);},hasClass:function(e,a){return this.$$(e).hasClass(a);},toggleClass:function(e,a,b){this.$$(e).toggleClass(a,b).each(function(){if(this.className===''){$(this).attr('class',null);}});},show:function(e){this.$$(e).show();},hide:function(e){this.$$(e).hide();},isHidden:function(e){return this.$$(e).css('display')=='none';},uniqueId:function(a){return(!a?'mce_':a)+(this.counter++);},setHTML:function(e,h){e=this.$$(e);if(o){e.each(function(i,a){if(a.canHaveHTML===false){return;}while(a.firstChild){a.removeChild(a.firstChild);}try{a.innerHTML='<br>'+h;a.removeChild(a.firstChild);}catch(b){$('<div>').html('<br>'+h).contents().slice(1).appendTo(a);}return h;});}else{e.html(h);}},getOuterHTML:function(e){e=this.get(e);return e.nodeType==1?e.outerHTML:$('<div>').append($(e).clone()).html();},setOuterHTML:function(e,h){var a=this;a.$$(e).each(function(){try{this.outerHTML=h;}catch(b){a.remove($(this).html(h),true);}});},decode:f.decode,encode:f.encodeAllRaw,insertAfter:function(a,r){r=this.get(r);return this.run(a,function(a){var b,e;b=r.parentNode;e=r.nextSibling;if(e){b.insertBefore(a,e);}else{b.appendChild(a);}return a;});},replace:function(a,b,e){var h=this;return h.run(b,function(b){if(m(b,'array')){a=a.cloneNode(true);}if(e){l(n(b.childNodes),function(i){a.appendChild(i);});}return b.parentNode.replaceChild(a,b);});},rename:function(e,a){var b=this,h;if(e.nodeName!=a.toUpperCase()){h=b.create(a);l(b.getAttribs(e),function(i){b.setAttrib(h,i.nodeName,b.getAttrib(e,i.nodeName));});b.replace(h,e,1);}return h||e;},findCommonAncestor:function(a,b){var e=a,h;while(e){h=b;while(h&&e!=h){h=h.parentNode;}if(e==h){break;}e=e.parentNode;}if(!e&&a.ownerDocument){return a.ownerDocument.documentElement;}return e;},toHex:function(r){return this.styles.toHex(j.trim(r));},run:function(e,a,b){var h=this,r;if(typeof(e)==='string'){e=h.get(e);}if(!e){return false;}b=b||this;if(!e.nodeType&&(e.length||e.length===0)){r=[];l(e,function(e,i){if(e){if(typeof(e)=='string'){e=h.get(e);}r.push(a.call(b,e,i));}});return r;}return a.call(b,e);},getAttribs:function(e){var b;e=this.get(e);if(!e){return[];}if(o){b=[];if(e.nodeName=='OBJECT'){return e.attributes;}if(e.nodeName==='OPTION'&&this.getAttrib(e,'selected')){b.push({specified:1,nodeName:'selected'});}var h=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;e.cloneNode(false).outerHTML.replace(h,'').replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a});});return b;}return e.attributes;},isEmpty:function(a,e){var b=this,i,h,r,w,x,y=0;a=a.firstChild;if(a){w=new T(a,a.parentNode);e=e||(b.schema?b.schema.getNonEmptyElements():null);do{r=a.nodeType;if(r===1){if(a.getAttribute('data-mce-bogus')){continue;}x=a.nodeName.toLowerCase();if(e&&e[x]){if(x==='br'){y++;continue;}return false;}h=b.getAttribs(a);i=h.length;while(i--){x=h[i].nodeName;if(x==="name"||x==='data-mce-bookmark'){return false;}}}if(r==8){return false;}if((r===3&&!p.test(a.nodeValue))){return false;}}while((a=w.next()));}return y<=1;},createRng:function(){var a=this.doc;return a.createRange?a.createRange():new R(this);},nodeIndex:function(a,b){var i=0,e,h;if(a){for(e=a.nodeType,a=a.previousSibling;a;a=a.previousSibling){h=a.nodeType;if(b&&h==3){if(h==e||!a.nodeValue.length){continue;}}i++;e=h;}}return i;},split:function(a,b,e){var h=this,r=h.createRng(),w,x,y;function G(H){var i,I=H.childNodes,J=H.nodeType;function K(H){var M=H.previousSibling&&H.previousSibling.nodeName=='SPAN';var N=H.nextSibling&&H.nextSibling.nodeName=='SPAN';return M&&N;}if(J==1&&H.getAttribute('data-mce-type')=='bookmark'){return;}for(i=I.length-1;i>=0;i--){G(I[i]);}if(J!=9){if(J==3&&H.nodeValue.length>0){var L=t(H.nodeValue).length;if(!h.isBlock(H.parentNode)||L>0||L===0&&K(H)){return;}}else if(J==1){I=H.childNodes;if(I.length==1&&I[0]&&I[0].nodeType==1&&I[0].getAttribute('data-mce-type')=='bookmark'){H.parentNode.insertBefore(I[0],H);}if(I.length||/^(br|hr|input|img)$/i.test(H.nodeName)){return;}}h.remove(H);}return H;}if(a&&b){r.setStart(a.parentNode,h.nodeIndex(a));r.setEnd(b.parentNode,h.nodeIndex(b));w=r.extractContents();r=h.createRng();r.setStart(b.parentNode,h.nodeIndex(b)+1);r.setEnd(a.parentNode,h.nodeIndex(a)+1);x=r.extractContents();y=a.parentNode;y.insertBefore(G(w),a);if(e){y.replaceChild(e,b);}else{y.insertBefore(b,a);}y.insertBefore(G(x),a);h.remove(a);return e||b;}},bind:function(a,b,e,h){var r=this;if(j.isArray(a)){var i=a.length;while(i--){a[i]=r.bind(a[i],b,e,h);}return a;}if(r.settings.collect&&(a===r.doc||a===r.win)){r.boundEvents.push([a,b,e,h]);}return r.events.bind(a,b,e,h||r);},unbind:function(a,b,e){var h=this,i;if(j.isArray(a)){i=a.length;while(i--){a[i]=h.unbind(a[i],b,e);}return a;}if(h.boundEvents&&(a===h.doc||a===h.win)){i=h.boundEvents.length;while(i--){var r=h.boundEvents[i];if(a==r[0]&&(!b||b==r[1])&&(!e||e==r[2])){this.events.unbind(r[0],r[1],r[2]);}}}return this.events.unbind(a,b,e);},fire:function(a,b,e){return this.events.fire(a,b,e);},getContentEditable:function(a){var b;if(!a||a.nodeType!=1){return null;}b=a.getAttribute("data-mce-contenteditable");if(b&&b!=="inherit"){return b;}return a.contentEditable!=="inherit"?a.contentEditable:null;},getContentEditableParent:function(a){var r=this.getRoot(),b=null;for(;a&&a!==r;a=a.parentNode){b=this.getContentEditable(a);if(b!==null){break;}}return b;},destroy:function(){var a=this;if(a.boundEvents){var i=a.boundEvents.length;while(i--){var b=a.boundEvents[i];this.events.unbind(b[0],b[1],b[2]);}a.boundEvents=null;}if(S.setDocument){S.setDocument();}a.win=a.doc=a.root=a.events=a.frag=null;},isChildOf:function(a,b){while(a){if(b===a){return true;}a=a.parentNode;}return false;},dumpRng:function(r){return('startContainer: '+r.startContainer.nodeName+', startOffset: '+r.startOffset+', endContainer: '+r.endContainer.nodeName+', endOffset: '+r.endOffset);},_findSib:function(a,b,e){var h=this,i=b;if(a){if(typeof(i)=='string'){i=function(a){return h.is(a,b);};}for(a=a[e];a;a=a[e]){if(i(a)){return a;}}}return null;}};v.DOM=new v(document);return v;});
/**
 * ScriptLoader.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/ScriptLoader",["tinymce/dom/DOMUtils","tinymce/util/Tools"],function(a,T){var b=a.DOM;var e=T.each,g=T.grep;function S(){var Q=0,L=1,c=2,s={},d=[],f={},h=[],l=0,u;function i(j,k){var m=b,n,o;function p(){m.remove(o);if(n){n.onreadystatechange=n.onload=n=null;}k();}function r(){if(typeof(console)!=="undefined"&&console.log){console.log("Failed to load: "+j);}}o=m.uniqueId();n=document.createElement('script');n.id=o;n.type='text/javascript';n.src=T._addCacheSuffix(j);if("onreadystatechange"in n){n.onreadystatechange=function(){if(/loaded|complete/.test(n.readyState)){p();}};}else{n.onload=p;}n.onerror=r;(document.getElementsByTagName('head')[0]||document.body).appendChild(n);}this.isDone=function(j){return s[j]==c;};this.markDone=function(j){s[j]=c;};this.add=this.load=function(j,k,m){var n=s[j];if(n==u){d.push(j);s[j]=Q;}if(k){if(!f[j]){f[j]=[];}f[j].push({func:k,scope:m||this});}};this.loadQueue=function(j,k){this.loadScripts(d,j,k);};this.loadScripts=function(j,k,m){var n;function o(p){e(f[p],function(k){k.func.call(k.scope);});f[p]=u;}h.push({func:k,scope:m||this});n=function(){var p=g(j);j.length=0;e(p,function(r){if(s[r]==c){o(r);return;}if(s[r]!=L){s[r]=L;l++;i(r,function(){s[r]=c;l--;o(r);n();});}});if(!l){e(h,function(k){k.func.call(k.scope);});h.length=0;}};n();};}S.ScriptLoader=new S();return S;});
/**
 * AddOnManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/AddOnManager",["tinymce/dom/ScriptLoader","tinymce/util/Tools"],function(S,T){var e=T.each;function a(){var s=this;s.items=[];s.urls={};s.lookup={};}a.prototype={get:function(n){if(this.lookup[n]){return this.lookup[n].instance;}else{return z;}},dependencies:function(n){var r;if(this.lookup[n]){r=this.lookup[n].dependencies;}return r||[];},requireLangPack:function(n,l){var b=a.language;if(b&&a.languageLoad!==false){if(l){l=','+l+',';if(l.indexOf(','+b.substr(0,2)+',')!=-1){b=b.substr(0,2);}else if(l.indexOf(','+b+',')==-1){return;}}S.ScriptLoader.add(this.urls[n]+'/langs/'+b+'.js');}},add:function(i,b,d){this.items.push(b);this.lookup[i]={instance:b,dependencies:d};return b;},createUrl:function(b,d){if(typeof d==="object"){return d;}else{return{prefix:b.prefix,resource:d,suffix:b.suffix};}},addComponents:function(p,s){var b=this.urls[p];e(s,function(c){S.ScriptLoader.add(b+"/"+c);});},load:function(n,b,c,s){var d=this,u=b;function l(){var f=d.dependencies(n);e(f,function(g){var h=d.createUrl(b,g);d.load(h.resource,h,z,z);});if(c){if(s){c.call(s);}else{c.call(S);}}}if(d.urls[n]){return;}if(typeof b==="object"){u=b.prefix+b.resource+b.suffix;}if(u.indexOf('/')!==0&&u.indexOf('://')==-1){u=a.baseURL+'/'+u;}d.urls[n]=u.substring(0,u.lastIndexOf('/'));if(d.lookup[n]){l();}else{S.ScriptLoader.add(u,l,s);}}};a.PluginManager=new a();a.ThemeManager=new a();return a;});
/**
 * RangeUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/RangeUtils",["tinymce/util/Tools","tinymce/dom/TreeWalker"],function(T,a){var e=T.each;function g(c,i){var b=c.childNodes;i--;if(i>b.length-1){i=b.length-1;}else if(i<0){i=0;}return b[i]||c;}function R(d){this.walk=function(r,c){var s=r.startContainer,b=r.startOffset,f=r.endContainer,h=r.endOffset,i,j,k,n,p,l,m;m=d.select('td.mce-item-selected,th.mce-item-selected');if(m.length>0){e(m,function(n){c([n]);});return;}function o(m){var n;n=m[0];if(n.nodeType===3&&n===s&&b>=n.nodeValue.length){m.splice(0,1);}n=m[m.length-1];if(h===0&&m.length>0&&n===f&&n.nodeType===3){m.splice(m.length-1,1);}return m;}function t(n,v,x){var l=[];for(;n&&n!=x;n=n[v]){l.push(n);}return l;}function u(n,v){do{if(n.parentNode==v){return n;}n=n.parentNode;}while(n);}function w(v,x,y){var G=y?'nextSibling':'previousSibling';for(n=v,p=n.parentNode;n&&n!=x;n=p){p=n.parentNode;l=t(n==v?n:n[G],G);if(l.length){if(!y){l.reverse();}c(o(l));}}}if(s.nodeType==1&&s.hasChildNodes()){s=s.childNodes[b];}if(f.nodeType==1&&f.hasChildNodes()){f=g(f,h);}if(s==f){return c(o([s]));}i=d.findCommonAncestor(s,f);for(n=s;n;n=n.parentNode){if(n===f){return w(s,i,true);}if(n===i){break;}}for(n=f;n;n=n.parentNode){if(n===s){return w(f,i);}if(n===i){break;}}j=u(s,i)||s;k=u(f,i)||f;w(s,j,true);l=t(j==s?j:j.nextSibling,'nextSibling',k==f?k.nextSibling:k);if(l.length){c(o(l));}w(f,k);};this.split=function(r){var s=r.startContainer,b=r.startOffset,c=r.endContainer,f=r.endOffset;function h(n,o){return n.splitText(o);}if(s==c&&s.nodeType==3){if(b>0&&b<s.nodeValue.length){c=h(s,b);s=c.previousSibling;if(f>b){f=f-b;s=c=h(c,f).previousSibling;f=c.nodeValue.length;b=0;}else{f=0;}}}else{if(s.nodeType==3&&b>0&&b<s.nodeValue.length){s=h(s,b);b=0;}if(c.nodeType==3&&f>0&&f<c.nodeValue.length){c=h(c,f).previousSibling;f=c.nodeValue.length;}}return{startContainer:s,startOffset:b,endContainer:c,endOffset:f};};this.normalize=function(r){var n,c;function b(s){var f,o,w,h=d.getRoot(),i,j;var k,l;function m(i,u){var w=new a(i,d.getParent(i.parentNode,d.isBlock)||h);while((i=w[u?'prev':'next']())){if(i.nodeName==="BR"){return true;}}}function p(i,u){return i.previousSibling&&i.previousSibling.nodeName==u;}function t(u,v){var w,x,y;v=v||f;y=d.getParent(v.parentNode,d.isBlock)||h;if(u&&v.nodeName=='BR'&&l&&d.isEmpty(y)){f=v.parentNode;o=d.nodeIndex(v);n=true;return;}w=new a(v,y);while((i=w[u?'prev':'next']())){if(d.getContentEditableParent(i)==="false"){return;}if(i.nodeType===3&&i.nodeValue.length>0){f=i;o=u?i.nodeValue.length:0;n=true;return;}if(d.isBlock(i)||j[i.nodeName.toLowerCase()]){return;}x=i;}if(c&&x){f=x;n=true;o=0;}}f=r[(s?'start':'end')+'Container'];o=r[(s?'start':'end')+'Offset'];l=f.nodeType==1&&o===f.childNodes.length;j=d.schema.getNonEmptyElements();k=s;if(f.nodeType==1&&o>f.childNodes.length-1){k=false;}if(f.nodeType===9){f=d.getRoot();o=0;}if(f===h){if(k){i=f.childNodes[o>0?o-1:0];if(i){if(j[i.nodeName]||i.nodeName=="TABLE"){return;}}}if(f.hasChildNodes()){o=Math.min(!k&&o>0?o-1:o,f.childNodes.length-1);f=f.childNodes[o];o=0;if(f.hasChildNodes()&&!/TABLE/.test(f.nodeName)){i=f;w=new a(f,h);do{if(i.nodeType===3&&i.nodeValue.length>0){o=k?0:i.nodeValue.length;f=i;n=true;break;}if(j[i.nodeName.toLowerCase()]){o=d.nodeIndex(i);f=i.parentNode;if(i.nodeName=="IMG"&&!k){o++;}n=true;break;}}while((i=(k?w.next():w.prev())));}}}if(c){if(f.nodeType===3&&o===0){t(true);}if(f.nodeType===1){i=f.childNodes[o];if(!i){i=f.childNodes[o-1];}if(i&&i.nodeName==='BR'&&!p(i,'A')&&!m(i)&&!m(i,true)){t(true,i);}}}if(k&&!c&&f.nodeType===3&&o===f.nodeValue.length){t(false);}if(n){r['set'+(s?'Start':'End')](f,o);}}c=r.collapsed;b(true);if(!c){b();}if(n&&c){r.collapse(true);}return n;};}R.compareRanges=function(r,b){if(r&&b){if(r.item||r.duplicate){if(r.item&&b.item&&r.item(0)===b.item(0)){return true;}if(r.isEqual&&b.isEqual&&b.isEqual(r)){return true;}}else{return r.startContainer==b.startContainer&&r.startOffset==b.startOffset;}}return false;};return R;});
/**
 * NodeChange.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/NodeChange",["tinymce/dom/RangeUtils"],function(R){return function(a){var l,b=[];function c(s){var i,d;d=a.$(s).parentsUntil(a.getBody()).add(s);if(d.length===b.length){for(i=d.length;i>=0;i--){if(d[i]!==b[i]){break;}}if(i===-1){b=d;return true;}}b=d;return false;}if(!('onselectionchange'in a.getDoc())){a.on('NodeChange Click MouseUp KeyUp Focus',function(e){var n,f;n=a.selection.getRng();f={startContainer:n.startContainer,startOffset:n.startOffset,endContainer:n.endContainer,endOffset:n.endOffset};if(e.type=='nodechange'||!R.compareRanges(f,l)){a.fire('SelectionChange');}l=f;});}a.on('contextmenu',function(){a.fire('SelectionChange');});a.on('SelectionChange',function(){var s=a.selection.getStart(true);if(!a.selection.isCollapsed()&&!c(s)&&a.dom.isChildOf(s,a.getBody())){a.nodeChanged({selectionChange:true});}});a.on('MouseUp',function(e){if(!e.isDefaultPrevented()){setTimeout(function(){a.nodeChanged();},0);}});this.nodeChanged=function(d){var s=a.selection,n,p,r;if(a.initialized&&s&&!a.settings.disable_nodechange&&!a.settings.readonly){r=a.getBody();n=s.getStart()||r;n=n.ownerDocument!=a.getDoc()?a.getBody():n;if(n.nodeName=='IMG'&&s.isCollapsed()){n=n.parentNode;}p=[];a.dom.getParent(n,function(n){if(n===r){return true;}p.push(n);});d=d||{};d.element=n;d.parents=p;a.fire('NodeChange',d);}};};});
/**
 * Node.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/html/Node",[],function(){var w=/^[ \t\r\n]*$/,t={'#text':3,'#comment':8,'#cdata':4,'#pi':7,'#doctype':10,'#document-fragment':11};function a(n,r,p){var s,b,c=p?'lastChild':'firstChild',d=p?'prev':'next';if(n[c]){return n[c];}if(n!==r){s=n[d];if(s){return s;}for(b=n.parent;b&&b!==r;b=b.parent){s=b[d];if(s){return s;}}}}function N(n,b){this.name=n;this.type=b;if(b===1){this.attributes=[];this.attributes.map={};}}N.prototype={replace:function(n){var s=this;if(n.parent){n.remove();}s.insert(n,s);s.remove();return s;},attr:function(n,v){var s=this,b,i,u;if(typeof n!=="string"){for(i in n){s.attr(i,n[i]);}return s;}if((b=s.attributes)){if(v!==u){if(v===null){if(n in b.map){delete b.map[n];i=b.length;while(i--){if(b[i].name===n){b=b.splice(i,1);return s;}}}return s;}if(n in b.map){i=b.length;while(i--){if(b[i].name===n){b[i].value=v;break;}}}else{b.push({name:n,value:v});}b.map[n]=v;return s;}else{return b.map[n];}}},clone:function(){var s=this,c=new N(s.name,s.type),i,l,b,d,e;if((b=s.attributes)){e=[];e.map={};for(i=0,l=b.length;i<l;i++){d=b[i];if(d.name!=='id'){e[e.length]={name:d.name,value:d.value};e.map[d.name]=d.value;}}c.attributes=e;}c.value=s.value;c.shortEnded=s.shortEnded;return c;},wrap:function(b){var s=this;s.parent.insert(b,s);b.append(s);return s;},unwrap:function(){var s=this,n,b;for(n=s.firstChild;n;){b=n.next;s.insert(n,s,true);n=b;}s.remove();},remove:function(){var s=this,p=s.parent,n=s.next,b=s.prev;if(p){if(p.firstChild===s){p.firstChild=n;if(n){n.prev=null;}}else{b.next=n;}if(p.lastChild===s){p.lastChild=b;if(b){b.next=null;}}else{n.prev=b;}s.parent=s.next=s.prev=null;}return s;},append:function(n){var s=this,l;if(n.parent){n.remove();}l=s.lastChild;if(l){l.next=n;n.prev=l;s.lastChild=n;}else{s.lastChild=s.firstChild=n;}n.parent=s;return n;},insert:function(n,r,b){var p;if(n.parent){n.remove();}p=r.parent||this;if(b){if(r===p.firstChild){p.firstChild=n;}else{r.prev.next=n;}n.prev=r.prev;n.next=r;r.prev=n;}else{if(r===p.lastChild){p.lastChild=n;}else{r.next.prev=n;}n.next=r.next;n.prev=r;r.next=n;}n.parent=p;return n;},getAll:function(n){var s=this,b,c=[];for(b=s.firstChild;b;b=a(b,s)){if(b.name===n){c.push(b);}}return c;},empty:function(){var s=this,n,i,b;if(s.firstChild){n=[];for(b=s.firstChild;b;b=a(b,s)){n.push(b);}i=n.length;while(i--){b=n[i];b.parent=b.firstChild=b.lastChild=b.next=b.prev=null;}}s.firstChild=s.lastChild=null;return s;},isEmpty:function(e){var s=this,n=s.firstChild,i,b;if(n){do{if(n.type===1){if(n.attributes.map['data-mce-bogus']){continue;}if(e[n.name]){return false;}i=n.attributes.length;while(i--){b=n.attributes[i].name;if(b==="name"||b.indexOf('data-mce-bookmark')===0){return false;}}}if(n.type===8){return false;}if((n.type===3&&!w.test(n.value))){return false;}}while((n=a(n,s)));}return true;},walk:function(p){return a(this,null,p);}};N.create=function(n,b){var c,d;c=new N(n,t[n]||1);if(b){for(d in b){c.attr(d,b[d]);}}return c;};return N;});
/**
 * Schema.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/html/Schema",["tinymce/util/Tools"],function(T){var m={},d={};var a=T.makeMap,e=T.each,b=T.extend,c=T.explode,f=T.inArray;function s(i,j){return i?i.split(j||' '):[];}function g(t){var j={},k,n;var p,o,r,u;function v(x,y,G){var H,i,I,J=arguments;function K(L,M){var N={},i,l;for(i=0,l=L.length;i<l;i++){N[L[i]]=M||{};}return N;}G=G||[];y=y||"";if(typeof(G)==="string"){G=s(G);}for(i=3;i<J.length;i++){if(typeof(J[i])==="string"){J[i]=s(J[i]);}G.push.apply(G,J[i]);}x=s(x);H=x.length;while(H--){I=[].concat(k,s(y));j[x[H]]={attributes:K(I),attributesOrder:I,children:K(G,d)};}}function w(x,y){var G,H,i,l;x=s(x);G=x.length;y=s(y);while(G--){H=j[x[G]];for(i=0,l=y.length;i<l;i++){H.attributes[y[i]]={};H.attributesOrder.push(y[i]);}}}if(m[t]){return m[t];}k=s("id accesskey class dir lang style tabindex title");n=s("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul");p=s("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd "+"label map noscript object q s samp script select small span strong sub sup "+"textarea u var #text #comment");if(t!="html4"){k.push.apply(k,s("contenteditable contextmenu draggable dropzone "+"hidden spellcheck translate"));n.push.apply(n,s("article aside details dialog figure header footer hgroup section nav"));p.push.apply(p,s("audio canvas command datalist mark meter output progress time wbr "+"video ruby bdi keygen"));}if(t!="html5-strict"){k.push("xml:lang");u=s("acronym applet basefont big font strike tt");p.push.apply(p,u);e(u,function(i){v(i,"",p);});r=s("center dir isindex noframes");n.push.apply(n,r);o=[].concat(n,p);e(r,function(i){v(i,"",o);});}o=o||[].concat(n,p);v("html","manifest","head body");v("head","","base command link meta noscript script style title");v("title hr noscript br");v("base","href target");v("link","href rel media hreflang type sizes hreflang");v("meta","name http-equiv content charset");v("style","media type scoped");v("script","src async defer type charset");v("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus "+"onhashchange onload onmessage onoffline ononline onpagehide onpageshow "+"onpopstate onresize onscroll onstorage onunload",o);v("address dt dd div caption","",o);v("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",p);v("blockquote","cite",o);v("ol","reversed start type","li");v("ul","","li");v("li","value",o);v("dl","","dt dd");v("a","href target rel media hreflang type",p);v("q","cite",p);v("ins del","cite datetime",o);v("img","src srcset alt usemap ismap width height");v("iframe","src name width height",o);v("embed","src type width height");v("object","data type typemustmatch name usemap form width height",o,"param");v("param","name value");v("map","name",o,"area");v("area","alt coords shape href target rel media hreflang type");v("table","border","caption colgroup thead tfoot tbody tr"+(t=="html4"?" col":""));v("colgroup","span","col");v("col","span");v("tbody thead tfoot","","tr");v("tr","","td th");v("td","colspan rowspan headers",o);v("th","colspan rowspan headers scope abbr",o);v("form","accept-charset action autocomplete enctype method name novalidate target",o);v("fieldset","disabled form name",o,"legend");v("label","form for",p);v("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate "+"formtarget height list max maxlength min multiple name pattern readonly required size src step type value width");v("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",t=="html4"?o:p);v("select","disabled form multiple name required size","option optgroup");v("optgroup","disabled label","option");v("option","disabled label selected value");v("textarea","cols dirname disabled form maxlength name readonly required rows wrap");v("menu","type label",o,"li");v("noscript","",o);if(t!="html4"){v("wbr");v("ruby","",p,"rt rp");v("figcaption","",o);v("mark rt rp summary bdi","",p);v("canvas","width height",o);v("video","src crossorigin poster preload autoplay mediagroup loop "+"muted controls width height buffered",o,"track source");v("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",o,"track source");v("picture","","img source");v("source","src srcset type media sizes");v("track","kind src srclang label default");v("datalist","",p,"option");v("article section nav aside header footer","",o);v("hgroup","","h1 h2 h3 h4 h5 h6");v("figure","",o,"figcaption");v("time","datetime",p);v("dialog","open",o);v("command","type label icon disabled checked radiogroup command");v("output","for form name",p);v("progress","value max",p);v("meter","value min max low high optimum",p);v("details","open",o,"summary");v("keygen","autofocus challenge disabled form keytype name");}if(t!="html5-strict"){w("script","language xml:space");w("style","xml:space");w("object","declare classid code codebase codetype archive standby align border hspace vspace");w("embed","align name hspace vspace");w("param","valuetype type");w("a","charset name rev shape coords");w("br","clear");w("applet","codebase archive code object alt name width height align hspace vspace");w("img","name longdesc align border hspace vspace");w("iframe","longdesc frameborder marginwidth marginheight scrolling align");w("font basefont","size color face");w("input","usemap align");w("select","onchange");w("textarea");w("h1 h2 h3 h4 h5 h6 div p legend caption","align");w("ul","type compact");w("li","type");w("ol dl menu dir","compact");w("pre","width xml:space");w("hr","align noshade size width");w("isindex","prompt");w("table","summary width frame rules cellspacing cellpadding align bgcolor");w("col","width align char charoff valign");w("colgroup","width align char charoff valign");w("thead","align char charoff valign");w("tr","align char charoff valign bgcolor");w("th","axis align char charoff valign nowrap bgcolor width height");w("form","accept");w("td","abbr axis scope align char charoff valign nowrap bgcolor width height");w("tfoot","align char charoff valign");w("tbody","align char charoff valign");w("area","nohref");w("body","background bgcolor text link vlink alink");}if(t!="html4"){w("input button select textarea","autofocus");w("input textarea","placeholder");w("a","download");w("link script img","crossorigin");w("iframe","sandbox seamless allowfullscreen");}e(s('a form meter progress dfn'),function(i){if(j[i]){delete j[i].children[i];}});delete j.caption.children.table;m[t]=j;return j;}function h(v,i){var j;if(v){j={};if(typeof v=='string'){v={'*':v};}e(v,function(v,k){j[k]=i=='map'?a(v,/[, ]/):c(v,/[, ]/);});}return j;}return function(j){var k=this,l={},n={},p=[],v,o,r;var w,t,u,x,y;var G,H,I,J;var K={},L={};function M(i,U,V){var W=j[i];if(!W){W=m[i];if(!W){W=a(U,' ',a(U.toUpperCase(),' '));W=b(W,V);m[i]=W;}}else{W=a(W,/[, ]/,a(W.toUpperCase(),/[, ]/));}return W;}j=j||{};r=g(j.schema);if(j.verify_html===false){j.valid_elements='*[*]';}v=h(j.valid_styles);o=h(j.invalid_styles,'map');y=h(j.valid_classes,'map');w=M('whitespace_elements','pre script noscript style textarea video audio iframe object');t=M('self_closing_elements','colgroup dd dt li option p td tfoot th thead tr');u=M('short_ended_elements','area base basefont br col frame hr img input isindex link '+'meta param embed source wbr track');x=M('boolean_attributes','checked compact declare defer disabled ismap multiple nohref noresize '+'noshade nowrap readonly selected autoplay loop controls');H=M('non_empty_elements','td th iframe video audio object script',u);I=M('text_block_elements','h1 h2 h3 h4 h5 h6 p div address pre form '+'blockquote center dir fieldset header footer article section hgroup aside nav figure');G=M('block_elements','hr table tbody thead tfoot '+'th tr td li ol ul caption dl dt dd noscript menu isindex option '+'datalist select optgroup',I);J=M('text_inline_elements','span strong b em i font strike u var cite '+'dfn code mark q sup sub samp');e((j.special||'script noscript style textarea').split(' '),function(i){L[i]=new RegExp('<\/'+i+'[^>]*>','gi');});function N(i){return new RegExp('^'+i.replace(/([?+*])/g,'.$1')+'$');}function O(i){var U,V,W,X,Y,Z,$,_,a1,b1,c1,d1,e1,f1,g1,h1,i1,j1,k1,l1=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,m1=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,n1=/[*?+]/;if(i){i=s(i,',');if(l['@']){h1=l['@'].attributes;i1=l['@'].attributesOrder;}for(U=0,V=i.length;U<V;U++){Y=l1.exec(i[U]);if(Y){f1=Y[1];a1=Y[2];g1=Y[3];_=Y[5];d1={};e1=[];Z={attributes:d1,attributesOrder:e1};if(f1==='#'){Z.paddEmpty=true;}if(f1==='-'){Z.removeEmpty=true;}if(Y[4]==='!'){Z.removeEmptyAttrs=true;}if(h1){for(j1 in h1){d1[j1]=h1[j1];}e1.push.apply(e1,i1);}if(_){_=s(_,'|');for(W=0,X=_.length;W<X;W++){Y=m1.exec(_[W]);if(Y){$={};c1=Y[1];b1=Y[2].replace(/::/g,':');f1=Y[3];k1=Y[4];if(c1==='!'){Z.attributesRequired=Z.attributesRequired||[];Z.attributesRequired.push(b1);$.required=true;}if(c1==='-'){delete d1[b1];e1.splice(f(e1,b1),1);continue;}if(f1){if(f1==='='){Z.attributesDefault=Z.attributesDefault||[];Z.attributesDefault.push({name:b1,value:k1});$.defaultValue=k1;}if(f1===':'){Z.attributesForced=Z.attributesForced||[];Z.attributesForced.push({name:b1,value:k1});$.forcedValue=k1;}if(f1==='<'){$.validValues=a(k1,'?');}}if(n1.test(b1)){Z.attributePatterns=Z.attributePatterns||[];$.pattern=N(b1);Z.attributePatterns.push($);}else{if(!d1[b1]){e1.push(b1);}d1[b1]=$;}}}}if(!h1&&a1=='@'){h1=d1;i1=e1;}if(g1){Z.outputName=a1;l[g1]=Z;}if(n1.test(a1)){Z.pattern=N(a1);p.push(Z);}else{l[a1]=Z;}}}}}function P(i){l={};p=[];O(i);e(r,function(U,V){n[V]=U.children;});}function Q(i){var U=/^(~)?(.+)$/;if(i){m.text_block_elements=m.block_elements=null;e(s(i,','),function(V){var W=U.exec(V),X=W[1]==='~',Y=X?'span':'div',Z=W[2];n[Z]=n[Y];K[Z]=Y;if(!X){G[Z.toUpperCase()]={};G[Z]={};}if(!l[Z]){var $=l[Y];$=b({},$);delete $.removeEmptyAttrs;delete $.removeEmpty;l[Z]=$;}e(n,function(_,a1){if(_[Y]){n[a1]=_=b({},n[a1]);_[Z]=_[Y];}});});}}function R(i){var U=/^([+\-]?)(\w+)\[([^\]]+)\]$/;if(i){e(s(i,','),function(V){var W=U.exec(V),X,Y;if(W){Y=W[1];if(Y){X=n[W[2]];}else{X=n[W[2]]={'#comment':{}};}X=n[W[2]];e(s(W[3],'|'),function(Z){if(Y==='-'){n[W[2]]=X=b({},n[W[2]]);delete X[Z];}else{X[Z]={};}});}});}}function S(U){var V=l[U],i;if(V){return V;}i=p.length;while(i--){V=p[i];if(V.pattern.test(U)){return V;}}}if(!j.valid_elements){e(r,function(i,U){l[U]={attributes:i.attributes,attributesOrder:i.attributesOrder};n[U]=i.children;});if(j.schema!="html5"){e(s('strong/b em/i'),function(i){i=s(i,'/');l[i[1]].outputName=i[0];});}l.img.attributesDefault=[{name:'alt',value:''}];e(s('ol ul sub sup blockquote span font a table tbody tr strong em b i'),function(i){if(l[i]){l[i].removeEmpty=true;}});e(s('p h1 h2 h3 h4 h5 h6 th td pre div address caption'),function(i){l[i].paddEmpty=true;});e(s('span'),function(i){l[i].removeEmptyAttrs=true;});}else{P(j.valid_elements);}Q(j.custom_elements);R(j.valid_children);O(j.extended_valid_elements);R('+ol[ul|ol],+ul[ul|ol]');if(j.invalid_elements){e(c(j.invalid_elements),function(i){if(l[i]){delete l[i];}});}if(!S('span')){O('span[!data-mce-type|*]');}k.children=n;k.getValidStyles=function(){return v;};k.getInvalidStyles=function(){return o;};k.getValidClasses=function(){return y;};k.getBoolAttrs=function(){return x;};k.getBlockElements=function(){return G;};k.getTextBlockElements=function(){return I;};k.getTextInlineElements=function(){return J;};k.getShortEndedElements=function(){return u;};k.getSelfClosingElements=function(){return t;};k.getNonEmptyElements=function(){return H;};k.getWhiteSpaceElements=function(){return w;};k.getSpecialElements=function(){return L;};k.isValidChild=function(i,U){var V=n[i];return!!(V&&V[U]);};k.isValid=function(U,V){var W,i,X=S(U);if(X){if(V){if(X.attributes[V]){return true;}W=X.attributePatterns;if(W){i=W.length;while(i--){if(W[i].pattern.test(U)){return true;}}}}else{return true;}}return false;};k.getElementRule=S;k.getCustomElements=function(){return K;};k.addValidElements=O;k.setValidElements=P;k.addCustomElements=Q;k.addValidChildren=R;k.elements=l;};});
/**
 * SaxParser.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/html/SaxParser",["tinymce/html/Schema","tinymce/html/Entities","tinymce/util/Tools"],function(S,a,T){var e=T.each;function f(s,h,c){var d=1,i,m,t,g;g=s.getShortEndedElements();t=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g;t.lastIndex=i=c;while((m=t.exec(h))){i=t.lastIndex;if(m[1]==='/'){d--;}else if(!m[1]){if(m[2]in g){continue;}d++;}if(d===0){break;}}return i;}function b(s,c){var d=this;function n(){}s=s||{};d.schema=c=c||new S();if(s.fix_self_closing!==false){s.fix_self_closing=true;}e('comment cdata text start end pi doctype'.split(' '),function(g){if(g){d[g]=s[g]||n;}});d.parse=function(h){var d=this,m,g=0,v,j,k=[],l,i,t,o;var p,r,u,w,x;var y,G,H,I,J,K,L;var M,N,O;var P,Q,R,U,V,W,X=0;var Y=a.decode,Z,$=T.makeMap('src,href,data,background,formaction,poster');var _=/((java|vb)script|mhtml):/i,a1=/^data:/i;function b1(o){var d1,i;d1=k.length;while(d1--){if(k[d1].name===o){break;}}if(d1>=0){for(i=k.length-1;i>=d1;i--){o=k[i];if(o.valid){d.end(o.name);}}k.length=d1;}}function c1(d1,o,v,e1,f1){var g1,i,h1=/[\s\u0000-\u001F]+/g;o=o.toLowerCase();v=o in w?o:Y(v||e1||f1||'');if(y&&!p&&o.indexOf('data-')!==0){g1=K[o];if(!g1&&L){i=L.length;while(i--){g1=L[i];if(g1.pattern.test(o)){break;}}if(i===-1){g1=null;}}if(!g1){return;}if(g1.validValues&&!(v in g1.validValues)){return;}}if($[o]&&!s.allow_script_urls){var i1=v.replace(h1,'');try{i1=decodeURIComponent(i1);}catch(ex){i1=unescape(i1);}if(_.test(i1)){return;}if(!s.allow_html_data_urls&&a1.test(i1)&&!/^data:image\//i.test(i1)){return;}}l.map[o]=v;l.push({name:o,value:v});}R=new RegExp('<(?:'+'(?:!--([\\w\\W]*?)-->)|'+'(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|'+'(?:!DOCTYPE([\\w\\W]*?)>)|'+'(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|'+'(?:\\/([^>]+)>)|'+'(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\\/|\\s+)>)'+')','g');U=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g;u=c.getShortEndedElements();Q=s.self_closing_elements||c.getSelfClosingElements();w=c.getBoolAttrs();y=s.validate;r=s.remove_internals;Z=s.fix_self_closing;V=c.getSpecialElements();while((m=R.exec(h))){if(g<m.index){d.text(Y(h.substr(g,m.index-g)));}if((v=m[6])){v=v.toLowerCase();if(v.charAt(0)===':'){v=v.substr(1);}b1(v);}else if((v=m[7])){v=v.toLowerCase();if(v.charAt(0)===':'){v=v.substr(1);}x=v in u;if(Z&&Q[v]&&k.length>0&&k[k.length-1].name===v){b1(v);}if(!y||(G=c.getElementRule(v))){H=true;if(y){K=G.attributes;L=G.attributePatterns;}if((J=m[8])){p=J.indexOf('data-mce-type')!==-1;if(p&&r){H=false;}l=[];l.map={};J.replace(U,c1);}else{l=[];l.map={};}if(y&&!p){M=G.attributesRequired;N=G.attributesDefault;O=G.attributesForced;P=G.removeEmptyAttrs;if(P&&!l.length){H=false;}if(O){i=O.length;while(i--){I=O[i];o=I.name;W=I.value;if(W==='{$uid}'){W='mce_'+X++;}l.map[o]=W;l.push({name:o,value:W});}}if(N){i=N.length;while(i--){I=N[i];o=I.name;if(!(o in l.map)){W=I.value;if(W==='{$uid}'){W='mce_'+X++;}l.map[o]=W;l.push({name:o,value:W});}}}if(M){i=M.length;while(i--){if(M[i]in l.map){break;}}if(i===-1){H=false;}}if((I=l.map['data-mce-bogus'])){if(I==='all'){g=f(c,h,R.lastIndex);R.lastIndex=g;continue;}H=false;}}if(H){d.start(v,l,x);}}else{H=false;}if((j=V[v])){j.lastIndex=g=m.index+m[0].length;if((m=j.exec(h))){if(H){t=h.substr(g,m.index-g);}g=m.index+m[0].length;}else{t=h.substr(g);g=h.length;}if(H){if(t.length>0){d.text(t,true);}d.end(v);}R.lastIndex=g;continue;}if(!x){if(!J||J.indexOf('/')!=J.length-1){k.push({name:v,valid:H});}else if(H){d.end(v);}}}else if((v=m[1])){if(v.charAt(0)==='>'){v=' '+v;}if(!s.allow_conditional_comments&&v.substr(0,3)==='[if'){v=' '+v;}d.comment(v);}else if((v=m[2])){d.cdata(v);}else if((v=m[3])){d.doctype(v);}else if((v=m[4])){d.pi(v,m[5]);}g=m.index+m[0].length;}if(g<h.length){d.text(Y(h.substr(g)));}for(i=k.length-1;i>=0;i--){v=k[i];if(v.valid){d.end(v.name);}}};}b.findEndTag=f;return b;});
/**
 * DomParser.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/html/DomParser",["tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/util/Tools"],function(N,S,a,T){var m=T.makeMap,e=T.each,b=T.explode,c=T.extend;return function(s,d){var f=this,n={},g=[],h={},j={};s=s||{};s.validate="validate"in s?s.validate:true;s.root_name=s.root_name||'body';f.schema=d=d||new S();function k(l){var o,p,r,t,u,v,w,x,i;var y,G,H,I,J;G=m('tr,td,th,tbody,thead,tfoot,table');y=d.getNonEmptyElements();H=d.getTextBlockElements();for(o=0;o<l.length;o++){p=l[o];if(!p.parent||p.fixed){continue;}if(H[p.name]&&p.parent.name=='li'){I=p.next;while(I){if(H[I.name]){I.name='li';I.fixed=true;p.parent.insert(I,p.parent);}else{break;}I=I.next;}p.unwrap(p);continue;}t=[p];for(r=p.parent;r&&!d.isValidChild(r.name,p.name)&&!G[r.name];r=r.parent){t.push(r);}if(r&&t.length>1){t.reverse();u=v=f.filterNode(t[0].clone());for(i=0;i<t.length-1;i++){if(d.isValidChild(v.name,t[i].name)){w=f.filterNode(t[i].clone());v.append(w);}else{w=v;}for(x=t[i].firstChild;x&&x!=t[i+1];){J=x.next;w.append(x);x=J;}v=w;}if(!u.isEmpty(y)){r.insert(u,t[0],true);r.insert(p,u);}else{r.insert(p,t[0],true);}r=t[0];if(r.isEmpty(y)||r.firstChild===r.lastChild&&r.firstChild.name==='br'){r.empty().remove();}}else if(p.parent){if(p.name==='li'){I=p.prev;if(I&&(I.name==='ul'||I.name==='ul')){I.append(p);continue;}I=p.next;if(I&&(I.name==='ul'||I.name==='ul')){I.insert(p,I.firstChild,true);continue;}p.wrap(f.filterNode(new N('ul',1)));continue;}if(d.isValidChild(p.parent.name,'div')&&d.isValidChild('div',p.name)){p.wrap(f.filterNode(new N('div',1)));}else{if(p.name==='style'||p.name==='script'){p.empty().remove();}else{p.unwrap();}}}}}f.filterNode=function(l){var i,o,p;if(o in n){p=h[o];if(p){p.push(l);}else{h[o]=[l];}}i=g.length;while(i--){o=g[i].name;if(o in l.attributes.map){p=j[o];if(p){p.push(l);}else{j[o]=[l];}}}return l;};f.addNodeFilter=function(i,l){e(b(i),function(i){var o=n[i];if(!o){n[i]=o=[];}o.push(l);});};f.addAttributeFilter=function(l,o){e(b(l),function(l){var i;for(i=0;i<g.length;i++){if(g[i].name===l){g[i].callbacks.push(o);return;}}g.push({name:l,callbacks:[o]});});};f.parse=function(o,p){var r,t,u,v,i,l,w,x,y,G,H;var I,J,K=[],L;var M,O,P,Q;var R,U,V;p=p||{};h={};j={};I=c(m('script,style,head,html,body,title,meta,param'),d.getBlockElements());U=d.getNonEmptyElements();R=d.children;H=s.validate;V="forced_root_block"in p?p.forced_root_block:s.forced_root_block;Q=d.getWhiteSpaceElements();J=/^[ \t\r\n]+/;M=/[ \t\r\n]+$/;O=/[ \t\r\n]+/g;P=/^[ \t\r\n]+$/;function W(){var u=t.firstChild,$,_;function a1(_){if(_){u=_.firstChild;if(u&&u.type==3){u.value=u.value.replace(J,'');}u=_.lastChild;if(u&&u.type==3){u.value=u.value.replace(M,'');}}}if(!d.isValidChild(t.name,V.toLowerCase())){return;}while(u){$=u.next;if(u.type==3||(u.type==1&&u.name!=='p'&&!I[u.name]&&!u.attr('data-mce-type'))){if(!_){_=X(V,1);_.attr(s.forced_root_block_attrs);t.insert(_,u);_.append(u);}else{_.append(u);}}else{a1(_);_=null;}u=$;}a1(_);}function X(G,$){var u=new N(G,$),y;if(G in n){y=h[G];if(y){y.push(u);}else{h[G]=[u];}}return u;}function Y(u){var $,_,a1;for($=u.prev;$&&$.type===3;){_=$.value.replace(M,'');if(_.length>0){$.value=_;$=$.prev;}else{a1=$.prev;$.remove();$=a1;}}}function Z($){var G,_={};for(G in $){if(G!=='li'&&G!='p'){_[G]=$[G];}}return _;}r=new a({validate:H,allow_script_urls:s.allow_script_urls,allow_conditional_comments:s.allow_conditional_comments,self_closing_elements:Z(d.getSelfClosingElements()),cdata:function($){u.append(X('#cdata',4)).value=$;},text:function($,_){var a1;if(!L){$=$.replace(O,' ');if(u.lastChild&&I[u.lastChild.name]){$=$.replace(J,'');}}if($.length!==0){a1=X('#text',3);a1.raw=!!_;u.append(a1).value=$;}},comment:function($){u.append(X('#comment',8)).value=$;},pi:function(G,$){u.append(X(G,7)).value=$;Y(u);},doctype:function($){var _;_=u.append(X('#doctype',10));_.value=$;Y(u);},start:function(G,$,_){var a1,b1,c1,d1,e1;c1=H?d.getElementRule(G):{};if(c1){a1=X(c1.outputName||G,1);a1.attributes=$;a1.shortEnded=_;u.append(a1);e1=R[u.name];if(e1&&R[a1.name]&&!e1[a1.name]){K.push(a1);}b1=g.length;while(b1--){d1=g[b1].name;if(d1 in $.map){y=j[d1];if(y){y.push(a1);}else{j[d1]=[a1];}}}if(I[G]){Y(a1);}if(!_){u=a1;}if(!L&&Q[G]){L=true;}}},end:function(G){var $,_,a1,b1,c1;_=H?d.getElementRule(G):{};if(_){if(I[G]){if(!L){$=u.firstChild;if($&&$.type===3){a1=$.value.replace(J,'');if(a1.length>0){$.value=a1;$=$.next;}else{b1=$.next;$.remove();$=b1;while($&&$.type===3){a1=$.value;b1=$.next;if(a1.length===0||P.test(a1)){$.remove();$=b1;}$=b1;}}}$=u.lastChild;if($&&$.type===3){a1=$.value.replace(M,'');if(a1.length>0){$.value=a1;$=$.prev;}else{b1=$.prev;$.remove();$=b1;while($&&$.type===3){a1=$.value;b1=$.prev;if(a1.length===0||P.test(a1)){$.remove();$=b1;}$=b1;}}}}}if(L&&Q[G]){L=false;}if(_.removeEmpty||_.paddEmpty){if(u.isEmpty(U)){if(_.paddEmpty){u.empty().append(new N('#text','3')).value='\u00a0';}else{if(!u.attributes.map.name&&!u.attributes.map.id){c1=u.parent;if(I[u.name]){u.empty().remove();}else{u.unwrap();}u=c1;return;}}}}u=u.parent;}}},d);t=u=new N(p.context||s.root_name,11);r.parse(o);if(H&&K.length){if(!p.context){k(K);}else{p.invalid=true;}}if(V&&(t.name=='body'||p.isRootContent)){W();}if(!p.invalid){for(G in h){y=n[G];v=h[G];w=v.length;while(w--){if(!v[w].parent){v.splice(w,1);}}for(i=0,l=y.length;i<l;i++){y[i](v,G,p);}}for(i=0,l=g.length;i<l;i++){y=g[i];if(y.name in j){v=j[y.name];w=v.length;while(w--){if(!v[w].parent){v.splice(w,1);}}for(w=0,x=y.callbacks.length;w<x;w++){y.callbacks[w](v,y.name,p);}}}}return t;};if(s.remove_trailing_brs){f.addNodeFilter('br',function(o){var i,l=o.length,p,r=c({},d.getBlockElements());var t=d.getNonEmptyElements(),u,v,w,x;var y,G;r.body=1;for(i=0;i<l;i++){p=o[i];u=p.parent;if(r[p.parent.name]&&p===u.lastChild){w=p.prev;while(w){x=w.name;if(x!=="span"||w.attr('data-mce-type')!=='bookmark'){if(x!=="br"){break;}if(x==='br'){p=null;break;}}w=w.prev;}if(p){p.remove();if(u.isEmpty(t)){y=d.getElementRule(u.name);if(y){if(y.removeEmpty){u.remove();}else if(y.paddEmpty){u.empty().append(new N('#text',3)).value='\u00a0';}}}}}else{v=p;while(u&&u.firstChild===v&&u.lastChild===v){v=u;if(r[u.name]){break;}u=u.parent;}if(v===u){G=new N('#text',3);G.value='\u00a0';p.replace(G);}}}});}if(!s.allow_html_in_named_anchor){f.addAttributeFilter('id,name',function(l){var i=l.length,o,p,r,t;while(i--){t=l[i];if(t.name==='a'&&t.firstChild&&!t.attr('href')){r=t.parent;o=t.lastChild;do{p=o.prev;r.insert(o,t);o=p;}while(o);}}});}if(s.validate&&d.getValidClasses()){f.addAttributeFilter('class',function(l){var i=l.length,o,p,r,t,u;var v=d.getValidClasses(),w,x;while(i--){o=l[i];p=o.attr('class').split(' ');u='';for(r=0;r<p.length;r++){t=p[r];x=false;w=v['*'];if(w&&w[t]){x=true;}w=v[o.name];if(!x&&w&&!w[t]){x=true;}if(x){if(u){u+=' ';}u+=t;}}if(!u.length){u=null;}o.attr('class',u);}});}};});
/**
 * Writer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/html/Writer",["tinymce/html/Entities","tinymce/util/Tools"],function(a,T){var m=T.makeMap;return function(s){var h=[],b,c,d,e,f;s=s||{};b=s.indent;c=m(s.indent_before||'');d=m(s.indent_after||'');e=a.getEncodeFunc(s.entity_encoding||'raw',s.entities);f=s.element_format=="html";return{start:function(n,g,j){var i,l,k,v;if(b&&c[n]&&h.length>0){v=h[h.length-1];if(v.length>0&&v!=='\n'){h.push('\n');}}h.push('<',n);if(g){for(i=0,l=g.length;i<l;i++){k=g[i];h.push(' ',k.name,'="',e(k.value,true),'"');}}if(!j||f){h[h.length]='>';}else{h[h.length]=' />';}if(j&&b&&d[n]&&h.length>0){v=h[h.length-1];if(v.length>0&&v!=='\n'){h.push('\n');}}},end:function(n){var v;h.push('</',n,'>');if(b&&d[n]&&h.length>0){v=h[h.length-1];if(v.length>0&&v!=='\n'){h.push('\n');}}},text:function(t,r){if(t.length>0){h[h.length]=r?t:e(t);}},cdata:function(t){h.push('<![CDATA[',t,']]>');},comment:function(t){h.push('<!--',t,'-->');},pi:function(n,t){if(t){h.push('<?',n,' ',t,'?>');}else{h.push('<?',n,'?>');}if(b){h.push('\n');}},doctype:function(t){h.push('<!DOCTYPE',t,'>',b?'\n':'');},reset:function(){h.length=0;},getContent:function(){return h.join('').replace(/\n$/,'');}};};});
/**
 * Serializer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/html/Serializer",["tinymce/html/Writer","tinymce/html/Schema"],function(W,S){return function(s,a){var b=this,w=new W(s);s=s||{};s.validate="validate"in s?s.validate:true;b.schema=a=a||new S();b.writer=w;b.serialize=function(n){var h,v;v=s.validate;h={3:function(n){w.text(n.value,n.raw);},8:function(n){w.comment(n.value);},7:function(n){w.pi(n.name,n.value);},10:function(n){w.doctype(n.value);},4:function(n){w.cdata(n.value);},11:function(n){if((n=n.firstChild)){do{c(n);}while((n=n.next));}}};w.reset();function c(n){var d=h[n.type],e,f,g,j,k,m,i,l,o;if(!d){e=n.name;f=n.shortEnded;g=n.attributes;if(v&&g&&g.length>1){m=[];m.map={};o=a.getElementRule(n.name);for(i=0,l=o.attributesOrder.length;i<l;i++){j=o.attributesOrder[i];if(j in g.map){k=g.map[j];m.map[j]=k;m.push({name:j,value:k});}}for(i=0,l=g.length;i<l;i++){j=g[i].name;if(!(j in m.map)){k=g.map[j];m.map[j]=k;m.push({name:j,value:k});}}g=m;}w.start(n.name,g,f);if(!f){if((n=n.firstChild)){do{c(n);}while((n=n.next));}w.end(e);}}else{d(n);}}if(n.type==1&&!s.inner){c(n);}else{h[11](n);}return w.getContent();};};});C("tinymce/dom/Serializer",["tinymce/dom/DOMUtils","tinymce/html/DomParser","tinymce/html/Entities","tinymce/html/Serializer","tinymce/html/Node","tinymce/html/Schema","tinymce/Env","tinymce/util/Tools"],function(a,b,c,S,N,d,e,T){var f=T.each,t=T.trim;var g=a.DOM;return function(s,h){var j,k,l;if(h){j=h.dom;k=h.schema;}j=j||g;k=k||new d(s);s.entity_encoding=s.entity_encoding||'named';s.remove_trailing_brs="remove_trailing_brs"in s?s.remove_trailing_brs:true;l=new b(s,k);l.addAttributeFilter('data-mce-tabindex',function(n,m){var i=n.length,o;while(i--){o=n[i];o.attr('tabindex',o.attributes.map['data-mce-tabindex']);o.attr(m,null);}});l.addAttributeFilter('src,href,style',function(n,m){var i=n.length,o,v,p='data-mce-'+m;var u=s.url_converter,r=s.url_converter_scope,w;while(i--){o=n[i];v=o.attributes.map[p];if(v!==w){o.attr(m,v.length>0?v:null);o.attr(p,null);}else{v=o.attributes.map[m];if(m==="style"){v=j.serializeStyle(j.parseStyle(v),o.name);}else if(u){v=u.call(r,v,m,o.name);}o.attr(m,v.length>0?v:null);}}});l.addAttributeFilter('class',function(n){var i=n.length,m,v;while(i--){m=n[i];v=m.attr('class');if(v){v=m.attr('class').replace(/(?:^|\s)mce-item-\w+(?!\S)/g,'');m.attr('class',v.length>0?v:null);}}});l.addAttributeFilter('data-mce-type',function(n,m,o){var i=n.length,p;while(i--){p=n[i];if(p.attributes.map['data-mce-type']==='bookmark'&&!o.cleanup){p.remove();}}});l.addNodeFilter('noscript',function(n){var i=n.length,m;while(i--){m=n[i].firstChild;if(m){m.value=c.decode(m.value);}}});l.addNodeFilter('script,style',function(n,m){var i=n.length,o,v,p;function t(v){return v.replace(/(<!--\[CDATA\[|\]\]-->)/g,'\n').replace(/^[\r\n]*|[\r\n]*$/g,'').replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,'').replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,'');}while(i--){o=n[i];v=o.firstChild?o.firstChild.value:'';if(m==="script"){p=o.attr('type');if(p){o.attr('type',p=='mce-no/type'?null:p.replace(/^mce\-/,''));}if(v.length>0){o.firstChild.value='// <![CDATA[\n'+t(v)+'\n// ]]>';}}else{if(v.length>0){o.firstChild.value='<!--\n'+t(v)+'\n-->';}}}});l.addNodeFilter('#comment',function(n){var i=n.length,m;while(i--){m=n[i];if(m.value.indexOf('[CDATA[')===0){m.name='#cdata';m.type=4;m.value=m.value.replace(/^\[CDATA\[|\]\]$/g,'');}else if(m.value.indexOf('mce:protected ')===0){m.name="#text";m.type=3;m.raw=true;m.value=unescape(m.value).substr(14);}}});l.addNodeFilter('xml:namespace,input',function(n,m){var i=n.length,o;while(i--){o=n[i];if(o.type===7){o.remove();}else if(o.type===1){if(m==="input"&&!("type"in o.attributes.map)){o.attr('type','text');}}}});if(s.fix_list_elements){l.addNodeFilter('ul,ol',function(n){var i=n.length,m,p;while(i--){m=n[i];p=m.parent;if(p.name==='ul'||p.name==='ol'){if(m.prev&&m.prev.name==='li'){m.prev.append(m);}}}});}l.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,'+'data-mce-selected,data-mce-expando,'+'data-mce-type,data-mce-resize',function(n,m){var i=n.length;while(i--){n[i].attr(m,null);}});return{schema:k,addNodeFilter:l.addNodeFilter,addAttributeFilter:l.addAttributeFilter,serialize:function(n,i){var m=this,o,p,r,u,v;if(e.ie&&j.select('script,style,select,map').length>0){v=n.innerHTML;n=n.cloneNode(false);j.setHTML(n,v);}else{n=n.cloneNode(true);}try{o=n.ownerDocument.implementation;if(o.createHTMLDocument){p=o.createHTMLDocument("");f(n.nodeName=='BODY'?n.childNodes:[n],function(n){p.body.appendChild(p.importNode(n,true));});if(n.nodeName!='BODY'){n=p.body.firstChild;}else{n=p.body;}r=j.doc;j.doc=p;}}catch(w){}i=i||{};i.format=i.format||'html';if(i.selection){i.forced_root_block='';}if(!i.no_events){i.node=n;m.onPreProcess(i);}u=new S(s,k);i.content=u.serialize(l.parse(t(i.getInner?n.innerHTML:j.getOuterHTML(n)),i));if(!i.cleanup){i.content=i.content.replace(/\uFEFF/g,'');}if(!i.no_events){m.onPostProcess(i);}if(r){j.doc=r;}i.node=null;return i.content;},addRules:function(r){k.addValidElements(r);},setRules:function(r){k.setValidElements(r);},onPreProcess:function(i){if(h){h.fire('PreProcess',i);}},onPostProcess:function(i){if(h){h.fire('PostProcess',i);}}};};});
/**
 * TridentSelection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/TridentSelection",[],function(){function S(s){var a=this,d=s.dom,b=false;function g(r,e){var f,h=0,i,j,k,l,o,m,p=-1,n;f=r.duplicate();f.collapse(e);n=f.parentElement();if(n.ownerDocument!==s.dom.doc){return;}while(n.contentEditable==="false"){n=n.parentNode;}if(!n.hasChildNodes()){return{node:n,inside:1};}k=n.children;i=k.length-1;while(h<=i){m=Math.floor((h+i)/2);l=k[m];f.moveToElementText(l);p=f.compareEndPoints(e?'StartToStart':'EndToEnd',r);if(p>0){i=m-1;}else if(p<0){h=m+1;}else{return{node:l};}}if(p<0){if(!l){f.moveToElementText(n);f.collapse(true);l=n;j=true;}else{f.collapse(false);}o=0;while(f.compareEndPoints(e?'StartToStart':'StartToEnd',r)!==0){if(f.move('character',1)===0||n!=f.parentElement()){break;}o++;}}else{f.collapse(true);o=0;while(f.compareEndPoints(e?'StartToStart':'StartToEnd',r)!==0){if(f.move('character',-1)===0||n!=f.parentElement()){break;}o++;}}return{node:l,position:p,offset:o,inside:j};}function c(){var i=s.getRng(),e=d.createRng(),f,h,t,j,k;f=i.item?i.item(0):i.parentElement();if(f.ownerDocument!=d.doc){return e;}h=s.isCollapsed();if(i.item){e.setStart(f.parentNode,d.nodeIndex(f));e.setEnd(e.startContainer,e.startOffset+1);return e;}function l(n){var o=g(i,n),p,r,u=0,v,w,x;p=o.node;r=o.offset;if(o.inside&&!p.hasChildNodes()){e[n?'setStart':'setEnd'](p,0);return;}if(r===w){e[n?'setStartBefore':'setEndAfter'](p);return;}if(o.position<0){v=o.inside?p.firstChild:p.nextSibling;if(!v){e[n?'setStartAfter':'setEndAfter'](p);return;}if(!r){if(v.nodeType==3){e[n?'setStart':'setEnd'](v,0);}else{e[n?'setStartBefore':'setEndBefore'](v);}return;}while(v){if(v.nodeType==3){x=v.nodeValue;u+=x.length;if(u>=r){p=v;u-=r;u=x.length-u;break;}}v=v.nextSibling;}}else{v=p.previousSibling;if(!v){return e[n?'setStartBefore':'setEndBefore'](p);}if(!r){if(p.nodeType==3){e[n?'setStart':'setEnd'](v,p.nodeValue.length);}else{e[n?'setStartAfter':'setEndAfter'](v);}return;}while(v){if(v.nodeType==3){u+=v.nodeValue.length;if(u>=r){p=v;u-=r;break;}}v=v.previousSibling;}}e[n?'setStart':'setEnd'](p,u);}try{l(true);if(!h){l();}}catch(m){if(m.number==-2147024809){k=a.getBookmark(2);t=i.duplicate();t.collapse(true);f=t.parentElement();if(!h){t=i.duplicate();t.collapse(false);j=t.parentElement();j.innerHTML=j.innerHTML;}f.innerHTML=f.innerHTML;a.moveToBookmark(k);i=s.getRng();l(true);if(!h){l();}}else{throw m;}}return e;}this.getBookmark=function(t){var r=s.getRng(),e={};function f(n){var p,j,k,i,l=[];p=n.parentNode;j=d.getRoot().parentNode;while(p!=j&&p.nodeType!==9){k=p.children;i=k.length;while(i--){if(n===k[i]){l.push(i);break;}}n=p;p=p.parentNode;}return l;}function h(i){var p;p=g(r,i);if(p){return{position:p.position,offset:p.offset,indexes:f(p.node),inside:p.inside};}}if(t===2){if(!r.item){e.start=h(true);if(!s.isCollapsed()){e.end=h();}}else{e.start={ctrl:true,indexes:f(r.item(0))};}}return e;};this.moveToBookmark=function(e){var r,f=d.doc.body;function h(k){var n,i,l,m;n=d.getRoot();for(i=k.length-1;i>=0;i--){m=n.children;l=k[i];if(l<=m.length-1){n=m[l];}}return n;}function j(i){var k=e[i?'start':'end'],m,l,u,o;if(k){m=k.position>0;l=f.createTextRange();l.moveToElementText(h(k.indexes));o=k.offset;if(o!==u){l.collapse(k.inside||m);l.moveStart('character',m?-o:o);}else{l.collapse(i);}r.setEndPoint(i?'StartToStart':'EndToStart',l);if(i){r.collapse(true);}}}if(e.start){if(e.start.ctrl){r=f.createControlRange();r.addElement(h(e.start.indexes));r.select();}else{r=f.createTextRange();j(true);j();r.select();}}};this.addRange=function(r){var i,e,f,h,j,k,l,m=s.dom.doc,n=m.body,o,p;function t(v){var w,x,y,G,H;y=d.create('a');w=v?f:j;x=v?h:k;G=i.duplicate();if(w==m||w==m.documentElement){w=n;x=0;}if(w.nodeType==3){w.parentNode.insertBefore(y,w);G.moveToElementText(y);G.moveStart('character',x);d.remove(y);i.setEndPoint(v?'StartToStart':'EndToEnd',G);}else{H=w.childNodes;if(H.length){if(x>=H.length){d.insertAfter(y,H[H.length-1]);}else{w.insertBefore(y,H[x]);}G.moveToElementText(y);}else if(w.canHaveHTML){w.innerHTML='<span>&#xFEFF;</span>';y=w.firstChild;G.moveToElementText(y);G.collapse(b);}i.setEndPoint(v?'StartToStart':'EndToEnd',G);d.remove(y);}}f=r.startContainer;h=r.startOffset;j=r.endContainer;k=r.endOffset;i=n.createTextRange();if(f==j&&f.nodeType==1){if(h==k&&!f.hasChildNodes()){if(f.canHaveHTML){l=f.previousSibling;if(l&&!l.hasChildNodes()&&d.isBlock(l)){l.innerHTML='&#xFEFF;';}else{l=null;}f.innerHTML='<span>&#xFEFF;</span><span>&#xFEFF;</span>';i.moveToElementText(f.lastChild);i.select();d.doc.selection.clear();f.innerHTML='';if(l){l.innerHTML='';}return;}else{h=d.nodeIndex(f);f=f.parentNode;}}if(h==k-1){try{p=f.childNodes[h];e=n.createControlRange();e.addElement(p);e.select();o=s.getRng();if(o.item&&p===o.item(0)){return;}}catch(u){}}}t(true);t();i.select();};this.getRangeAt=c;}return S;});
/**
 * VK.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/VK",["tinymce/Env"],function(a){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey||this.metaKeyPressed(e);},metaKeyPressed:function(e){return(a.mac?e.metaKey:e.ctrlKey&&!e.altKey);}};});
/**
 * ControlSelection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/ControlSelection",["tinymce/util/VK","tinymce/util/Tools","tinymce/Env"],function(V,T,a){return function(s,b){var d=b.dom,c=T.each;var f,g,r,h,i,l;var j,k,m,n,o,p,t,u;var w,v,x=b.getDoc(),y=document,G=a.ie&&a.ie<11;var H=Math.abs,I=Math.round,J=b.getBody(),K,L;h={n:[0.5,0,0,-1],e:[1,0.5,1,0],s:[0.5,1,0,1],w:[0,0.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var M='.mce-content-body';b.contentStyles.push(M+' div.mce-resizehandle {'+'position: absolute;'+'border: 1px solid black;'+'background: #FFF;'+'width: 5px;'+'height: 5px;'+'z-index: 10000'+'}'+M+' .mce-resizehandle:hover {'+'background: #000'+'}'+M+' img[data-mce-selected], hr[data-mce-selected] {'+'outline: 1px solid black;'+'resize: none'+'}'+M+' .mce-clonedresizable {'+'position: absolute;'+(a.gecko?'':'outline: 1px dashed black;')+'opacity: .5;'+'filter: alpha(opacity=50);'+'z-index: 10000'+'}'+M+' .mce-resize-helper {'+'background: #555;'+'background: rgba(0,0,0,0.75);'+'border-radius: 3px;'+'border: 1px;'+'color: white;'+'display: none;'+'font-family: sans-serif;'+'font-size: 12px;'+'white-space: nowrap;'+'line-height: 14px;'+'margin: 5px 10px;'+'padding: 5px;'+'position: absolute;'+'z-index: 10001'+'}');function N(e){var c1=b.settings.object_resizing;if(c1===false||a.iOS){return false;}if(typeof c1!='string'){c1='table,img,div';}if(e.getAttribute('data-mce-resize')==='false'){return false;}return b.dom.is(e,c1);}function O(e){var c1,d1,e1;var f1,g1;c1=e.screenX-j;d1=e.screenY-k;w=c1*i[2]+o;v=d1*i[3]+p;w=w<5?5:w;v=v<5?5:v;if(f.nodeName=="IMG"&&b.settings.resize_img_proportional!==false){e1=!V.modifierPressed(e);}else{e1=V.modifierPressed(e)||(f.nodeName=="IMG"&&i[2]*i[3]!==0);}if(e1){if(H(c1)>H(d1)){v=I(w*t);w=I(v/t);}else{w=I(v/t);v=I(w*t);}}d.setStyles(g,{width:w,height:v});f1=i.startPos.x+c1;g1=i.startPos.y+d1;f1=f1>0?f1:0;g1=g1>0?g1:0;d.setStyles(r,{left:f1,top:g1,display:'block'});r.innerHTML=w+' &times; '+v;if(i[2]<0&&g.clientWidth<=w){d.setStyle(g,'left',m+(o-w));}if(i[3]<0&&g.clientHeight<=v){d.setStyle(g,'top',n+(p-v));}c1=J.scrollWidth-K;d1=J.scrollHeight-L;if(c1+d1!==0){d.setStyles(r,{left:f1-c1,top:g1-d1});}if(!u){b.fire('ObjectResizeStart',{target:f,width:o,height:p});u=true;}}function P(){u=false;function e(c1,d1){if(d1){if(f.style[c1]||!b.schema.isValid(f.nodeName.toLowerCase(),c1)){d.setStyle(f,c1,d1);}else{d.setAttrib(f,c1,d1);}}}e('width',w);e('height',v);d.unbind(x,'mousemove',O);d.unbind(x,'mouseup',P);if(y!=x){d.unbind(y,'mousemove',O);d.unbind(y,'mouseup',P);}d.remove(g);d.remove(r);if(!G||f.nodeName=="TABLE"){Q(f);}b.fire('ObjectResized',{target:f,width:w,height:v});d.setAttrib(f,'style',d.getAttrib(f,'style'));b.nodeChanged();}function Q(c1,d1,e1){var f1,g1,h1,e,i1;$();f1=d.getPos(c1,J);m=f1.x;n=f1.y;i1=c1.getBoundingClientRect();g1=i1.width||(i1.right-i1.left);h1=i1.height||(i1.bottom-i1.top);if(f!=c1){Z();f=c1;w=v=0;}e=b.fire('ObjectSelected',{target:c1});if(N(c1)&&!e.isDefaultPrevented()){c(h,function(j1,k1){var l1,m1;function n1(e){j=e.screenX;k=e.screenY;o=f.clientWidth;p=f.clientHeight;t=p/o;i=j1;j1.startPos={x:g1*j1[0]+m,y:h1*j1[1]+n};K=J.scrollWidth;L=J.scrollHeight;g=f.cloneNode(true);d.addClass(g,'mce-clonedresizable');d.setAttrib(g,'data-mce-bogus','all');g.contentEditable=false;g.unSelectabe=true;d.setStyles(g,{left:m,top:n,margin:0});g.removeAttribute('data-mce-selected');J.appendChild(g);d.bind(x,'mousemove',O);d.bind(x,'mouseup',P);if(y!=x){d.bind(y,'mousemove',O);d.bind(y,'mouseup',P);}r=d.add(J,'div',{'class':'mce-resize-helper','data-mce-bogus':'all'},o+' &times; '+p);}if(d1){if(k1==d1){n1(e1);}return;}l1=d.get('mceResizeHandle'+k1);if(!l1){m1=J;l1=d.add(m1,'div',{id:'mceResizeHandle'+k1,'data-mce-bogus':'all','class':'mce-resizehandle',unselectable:true,style:'cursor:'+k1+'-resize; margin:0; padding:0'});if(a.ie){l1.contentEditable=false;}}else{d.show(l1);}if(!j1.elm){d.bind(l1,'mousedown',function(e){e.stopImmediatePropagation();e.preventDefault();n1(e);});j1.elm=l1;}d.setStyles(l1,{left:(g1*j1[0]+m)-(l1.offsetWidth/2),top:(h1*j1[1]+n)-(l1.offsetHeight/2)});});}else{R();}f.setAttribute('data-mce-selected','1');}function R(){var e,c1;$();if(f){f.removeAttribute('data-mce-selected');}for(e in h){c1=d.get('mceResizeHandle'+e);if(c1){d.unbind(c1);d.remove(c1);}}}function S(e){var c1,d1;function e1(f1,g1){if(f1){do{if(f1===g1){return true;}}while((f1=f1.parentNode));}}if(u){return;}c(d.select('img[data-mce-selected],hr[data-mce-selected]'),function(f1){f1.removeAttribute('data-mce-selected');});d1=e.type=='mousedown'?e.target:s.getNode();d1=d.$(d1).closest(G?'table':'table,img,hr')[0];if(e1(d1,J)){_();c1=s.getStart(true);if(e1(c1,d1)&&e1(s.getEnd(true),d1)){if(!G||(d1!=c1&&c1.nodeName!=='IMG')){Q(d1);return;}}}R();}function U(e,c1,d1){if(e&&e.attachEvent){e.attachEvent('on'+c1,d1);}}function W(e,c1,d1){if(e&&e.detachEvent){e.detachEvent('on'+c1,d1);}}function X(e){var c1=e.srcElement,d1,e1,f1,g1,h1,i1,j1;d1=c1.getBoundingClientRect();i1=l.clientX-d1.left;j1=l.clientY-d1.top;for(e1 in h){f1=h[e1];g1=c1.offsetWidth*f1[0];h1=c1.offsetHeight*f1[1];if(H(g1-i1)<8&&H(h1-j1)<8){i=f1;break;}}u=true;b.fire('ObjectResizeStart',{target:f,width:f.clientWidth,height:f.clientHeight});b.getDoc().selection.empty();Q(c1,e1,l);}function Y(e){var c1=e.srcElement;if(c1!=f){b.fire('ObjectSelected',{target:c1});Z();if(c1.id.indexOf('mceResizeHandle')===0){e.returnValue=false;return;}if(c1.nodeName=='IMG'||c1.nodeName=='TABLE'){R();f=c1;U(c1,'resizestart',X);}}}function Z(){W(f,'resizestart',X);}function $(){for(var e in h){var c1=h[e];if(c1.elm){d.unbind(c1.elm);delete c1.elm;}}}function _(){try{b.getDoc().execCommand('enableObjectResizing',false,false);}catch(e){}}function a1(e){var c1;if(!G){return;}c1=x.body.createControlRange();try{c1.addElement(e);c1.select();return true;}catch(ex){}}b.on('init',function(){if(G){b.on('ObjectResized',function(e){if(e.target.nodeName!='TABLE'){R();a1(e.target);}});U(J,'controlselect',Y);b.on('mousedown',function(e){l=e;});}else{_();if(a.ie>=11){b.on('mouseup',function(e){var c1=e.target.nodeName;if(!u&&/^(TABLE|IMG|HR)$/.test(c1)){b.selection.select(e.target,c1=='TABLE');b.nodeChanged();}});b.dom.bind(J,'mscontrolselect',function(e){if(/^(TABLE|IMG|HR)$/.test(e.target.nodeName)){e.preventDefault();if(e.target.tagName=='IMG'){window.setTimeout(function(){b.selection.select(e.target);},0);}}});}}b.on('nodechange ResizeEditor',S);b.on('keydown keyup',function(e){if(f&&f.nodeName=="TABLE"){S(e);}});b.on('hide',R);});b.on('remove',$);function b1(){f=g=null;if(G){Z();W(J,'controlselect',Y);}}return{isResizable:N,showResizeRect:Q,hideResizeRect:R,updateResizeRect:S,controlSelect:a1,destroy:b1};};});
/**
 * BookmarkManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/BookmarkManager",["tinymce/Env","tinymce/util/Tools"],function(a,T){function b(s){var d=s.dom;this.getBookmark=function(t,n){var r,c,e,f,g,h,j='&#xFEFF;',k;function l(g,h){var u=0;T.each(d.select(g),function(v,i){if(v==h){u=i;}});return u;}function m(r){function i(u){var v,w,x,y=u?'start':'end';v=r[y+'Container'];w=r[y+'Offset'];if(v.nodeType==1&&v.nodeName=="TR"){x=v.childNodes;v=x[Math.min(u?w:w-1,x.length-1)];if(v){w=u?0:v.childNodes.length;r['set'+(u?'Start':'End')](v,w);}}}i(true);i();return r;}function o(){var r=s.getRng(true),i=d.getRoot(),u={};function v(r,w){var x=r[w?'startContainer':'endContainer'],y=r[w?'startOffset':'endOffset'],G=[],H,I,J=0;if(x.nodeType==3){if(n){for(H=x.previousSibling;H&&H.nodeType==3;H=H.previousSibling){y+=H.nodeValue.length;}}G.push(y);}else{I=x.childNodes;if(y>=I.length&&I.length){J=1;y=Math.max(0,I.length-1);}G.push(d.nodeIndex(I[y],n)+J);}for(;x&&x!=i;x=x.parentNode){G.push(d.nodeIndex(x,n));}return G;}u.start=v(r,true);if(!s.isCollapsed()){u.end=v(r);}return u;}if(t==2){h=s.getNode();g=h?h.nodeName:null;if(g=='IMG'){return{name:g,index:l(g,h)};}if(s.tridentSel){return s.tridentSel.getBookmark(t);}return o();}if(t){return{rng:s.getRng()};}r=s.getRng();e=d.uniqueId();f=s.isCollapsed();k='overflow:hidden;line-height:0px';if(r.duplicate||r.item){if(!r.item){c=r.duplicate();try{r.collapse();r.pasteHTML('<span data-mce-type="bookmark" id="'+e+'_start" style="'+k+'">'+j+'</span>');if(!f){c.collapse(false);r.moveToElementText(c.parentElement());if(r.compareEndPoints('StartToEnd',c)===0){c.move('character',-1);}c.pasteHTML('<span data-mce-type="bookmark" id="'+e+'_end" style="'+k+'">'+j+'</span>');}}catch(p){return null;}}else{h=r.item(0);g=h.nodeName;return{name:g,index:l(g,h)};}}else{h=s.getNode();g=h.nodeName;if(g=='IMG'){return{name:g,index:l(g,h)};}c=m(r.cloneRange());if(!f){c.collapse(false);c.insertNode(d.create('span',{'data-mce-type':"bookmark",id:e+'_end',style:k},j));}r=m(r);r.collapse(true);r.insertNode(d.create('span',{'data-mce-type':"bookmark",id:e+'_start',style:k},j));}s.moveToBookmark({id:e,keep:1});return{id:e};};this.moveToBookmark=function(c){var r,e,f,g,h,j;function k(n){var p=c[n?'start':'end'],i,o,t,u;if(p){t=p[0];for(o=e,i=p.length-1;i>=1;i--){u=o.childNodes;if(p[i]>u.length-1){return;}o=u[p[i]];}if(o.nodeType===3){t=Math.min(p[0],o.nodeValue.length);}if(o.nodeType===1){t=Math.min(p[0],o.childNodes.length);}if(n){r.setStart(o,t);}else{r.setEnd(o,t);}}return true;}function l(i){var n=d.get(c.id+'_'+i),o,p,t,u,v=c.keep;if(n){o=n.parentNode;if(i=='start'){if(!v){p=d.nodeIndex(n);}else{o=n.firstChild;p=1;}f=g=o;h=j=p;}else{if(!v){p=d.nodeIndex(n);}else{o=n.firstChild;p=1;}g=o;j=p;}if(!v){u=n.previousSibling;t=n.nextSibling;T.each(T.grep(n.childNodes),function(o){if(o.nodeType==3){o.nodeValue=o.nodeValue.replace(/\uFEFF/g,'');}});while((n=d.get(c.id+'_'+i))){d.remove(n,1);}if(u&&t&&u.nodeType==t.nodeType&&u.nodeType==3&&!a.opera){p=u.nodeValue.length;u.appendData(t.nodeValue);d.remove(t);if(i=='start'){f=g=u;h=j=p;}else{g=u;j=p;}}}}}function m(n){if(d.isBlock(n)&&!n.innerHTML&&!a.ie){n.innerHTML='<br data-mce-bogus="1" />';}return n;}if(c){if(c.start){r=d.createRng();e=d.getRoot();if(s.tridentSel){return s.tridentSel.moveToBookmark(c);}if(k(true)&&k()){s.setRng(r);}}else if(c.id){l('start');l('end');if(f){r=d.createRng();r.setStart(m(f),h);r.setEnd(m(g),j);s.setRng(r);}}else if(c.name){s.select(d.select(c.name)[c.index]);}else if(c.rng){s.setRng(c.rng);}}};}b.isBookmarkNode=function(n){return n&&n.tagName==='SPAN'&&n.getAttribute('data-mce-type')==='bookmark';};return b;});
/**
 * Selection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/Selection",["tinymce/dom/TreeWalker","tinymce/dom/TridentSelection","tinymce/dom/ControlSelection","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/Env","tinymce/util/Tools"],function(T,a,b,R,c,d,f){var g=f.each,t=f.trim;var i=d.ie;function S(e,w,s,h){var j=this;j.dom=e;j.win=w;j.serializer=s;j.editor=h;j.bookmarkManager=new c(j);j.controlSelection=new b(j,h);if(!j.win.getSelection){j.tridentSel=new a(j);}}S.prototype={setCursorLocation:function(n,o){var s=this,r=s.dom.createRng();if(!n){s._moveEndPoint(r,s.editor.getBody(),true);s.setRng(r);}else{r.setStart(n,o);r.setEnd(n,o);s.setRng(r);s.collapse(false);}},getContent:function(e){var s=this,r=s.getRng(),h=s.dom.create("body");var j=s.getSel(),w,k,l;e=e||{};w=k='';e.get=true;e.format=e.format||'html';e.selection=true;s.editor.fire('BeforeGetContent',e);if(e.format=='text'){return s.isCollapsed()?'':(r.text||(j.toString?j.toString():''));}if(r.cloneContents){l=r.cloneContents();if(l){h.appendChild(l);}}else if(r.item!==z||r.htmlText!==z){h.innerHTML='<br>'+(r.item?r.item(0).outerHTML:r.htmlText);h.removeChild(h.firstChild);}else{h.innerHTML=r.toString();}if(/^\s/.test(h.innerHTML)){w=' ';}if(/\s+$/.test(h.innerHTML)){k=' ';}e.getInner=true;e.content=s.isCollapsed()?'':w+s.serializer.serialize(h,e)+k;s.editor.fire('GetContent',e);return e.content;},setContent:function(e,h){var s=this,r=s.getRng(),j,k=s.win.document,l,m;h=h||{format:'html'};h.set=true;h.selection=true;e=h.content=e;if(!h.no_events){s.editor.fire('BeforeSetContent',h);}e=h.content;if(r.insertNode){e+='<span id="__caret">_</span>';if(r.startContainer==k&&r.endContainer==k){k.body.innerHTML=e;}else{r.deleteContents();if(k.body.childNodes.length===0){k.body.innerHTML=e;}else{if(r.createContextualFragment){r.insertNode(r.createContextualFragment(e));}else{l=k.createDocumentFragment();m=k.createElement('div');l.appendChild(m);m.outerHTML=e;r.insertNode(l);}}}j=s.dom.get('__caret');r=k.createRange();r.setStartBefore(j);r.setEndBefore(j);s.setRng(r);s.dom.remove('__caret');try{s.setRng(r);}catch(n){}}else{if(r.item){k.execCommand('Delete',false,null);r=s.getRng();}if(/^\s+/.test(e)){r.pasteHTML('<span id="__mce_tmp">_</span>'+e);s.dom.remove('__mce_tmp');}else{r.pasteHTML(e);}}if(!h.no_events){s.editor.fire('SetContent',h);}},getStart:function(r){var s=this,e=s.getRng(),h,p,j,n;if(e.duplicate||e.item){if(e.item){return e.item(0);}j=e.duplicate();j.collapse(1);h=j.parentElement();if(h.ownerDocument!==s.dom.doc){h=s.dom.getRoot();}p=n=e.parentElement();while((n=n.parentNode)){if(n==h){h=p;break;}}return h;}else{h=e.startContainer;if(h.nodeType==1&&h.hasChildNodes()){if(!r||!e.collapsed){h=h.childNodes[Math.min(h.childNodes.length-1,e.startOffset)];}}if(h&&h.nodeType==3){return h.parentNode;}return h;}},getEnd:function(r){var s=this,e=s.getRng(),h,j;if(e.duplicate||e.item){if(e.item){return e.item(0);}e=e.duplicate();e.collapse(0);h=e.parentElement();if(h.ownerDocument!==s.dom.doc){h=s.dom.getRoot();}if(h&&h.nodeName=='BODY'){return h.lastChild||h;}return h;}else{h=e.endContainer;j=e.endOffset;if(h.nodeType==1&&h.hasChildNodes()){if(!r||!e.collapsed){h=h.childNodes[j>0?j-1:j];}}if(h&&h.nodeType==3){return h.parentNode;}return h;}},getBookmark:function(e,n){return this.bookmarkManager.getBookmark(e,n);},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e);},select:function(n,e){var s=this,h=s.dom,r=h.createRng(),j;s.lastFocusBookmark=null;if(n){if(!e&&s.controlSelection.controlSelect(n)){return;}j=h.nodeIndex(n);r.setStart(n.parentNode,j);r.setEnd(n.parentNode,j+1);if(e){s._moveEndPoint(r,n,true);s._moveEndPoint(r,n);}s.setRng(r);}return n;},isCollapsed:function(){var s=this,r=s.getRng(),e=s.getSel();if(!r||r.item){return false;}if(r.compareEndPoints){return r.compareEndPoints('StartToEnd',r)===0;}return!e||r.collapsed;},collapse:function(e){var s=this,r=s.getRng(),n;if(r.item){n=r.item(0);r=s.win.document.body.createTextRange();r.moveToElementText(n);}r.collapse(!!e);s.setRng(r);},getSel:function(){var w=this.win;return w.getSelection?w.getSelection():w.document.selection;},getRng:function(w){var s=this,e,r,h,j=s.win.document,k;function l(o,p,u){try{return p.compareBoundaryPoints(o,u);}catch(n){return-1;}}if(!w&&s.lastFocusBookmark){var m=s.lastFocusBookmark;if(m.startContainer){r=j.createRange();r.setStart(m.startContainer,m.startOffset);r.setEnd(m.endContainer,m.endOffset);}else{r=m;}return r;}if(w&&s.tridentSel){return s.tridentSel.getRangeAt(0);}try{if((e=s.getSel())){if(e.rangeCount>0){r=e.getRangeAt(0);}else{r=e.createRange?e.createRange():j.createRange();}}}catch(n){}if(i&&r&&r.setStart&&j.selection){try{k=j.selection.createRange();}catch(n){}if(k&&k.item){h=k.item(0);r=j.createRange();r.setStartBefore(h);r.setEndAfter(h);}}if(!r){r=j.createRange?j.createRange():j.body.createTextRange();}if(r.setStart&&r.startContainer.nodeType===9&&r.collapsed){h=s.dom.getRoot();r.setStart(h,0);r.setEnd(h,0);}if(s.selectedRange&&s.explicitRange){if(l(r.START_TO_START,r,s.selectedRange)===0&&l(r.END_TO_END,r,s.selectedRange)===0){r=s.explicitRange;}else{s.selectedRange=null;s.explicitRange=null;}}return r;},setRng:function(r,e){var s=this,h;if(!r){return;}if(r.select){try{r.select();}catch(j){}return;}if(!s.tridentSel){h=s.getSel();if(h){s.explicitRange=r;try{h.removeAllRanges();h.addRange(r);}catch(j){}if(e===false&&h.extend){h.collapse(r.endContainer,r.endOffset);h.extend(r.startContainer,r.startOffset);}s.selectedRange=h.rangeCount>0?h.getRangeAt(0):null;}}else{if(r.cloneRange){try{s.tridentSel.addRange(r);return;}catch(j){}}}},setNode:function(e){var s=this;s.setContent(s.dom.getOuterHTML(e));return e;},getNode:function(){var s=this,r=s.getRng(),e;var h=r.startContainer,j=r.endContainer;var k=r.startOffset,l=r.endOffset,m=s.dom.getRoot();function n(o,p){var u=o;while(o&&o.nodeType===3&&o.length===0){o=p?o.nextSibling:o.previousSibling;}return o||u;}if(!r){return m;}if(r.setStart){e=r.commonAncestorContainer;if(!r.collapsed){if(h==j){if(l-k<2){if(h.hasChildNodes()){e=h.childNodes[k];}}}if(h.nodeType===3&&j.nodeType===3){if(h.length===k){h=n(h.nextSibling,true);}else{h=h.parentNode;}if(l===0){j=n(j.previousSibling,false);}else{j=j.parentNode;}if(h&&h===j){return h;}}}if(e&&e.nodeType==3){return e.parentNode;}return e;}e=r.item?r.item(0):r.parentElement();if(e.ownerDocument!==s.win.document){e=m;}return e;},getSelectedBlocks:function(s,e){var h=this,j=h.dom,n,r,k=[];r=j.getRoot();s=j.getParent(s||h.getStart(),j.isBlock);e=j.getParent(e||h.getEnd(),j.isBlock);if(s&&s!=r){k.push(s);}if(s&&e&&s!=e){n=s;var w=new T(s,r);while((n=w.next())&&n!=e){if(j.isBlock(n)){k.push(n);}}}if(e&&s!=e&&e!=r){k.push(e);}return k;},isForward:function(){var e=this.dom,s=this.getSel(),h,j;if(!s||!s.anchorNode||!s.focusNode){return true;}h=e.createRng();h.setStart(s.anchorNode,s.anchorOffset);h.collapse(true);j=e.createRng();j.setStart(s.focusNode,s.focusOffset);j.collapse(true);return h.compareBoundaryPoints(h.START_TO_START,j)<=0;},normalize:function(){var s=this,r=s.getRng();if(!i&&new R(s.dom).normalize(r)){s.setRng(r,s.isForward());}return r;},selectorChanged:function(s,h){var j=this,k;if(!j.selectorChangedData){j.selectorChangedData={};k={};j.editor.on('NodeChange',function(e){var n=e.element,l=j.dom,p=l.getParents(n,null,l.getRoot()),m={};g(j.selectorChangedData,function(o,s){g(p,function(n){if(l.is(n,s)){if(!k[s]){g(o,function(h){h(true,{node:n,selector:s,parents:p});});k[s]=o;}m[s]=o;return false;}});});g(k,function(o,s){if(!m[s]){delete k[s];g(o,function(h){h(false,{node:n,selector:s,parents:p});});}});});}if(!j.selectorChangedData[s]){j.selectorChangedData[s]=[];}j.selectorChangedData[s].push(h);return j;},getScrollContainer:function(){var s,n=this.dom.getRoot();while(n&&n.nodeName!='BODY'){if(n.scrollHeight>n.clientHeight){s=n;break;}n=n.parentNode;}return s;},scrollIntoView:function(e){var y,v,s=this,h=s.dom,r=h.getRoot(),j,k;function l(e){var x=0,y=0;var o=e;while(o&&o.nodeType){x+=o.offsetLeft||0;y+=o.offsetTop||0;o=o.offsetParent;}return{x:x,y:y};}if(r.nodeName!='BODY'){var m=s.getScrollContainer();if(m){y=l(e).y-l(m).y;k=m.clientHeight;j=m.scrollTop;if(y<j||y+25>j+k){m.scrollTop=y<j?y:y-k+25;}return;}}v=h.getViewPort(s.editor.getWin());y=h.getPos(e).y;j=v.y;k=v.h;if(y<v.y||y+25>j+k){s.editor.getWin().scrollTo(0,y<j?y:y-k+25);}},placeCaretAt:function(e,h){var j=this.editor.getDoc(),r,p;if(j.caretPositionFromPoint){p=j.caretPositionFromPoint(e,h);r=j.createRange();r.setStart(p.offsetNode,p.offset);r.collapse(true);}else if(j.caretRangeFromPoint){r=j.caretRangeFromPoint(e,h);}else if(j.body.createTextRange){r=j.body.createTextRange();try{r.moveToPoint(e,h);r.collapse(true);}catch(k){r.collapse(h<j.body.clientHeight);}}this.setRng(r);},_moveEndPoint:function(r,n,s){var e=n,w=new T(n,e);var h=this.dom.schema.getNonEmptyElements();do{if(n.nodeType==3&&t(n.nodeValue).length!==0){if(s){r.setStart(n,0);}else{r.setEnd(n,n.nodeValue.length);}return;}if(h[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName)){if(s){r.setStartBefore(n);}else{if(n.nodeName=='BR'){r.setEndBefore(n);}else{r.setEndAfter(n);}}return;}if(d.ie&&d.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n)){if(s){r.setStart(n,0);}else{r.setEnd(n,0);}return;}}while((n=(s?w.next():w.prev())));if(e.nodeName=='BODY'){if(s){r.setStart(e,0);}else{r.setEnd(e,e.childNodes.length);}}},destroy:function(){this.win=null;this.controlSelection.destroy();}};return S;});
/**
 * ElementUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/dom/ElementUtils",["tinymce/dom/BookmarkManager","tinymce/util/Tools"],function(a,T){var e=T.each;function b(d){this.compare=function(n,c){if(n.nodeName!=c.nodeName){return false;}function g(h){var i={};e(d.getAttribs(h),function(j){var k=j.nodeName.toLowerCase();if(k.indexOf('_')!==0&&k!=='style'&&k!=='data-mce-style'){i[k]=d.getAttrib(h,k);}});return i;}function f(o,h){var v,i;for(i in o){if(o.hasOwnProperty(i)){v=h[i];if(typeof v=="undefined"){return false;}if(o[i]!=v){return false;}delete h[i];}}for(i in h){if(h.hasOwnProperty(i)){return false;}}return true;}if(!f(g(n),g(c))){return false;}if(!f(d.parseStyle(d.getAttrib(n,'style')),d.parseStyle(d.getAttrib(c,'style')))){return false;}return!a.isBookmarkNode(n)&&!a.isBookmarkNode(c);};}return b;});
/**
 * Preview.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/fmt/Preview",["tinymce/util/Tools"],function(T){var e=T.each;function g(a,f){var n,p,d=a.dom;var b='',c,h;h=a.settings.preview_styles;if(h===false){return'';}if(!h){h='font-family font-size font-weight font-style text-decoration '+'text-transform color background-color border border-radius outline text-shadow';}function r(v){return v.replace(/%(\w+)/g,'');}if(typeof(f)=="string"){f=a.formatter.get(f);if(!f){return;}f=f[0];}n=f.block||f.inline||'span';p=d.create(n);e(f.styles,function(v,n){v=r(v);if(v){d.setStyle(p,n,v);}});e(f.attributes,function(v,n){v=r(v);if(v){d.setAttrib(p,n,v);}});e(f.classes,function(v){v=r(v);if(!d.hasClass(p,v)){d.addClass(p,v);}});a.fire('PreviewFormats');d.setStyles(p,{position:'absolute',left:-0xFFFF});a.getBody().appendChild(p);c=d.getStyle(a.getBody(),'fontSize',true);c=/px$/.test(c)?parseInt(c,10):0;e(h.split(' '),function(n){var v=d.getStyle(p,n,true);if(n=='background-color'&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(v)){v=d.getStyle(a.getBody(),n,true);if(d.toHex(v).toLowerCase()=='#ffffff'){return;}}if(n=='color'){if(d.toHex(v).toLowerCase()=='#000000'){return;}}if(n=='font-size'){if(/em|%$/.test(v)){if(c===0){return;}v=parseFloat(v,10)/(/%$/.test(v)?100:1);v=(v*c)+'px';}}if(n=="border"&&v){b+='padding:0 2px;';}b+=n+':'+v+';';});a.fire('AfterPreviewFormats');d.remove(p);return b;}return{getCssText:g};});
/**
 * Formatter.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/Formatter",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/dom/ElementUtils","tinymce/util/Tools","tinymce/fmt/Preview"],function(T,R,a,b,c,P){return function(d){var f={},g=d.dom,s=d.selection,r=new R(g),h=d.schema.isValidChild,j=g.isBlock,k=d.settings.forced_root_block,m=g.nodeIndex,I='\uFEFF',M=/^(src|href|style)$/,o=false,p=true,t,u,v=g.getContentEditable,w,G,H=a.isBookmarkNode;var J=c.each,K=c.grep,L=c.walk,N=c.extend;function O(n){if(n.nodeType){n=n.nodeName;}return!!d.schema.getTextBlockElements()[n.toLowerCase()];}function Q(n,e){return g.getParents(n,e,g.getRoot());}function S(n){return n.nodeType===1&&n.id==='_mce_caret';}function U(){X({valigntop:[{selector:'td,th',styles:{'verticalAlign':'top'}}],valignmiddle:[{selector:'td,th',styles:{'verticalAlign':'middle'}}],valignbottom:[{selector:'td,th',styles:{'verticalAlign':'bottom'}}],alignleft:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',styles:{textAlign:'left'},defaultBlock:'div'},{selector:'img,table',collapsed:false,styles:{'float':'left'}}],aligncenter:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',styles:{textAlign:'center'},defaultBlock:'div'},{selector:'img',collapsed:false,styles:{display:'block',marginLeft:'auto',marginRight:'auto'}},{selector:'table',collapsed:false,styles:{marginLeft:'auto',marginRight:'auto'}}],alignright:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',styles:{textAlign:'right'},defaultBlock:'div'},{selector:'img,table',collapsed:false,styles:{'float':'right'}}],alignjustify:[{selector:'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',styles:{textAlign:'justify'},defaultBlock:'div'}],bold:[{inline:'strong',remove:'all'},{inline:'span',styles:{fontWeight:'bold'}},{inline:'b',remove:'all'}],italic:[{inline:'em',remove:'all'},{inline:'span',styles:{fontStyle:'italic'}},{inline:'i',remove:'all'}],underline:[{inline:'span',styles:{textDecoration:'underline'},exact:true},{inline:'u',remove:'all'}],strikethrough:[{inline:'span',styles:{textDecoration:'line-through'},exact:true},{inline:'strike',remove:'all'}],forecolor:{inline:'span',styles:{color:'%value'},links:true,remove_similar:true},hilitecolor:{inline:'span',styles:{backgroundColor:'%value'},links:true,remove_similar:true},fontname:{inline:'span',styles:{fontFamily:'%value'}},fontsize:{inline:'span',styles:{fontSize:'%value'}},fontsize_class:{inline:'span',attributes:{'class':'%value'}},blockquote:{block:'blockquote',wrapper:1,remove:'all'},subscript:{inline:'sub'},superscript:{inline:'sup'},code:{inline:'code'},link:{inline:'a',selector:'a',remove:'all',split:true,deep:true,onmatch:function(){return true;},onformat:function(e,i,l){J(l,function(n,x){g.setAttrib(e,x,n);});}},removeformat:[{selector:'b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q',remove:'all',split:true,expand:false,block_expand:true,deep:true},{selector:'span',attributes:['style','class'],remove:'empty',split:true,expand:false,deep:true},{selector:'*',attributes:['style','class'],split:false,expand:false,deep:true}]});J('p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp'.split(/\s/),function(n){X(n,{block:n,remove:'all'});});X(d.settings.formats);}function V(){d.addShortcut('ctrl+b','bold_desc','Bold');d.addShortcut('ctrl+i','italic_desc','Italic');d.addShortcut('ctrl+u','underline_desc','Underline');for(var i=1;i<=6;i++){d.addShortcut('ctrl+'+i,'',['FormatBlock',false,'h'+i]);}d.addShortcut('ctrl+7','',['FormatBlock',false,'p']);d.addShortcut('ctrl+8','',['FormatBlock',false,'div']);d.addShortcut('ctrl+9','',['FormatBlock',false,'address']);}function W(n){return n?f[n]:f;}function X(n,e){if(n){if(typeof(n)!=='string'){J(n,function(e,n){X(n,e);});}else{e=e.length?e:[e];J(e,function(e){if(e.deep===u){e.deep=!e.selector;}if(e.split===u){e.split=!e.selector||e.inline;}if(e.remove===u&&e.selector&&!e.inline){e.remove='none';}if(e.selector&&e.inline){e.mixed=true;e.block_expand=true;}if(typeof(e.classes)==='string'){e.classes=e.classes.split(/\s+/);}});f[n]=e;}}}function Y(n){if(n&&f[n]){delete f[n];}return f;}function Z(e){var i;d.dom.getParent(e,function(n){i=d.dom.getStyle(n,'text-decoration');return i&&i!=='none';});return i;}function $(n){var e;if(n.nodeType===1&&n.parentNode&&n.parentNode.nodeType===1){e=Z(n.parentNode);if(d.dom.getStyle(n,'color')&&e){d.dom.setStyle(n,'text-decoration',e);}else if(d.dom.getStyle(n,'textdecoration')===e){d.dom.setStyle(n,'text-decoration',null);}}}function _(n,e,i){var l=W(n),x=l[0],y,y1,z1=!i&&s.isCollapsed();function A1(E1,F1){F1=F1||x;if(E1){if(F1.onformat){F1.onformat(E1,F1,e,i);}J(F1.styles,function(H1,n){g.setStyle(E1,n,m1(H1,e));});if(F1.styles){var G1=g.getAttrib(E1,'style');if(G1){E1.setAttribute('data-mce-style',G1);}}J(F1.attributes,function(H1,n){g.setAttrib(E1,n,m1(H1,e));});J(F1.classes,function(H1){H1=m1(H1,e);if(!g.hasClass(E1,H1)){g.addClass(E1,H1);}});}}function B1(){function E1(F1,G1){var J1=new T(G1);for(i=J1.current();i;i=J1.prev()){if(i.childNodes.length>1||i==F1||i.tagName=='BR'){return i;}}}var y1=d.selection.getRng();var F1=y1.startContainer;var G1=y1.endContainer;if(F1!=G1&&y1.endOffset===0){var H1=E1(F1,G1);var I1=H1.nodeType==3?H1.length:H1.childNodes.length;y1.setEnd(H1,I1);}return y1;}function C1(y1,y,E1){var F1=[],G1,H1,I1=true;G1=x.inline||x.block;H1=g.create(G1);A1(H1);r.walk(y1,function(J1){var K1;function L1(i){var M1,N1,O1,P1,Q1;Q1=I1;M1=i.nodeName.toLowerCase();N1=i.parentNode.nodeName.toLowerCase();if(i.nodeType===1&&v(i)){Q1=I1;I1=v(i)==="true";P1=true;}if(j1(M1,'br')){K1=0;if(x.block){g.remove(i);}return;}if(x.wrapper&&c1(i,n,e)){K1=0;return;}if(I1&&!P1&&x.block&&!x.wrapper&&O(M1)&&h(N1,G1)){i=g.rename(i,G1);A1(i);F1.push(i);K1=0;return;}if(x.selector){J(l,function(x){if('collapsed'in x&&x.collapsed!==z1){return;}if(g.is(i,x.selector)&&!S(i)){A1(i,x);O1=true;}});if(!x.inline||O1){K1=0;return;}}if(I1&&!P1&&h(G1,M1)&&h(N1,G1)&&!(!E1&&i.nodeType===3&&i.nodeValue.length===1&&i.nodeValue.charCodeAt(0)===65279)&&!S(i)&&(!x.inline||!j(i))){if(!K1){K1=g.clone(H1,o);i.parentNode.insertBefore(K1,i);F1.push(K1);}K1.appendChild(i);}else{K1=0;J(K(i.childNodes),L1);if(P1){I1=Q1;}K1=0;}}J(J1,L1);});if(x.links===true){J(F1,function(i){function J1(i){if(i.nodeName==='A'){A1(i,x);}J(K(i.childNodes),J1);}J1(i);});}J(F1,function(i){var J1;function K1(i){var M1=0;J(i.childNodes,function(i){if(!n1(i)&&!H(i)){M1++;}});return M1;}function L1(i){var M1,N1;J(i.childNodes,function(i){if(i.nodeType==1&&!H(i)&&!S(i)){M1=i;return o;}});if(M1&&!H(M1)&&i1(M1,x)){N1=g.clone(M1,o);A1(N1);g.replace(N1,i,p);g.remove(M1,1);}return N1||i;}J1=K1(i);if((F1.length>1||!j(i))&&J1===0){g.remove(i,1);return;}if(x.inline||x.wrapper){if(!x.exact&&J1===1){i=L1(i);}J(l,function(x){J(g.select(x.inline,i),function(M1){if(H(M1)){return;}r1(x,e,M1,x.exact?M1:null);});});if(c1(i.parentNode,n,e)){g.remove(i,1);i=0;return p;}if(x.merge_with_parents){g.getParent(i.parentNode,function(M1){if(c1(M1,n,e)){g.remove(i,1);i=0;return p;}});}if(i&&x.merge_siblings!==false){i=u1(t1(i),i);i=u1(i,t1(i,p));}}});}if(x){if(i){if(i.nodeType){y1=g.createRng();y1.setStartBefore(i);y1.setEndAfter(i);C1(p1(y1,l),null,true);}else{C1(i,null,true);}}else{if(!z1||!x.inline||g.select('td.mce-item-selected,th.mce-item-selected').length){var D1=d.selection.getNode();if(!k&&l[0].defaultBlock&&!g.getParent(D1,g.isBlock)){_(l[0].defaultBlock);}d.selection.setRng(B1());y=s.getBookmark();C1(p1(s.getRng(p),l),y);if(x.styles&&(x.styles.color||x.styles.textDecoration)){L(D1,$,'childNodes');$(D1);}s.moveToBookmark(y);x1(s.getRng(p));d.nodeChanged();}else{w1('apply',n,e);}}}}function a1(n,e,x,y){var y1=W(n),z1=y1[0],A1,B1,C1=true;function D1(x){var J1,i,l,K1,L1;if(x.nodeType===1&&v(x)){K1=C1;C1=v(x)==="true";L1=true;}J1=K(x.childNodes);if(C1&&!L1){for(i=0,l=y1.length;i<l;i++){if(r1(y1[i],e,x,x)){break;}}}if(z1.deep){if(J1.length){for(i=0,l=J1.length;i<l;i++){D1(J1[i]);}if(L1){C1=K1;}}}}function E1(i){var l;J(Q(i.parentNode).reverse(),function(J1){var z1;if(!l&&J1.id!='_start'&&J1.id!='_end'){z1=c1(J1,n,e,y);if(z1&&z1.split!==false){l=J1;}}});return l;}function F1(l,J1,K1,L1){var M1,N1,O1,P1,i,Q1;if(l){Q1=l.parentNode;for(M1=J1.parentNode;M1&&M1!=Q1;M1=M1.parentNode){N1=g.clone(M1,o);for(i=0;i<y1.length;i++){if(r1(y1[i],e,N1,N1)){N1=0;break;}}if(N1){if(O1){N1.appendChild(O1);}if(!P1){P1=N1;}O1=N1;}}if(L1&&(!z1.mixed||!j(l))){J1=g.split(l,J1);}if(O1){K1.parentNode.insertBefore(O1,K1);P1.appendChild(K1);}}return J1;}function G1(i){return F1(E1(i),i,i,true);}function H1(i){var x=g.get(i?'_start':'_end'),l=x[i?'firstChild':'lastChild'];if(H(l)){l=l[i?'firstChild':'lastChild'];}g.remove(x,true);return l;}function I1(B1){var i,l;var J1=B1.commonAncestorContainer;B1=p1(B1,y1,p);if(z1.split){i=v1(B1,p);l=v1(B1);if(i!=l){if(/^(TR|TH|TD)$/.test(i.nodeName)&&i.firstChild){if(i.nodeName=="TR"){i=i.firstChild.firstChild||i;}else{i=i.firstChild||i;}}if(J1&&/^T(HEAD|BODY|FOOT|R)$/.test(J1.nodeName)&&/^(TH|TD)$/.test(l.nodeName)&&l.firstChild){l=l.firstChild||l;}i=o1(i,'span',{id:'_start','data-mce-type':'bookmark'});l=o1(l,'span',{id:'_end','data-mce-type':'bookmark'});G1(i);G1(l);i=H1(p);l=H1();}else{i=l=G1(i);}B1.startContainer=i.parentNode;B1.startOffset=m(i);B1.endContainer=l.parentNode;B1.endOffset=m(l)+1;}r.walk(B1,function(K1){J(K1,function(x){D1(x);if(x.nodeType===1&&d.dom.getStyle(x,'text-decoration')==='underline'&&x.parentNode&&Z(x.parentNode)==='underline'){r1({'deep':false,'exact':true,'inline':'span','styles':{'textDecoration':'underline'}},null,x);}});});}if(x){if(x.nodeType){B1=g.createRng();B1.setStartBefore(x);B1.setEndAfter(x);I1(B1);}else{I1(x);}return;}if(!s.isCollapsed()||!z1.inline||g.select('td.mce-item-selected,th.mce-item-selected').length){A1=s.getBookmark();I1(s.getRng(p));s.moveToBookmark(A1);if(z1.inline&&d1(n,e,s.getStart())){x1(s.getRng(true));}d.nodeChanged();}else{w1('remove',n,e,y);}}function b1(n,e,i){var l=W(n);if(d1(n,e,i)&&(!('toggle'in l[0])||l[0].toggle)){a1(n,e,i);}else{_(n,e,i);}}function c1(n,e,l,x){var y=W(e),y1,i,z1;function A1(n,y1,B1){var C1,D1,E1=y1[B1],i;if(y1.onmatch){return y1.onmatch(n,y1,B1);}if(E1){if(E1.length===u){for(C1 in E1){if(E1.hasOwnProperty(C1)){if(B1==='attributes'){D1=g.getAttrib(n,C1);}else{D1=k1(n,C1);}if(x&&!D1&&!y1.exact){return;}if((!x||y1.exact)&&!j1(D1,l1(m1(E1[C1],l),C1))){return;}}}}else{for(i=0;i<E1.length;i++){if(B1==='attributes'?g.getAttrib(n,E1[i]):k1(n,E1[i])){return y1;}}}}return y1;}if(y&&n){for(i=0;i<y.length;i++){y1=y[i];if(i1(n,y1)&&A1(n,y1,'attributes')&&A1(n,y1,'styles')){if((z1=y1.classes)){for(i=0;i<z1.length;i++){if(!g.hasClass(n,z1[i])){return;}}}return y1;}}}}function d1(n,e,i){var l;function x(i){var y=g.getRoot();if(i===y){return false;}i=g.getParent(i,function(i){return i.parentNode===y||!!c1(i,n,e,true);});return c1(i,n,e);}if(i){return x(i);}i=s.getNode();if(x(i)){return p;}l=s.getStart();if(l!=i){if(x(l)){return p;}}return o;}function e1(n,e){var l,x=[],y={};l=s.getStart();g.getParent(l,function(y1){var i,z1;for(i=0;i<n.length;i++){z1=n[i];if(!y[z1]&&c1(y1,z1,e)){y[z1]=true;x.push(z1);}}},g.getRoot());return x;}function f1(n){var e=W(n),l,y,i,x,y1;if(e){l=s.getStart();y=Q(l);for(x=e.length-1;x>=0;x--){y1=e[x].selector;if(!y1||e[x].defaultBlock){return p;}for(i=y.length-1;i>=0;i--){if(g.is(y[i],y1)){return p;}}}}return o;}function g1(f,i,l){var n;if(!t){t={};n={};d.on('NodeChange',function(e){var x=Q(e.element),y={};x=c.grep(x,function(y1){return y1.nodeType==1&&!y1.getAttribute('data-mce-bogus');});J(t,function(y1,z1){J(x,function(A1){if(c1(A1,z1,{},y1.similar)){if(!n[z1]){J(y1,function(i){i(true,{node:A1,format:z1,parents:x});});n[z1]=y1;}y[z1]=y1;return false;}});});J(n,function(y1,z1){if(!y[z1]){delete n[z1];J(y1,function(i){i(false,{node:e.element,format:z1,parents:x});});}});});}J(f.split(','),function(e){if(!t[e]){t[e]=[];t[e].similar=l;}t[e].push(i);});return this;}function h1(e){return P.getCssText(d,e);}N(this,{get:W,register:X,unregister:Y,apply:_,remove:a1,toggle:b1,match:d1,matchAll:e1,matchNode:c1,canApply:f1,formatChanged:g1,getCssText:h1});U();V();d.on('BeforeGetContent',function(e){if(G&&e.format!='raw'){G();}});d.on('mouseup keydown',function(e){if(w){w(e);}});function i1(n,e){if(j1(n,e.inline)){return p;}if(j1(n,e.block)){return p;}if(e.selector){return n.nodeType==1&&g.is(n,e.selector);}}function j1(e,i){e=e||'';i=i||'';e=''+(e.nodeName||e);i=''+(i.nodeName||i);return e.toLowerCase()==i.toLowerCase();}function k1(n,e){return l1(g.getStyle(n,e),e);}function l1(e,n){if(n=='color'||n=='backgroundColor'){e=g.toHex(e);}if(n=='fontWeight'&&e==700){e='bold';}if(n=='fontFamily'){e=e.replace(/[\'\"]/g,'').replace(/,\s+/g,',');}return''+e;}function m1(e,i){if(typeof(e)!="string"){e=e(i);}else if(i){e=e.replace(/%(\w+)/g,function(l,n){return i[n]||l;});}return e;}function n1(n){return n&&n.nodeType===3&&/^([\t \r\n]+|)$/.test(n.nodeValue);}function o1(n,e,i){var l=g.create(e,i);n.parentNode.insertBefore(l,n);l.appendChild(n);return l;}function p1(e,l,a1){var n,x,y1,z1=e.startContainer,A1=e.startOffset,B1=e.endContainer,C1=e.endOffset;function D1(i){var y,J1,K1,L1,M1;y=J1=i?z1:B1;L1=i?'previousSibling':'nextSibling';M1=g.getRoot();function N1(O1){return O1.nodeName=="BR"&&O1.getAttribute('data-mce-bogus')&&!O1.nextSibling;}if(y.nodeType==3&&!n1(y)){if(i?A1>0:C1<y.nodeValue.length){return y;}}while(true){if(!l[0].block_expand&&j(J1)){return J1;}for(K1=J1[L1];K1;K1=K1[L1]){if(!H(K1)&&!n1(K1)&&!N1(K1)){return J1;}}if(J1.parentNode==M1){y=J1;break;}J1=J1.parentNode;}return y;}function E1(i,y){if(y===u){y=i.nodeType===3?i.length:i.childNodes.length;}while(i&&i.hasChildNodes()){i=i.childNodes[y];if(i){y=i.nodeType===3?i.length:i.childNodes.length;}}return{node:i,offset:y};}if(z1.nodeType==1&&z1.hasChildNodes()){n=z1.childNodes.length-1;z1=z1.childNodes[A1>n?n:A1];if(z1.nodeType==3){A1=0;}}if(B1.nodeType==1&&B1.hasChildNodes()){n=B1.childNodes.length-1;B1=B1.childNodes[C1>n?n:C1-1];if(B1.nodeType==3){C1=B1.nodeValue.length;}}function F1(i){var y=i;while(y){if(y.nodeType===1&&v(y)){return v(y)==="false"?y:i;}y=y.parentNode;}return i;}function G1(i,y,J1){var K1,L1,M1,N1;function O1(L1,y){var M1,P1,Q1=L1.nodeValue;if(typeof(y)=="undefined"){y=J1?Q1.length:0;}if(J1){M1=Q1.lastIndexOf(' ',y);P1=Q1.lastIndexOf('\u00a0',y);M1=M1>P1?M1:P1;if(M1!==-1&&!a1){M1++;}}else{M1=Q1.indexOf(' ',y);P1=Q1.indexOf('\u00a0',y);M1=M1!==-1&&(P1===-1||M1<P1)?M1:P1;}return M1;}if(i.nodeType===3){M1=O1(i,y);if(M1!==-1){return{container:i,offset:M1};}N1=i;}K1=new T(i,g.getParent(i,j)||d.getBody());while((L1=K1[J1?'prev':'next']())){if(L1.nodeType===3){N1=L1;M1=O1(L1);if(M1!==-1){return{container:L1,offset:M1};}}else if(j(L1)){break;}}if(N1){if(J1){y=0;}else{y=N1.length;}return{container:N1,offset:y};}}function H1(J1,K1){var L1,i,y,M1;if(J1.nodeType==3&&J1.nodeValue.length===0&&J1[K1]){J1=J1[K1];}L1=Q(J1);for(i=0;i<L1.length;i++){for(y=0;y<l.length;y++){M1=l[y];if("collapsed"in M1&&M1.collapsed!==e.collapsed){continue;}if(g.is(L1[i],M1.selector)){return L1[i];}}}return J1;}function I1(i,y){var J1,K1=g.getRoot();if(!l[0].wrapper){J1=g.getParent(i,l[0].block,K1);}if(!J1){J1=g.getParent(i.nodeType==3?i.parentNode:i,function(J1){return J1!=K1&&O(J1);});}if(J1&&l[0].wrapper){J1=Q(J1,'ul,ol').reverse()[0]||J1;}if(!J1){J1=i;while(J1[y]&&!j(J1[y])){J1=J1[y];if(j1(J1,'br')){break;}}}return J1||i;}z1=F1(z1);B1=F1(B1);if(H(z1.parentNode)||H(z1)){z1=H(z1)?z1:z1.parentNode;z1=z1.nextSibling||z1;if(z1.nodeType==3){A1=0;}}if(H(B1.parentNode)||H(B1)){B1=H(B1)?B1:B1.parentNode;B1=B1.previousSibling||B1;if(B1.nodeType==3){C1=B1.length;}}if(l[0].inline){if(e.collapsed){y1=G1(z1,A1,true);if(y1){z1=y1.container;A1=y1.offset;}y1=G1(B1,C1);if(y1){B1=y1.container;C1=y1.offset;}}x=E1(B1,C1);if(x.node){while(x.node&&x.offset===0&&x.node.previousSibling){x=E1(x.node.previousSibling);}if(x.node&&x.offset>0&&x.node.nodeType===3&&x.node.nodeValue.charAt(x.offset-1)===' '){if(x.offset>1){B1=x.node;B1.splitText(x.offset-1);}}}}if(l[0].inline||l[0].block_expand){if(!l[0].inline||(z1.nodeType!=3||A1===0)){z1=D1(true);}if(!l[0].inline||(B1.nodeType!=3||C1===B1.nodeValue.length)){B1=D1();}}if(l[0].selector&&l[0].expand!==o&&!l[0].inline){z1=H1(z1,'previousSibling');B1=H1(B1,'nextSibling');}if(l[0].block||l[0].selector){z1=I1(z1,'previousSibling');B1=I1(B1,'nextSibling');if(l[0].block){if(!j(z1)){z1=D1(true);}if(!j(B1)){B1=D1();}}}if(z1.nodeType==1){A1=m(z1);z1=z1.parentNode;}if(B1.nodeType==1){C1=m(B1)+1;B1=B1.parentNode;}return{startContainer:z1,startOffset:A1,endContainer:B1,endOffset:C1};}function q1(n,e){return e.links&&n.tagName=='A';}function r1(e,l,n,x){var i,y,y1;if(!i1(n,e)&&!q1(n,e)){return o;}if(e.remove!='all'){J(e.styles,function(z1,A1){z1=l1(m1(z1,l),A1);if(typeof(A1)==='number'){A1=z1;x=0;}if(e.remove_similar||(!x||j1(k1(x,A1),z1))){g.setStyle(n,A1,'');}y1=1;});if(y1&&g.getAttrib(n,'style')===''){n.removeAttribute('style');n.removeAttribute('data-mce-style');}J(e.attributes,function(z1,A1){var B1;z1=m1(z1,l);if(typeof(A1)==='number'){A1=z1;x=0;}if(!x||j1(g.getAttrib(x,A1),z1)){if(A1=='class'){z1=g.getAttrib(n,A1);if(z1){B1='';J(z1.split(/\s+/),function(C1){if(/mce\w+/.test(C1)){B1+=(B1?' ':'')+C1;}});if(B1){g.setAttrib(n,A1,B1);return;}}}if(A1=="class"){n.removeAttribute('className');}if(M.test(A1)){n.removeAttribute('data-mce-'+A1);}n.removeAttribute(A1);}});J(e.classes,function(z1){z1=m1(z1,l);if(!x||g.hasClass(x,z1)){g.removeClass(n,z1);}});y=g.getAttribs(n);for(i=0;i<y.length;i++){if(y[i].nodeName.indexOf('_')!==0){return o;}}}if(e.remove!='none'){s1(n,e);return p;}}function s1(n,e){var i=n.parentNode,l;function x(n,y,y1){n=t1(n,y,y1);return!n||(n.nodeName=='BR'||j(n));}if(e.block){if(!k){if(j(n)&&!j(i)){if(!x(n,o)&&!x(n.firstChild,p,1)){n.insertBefore(g.create('br'),n.firstChild);}if(!x(n,p)&&!x(n.lastChild,o,1)){n.appendChild(g.create('br'));}}}else{if(i==g.getRoot()){if(!e.list_block||!j1(n,e.list_block)){J(K(n.childNodes),function(n){if(h(k,n.nodeName.toLowerCase())){if(!l){l=o1(n,k);g.setAttribs(l,d.settings.forced_root_block_attrs);}else{l.appendChild(n);}}else{l=0;}});}}}}if(e.selector&&e.inline&&!j1(e.inline,n)){return;}g.remove(n,1);}function t1(n,e,i){if(n){e=e?'nextSibling':'previousSibling';for(n=i?n:n[e];n;n=n[e]){if(n.nodeType==1||!n1(n)){return n;}}}}function u1(e,n){var i,l,x=new b(g);function y(y1,z1){for(i=y1;i;i=i[z1]){if(i.nodeType==3&&i.nodeValue.length!==0){return y1;}if(i.nodeType==1&&!H(i)){return i;}}return y1;}if(e&&n){e=y(e,'previousSibling');n=y(n,'nextSibling');if(x.compare(e,n)){for(i=e.nextSibling;i&&i!=n;){l=i;i=i.nextSibling;e.appendChild(l);}g.remove(n);J(K(n.childNodes),function(y1){e.appendChild(y1);});return e;}}return n;}function v1(e,i){var l,n,x;l=e[i?'startContainer':'endContainer'];n=e[i?'startOffset':'endOffset'];if(l.nodeType==1){x=l.childNodes.length-1;if(!i&&n){n--;}l=l.childNodes[n>x?x:n];}if(l.nodeType===3&&i&&n>=l.nodeValue.length){l=new T(l,d.getBody()).next()||l;}if(l.nodeType===3&&!i&&n===0){l=new T(l,d.getBody()).prev()||l;}return l;}function w1(l,n,x,y){var y1='_mce_caret',z1=d.settings.caret_debug;function A1(e){var i=g.create('span',{id:y1,'data-mce-bogus':true,style:z1?'color:red':''});if(e){i.appendChild(d.getDoc().createTextNode(I));}return i;}function B1(e,i){while(e){if((e.nodeType===3&&e.nodeValue!==I)||e.childNodes.length>1){return false;}if(i&&e.nodeType===1){i.push(e);}e=e.firstChild;}return true;}function C1(e){while(e){if(e.id===y1){return e;}e=e.parentNode;}}function D1(e){var i;if(e){i=new T(e,e);for(e=i.current();e;e=i.next()){if(e.nodeType===3){return e;}}}}function E1(e,i){var I1,J1;if(!e){e=C1(s.getStart());if(!e){while((e=g.get(y1))){E1(e,false);}}}else{J1=s.getRng(true);if(B1(e)){if(i!==false){J1.setStartBefore(e);J1.setEndBefore(e);}g.remove(e);}else{I1=D1(e);if(I1.nodeValue.charAt(0)===I){I1.deleteData(0,1);if(J1.startContainer==I1&&J1.startOffset>0){J1.setStart(I1,J1.startOffset-1);}if(J1.endContainer==I1&&J1.endOffset>0){J1.setEnd(I1,J1.endOffset-1);}}g.remove(e,1);}s.setRng(J1);}}function F1(){var e,i,I1,J1,K1,L1,M1;e=s.getRng(true);J1=e.startOffset;L1=e.startContainer;M1=L1.nodeValue;i=C1(s.getStart());if(i){I1=D1(i);}if(M1&&J1>0&&J1<M1.length&&/\w/.test(M1.charAt(J1))&&/\w/.test(M1.charAt(J1-1))){K1=s.getBookmark();e.collapse(true);e=p1(e,W(n));e=r.split(e);_(n,x,e);s.moveToBookmark(K1);}else{if(!i||I1.nodeValue!==I){i=A1(true);I1=i.firstChild;e.insertNode(i);J1=1;_(n,x,i);}else{_(n,x,i);}s.setCursorLocation(I1,J1);}}function G1(){var e=s.getRng(true),I1,J1,K1,L1,M1,N1,O1=[],i,P1;I1=e.startContainer;J1=e.startOffset;M1=I1;if(I1.nodeType==3){if(J1!=I1.nodeValue.length){L1=true;}M1=M1.parentNode;}while(M1){if(c1(M1,n,x,y)){N1=M1;break;}if(M1.nextSibling){L1=true;}O1.push(M1);M1=M1.parentNode;}if(!N1){return;}if(L1){K1=s.getBookmark();e.collapse(true);e=p1(e,W(n),true);e=r.split(e);a1(n,x,e);s.moveToBookmark(K1);}else{P1=A1();M1=P1;for(i=O1.length-1;i>=0;i--){M1.appendChild(g.clone(O1[i],false));M1=M1.firstChild;}M1.appendChild(g.doc.createTextNode(I));M1=M1.firstChild;var Q1=g.getParent(N1,O);if(Q1&&g.isEmpty(Q1)){N1.parentNode.replaceChild(P1,N1);}else{g.insertAfter(P1,N1);}s.setCursorLocation(M1,1);if(g.isEmpty(N1)){g.remove(N1);}}}function H1(){var e;e=C1(s.getStart());if(e&&!g.isEmpty(e)){L(e,function(i){if(i.nodeType==1&&i.id!==y1&&!g.isEmpty(i)){g.setAttrib(i,'data-mce-bogus',null);}},'childNodes');}}if(!d._hasCaretEvents){G=function(){var e=[],i;if(B1(C1(s.getStart()),e)){i=e.length;while(i--){g.setAttrib(e[i],'data-mce-bogus','1');}}};w=function(e){var i=e.keyCode;E1();if(i==8||i==37||i==39){E1(C1(s.getStart()));}H1();};d.on('SetContent',function(e){if(e.selection){H1();}});d._hasCaretEvents=true;}if(l=="apply"){F1();}else{G1();}}function x1(e){var i=e.startContainer,l=e.startOffset,n,x,y,y1,z1;if(i.nodeType==3&&l>=i.nodeValue.length){l=m(i);i=i.parentNode;n=true;}if(i.nodeType==1){y1=i.childNodes;i=y1[Math.min(l,y1.length-1)];x=new T(i,g.getParent(i,g.isBlock));if(l>y1.length-1||n){x.next();}for(y=x.current();y;y=x.next()){if(y.nodeType==3&&!n1(y)){z1=g.create('a',{'data-mce-bogus':'all'},I);y.parentNode.insertBefore(z1,y);e.setStart(y,0);s.setRng(e);g.remove(z1);return;}}}}};});
/**
 * UndoManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/UndoManager",["tinymce/util/VK","tinymce/Env","tinymce/util/Tools","tinymce/html/SaxParser"],function(V,a,T,S){var t=T.trim,b;b=new RegExp(['<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\\/span>','\\s?data-mce-selected="[^"]+"'].join('|'),'gi');return function(c){var s=this,d=0,f=[],g,h,l=0;function j(){var e=c.getContent({format:'raw',no_events:1});var i=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g;var m,d,n,o,p,r=c.schema;e=e.replace(b,'');p=r.getShortEndedElements();while((o=i.exec(e))){d=i.lastIndex;n=o[0].length;if(p[o[1]]){m=d;}else{m=S.findEndTag(r,e,d);}e=e.substring(0,d-n)+e.substring(m);i.lastIndex=d-n;}return t(e);}function k(e){s.typing=false;s.add({},e);}c.on('init',function(){s.add();});c.on('BeforeExecCommand',function(e){var i=e.command;if(i!='Undo'&&i!='Redo'&&i!='mceRepaint'){s.beforeChange();}});c.on('ExecCommand',function(e){var i=e.command;if(i!='Undo'&&i!='Redo'&&i!='mceRepaint'){k(e);}});c.on('ObjectResizeStart',function(){s.beforeChange();});c.on('SaveContent ObjectResized blur',k);c.on('DragEnd',k);c.on('KeyUp',function(e){var i=e.keyCode;if((i>=33&&i<=36)||(i>=37&&i<=40)||i==45||i==13||e.ctrlKey){k();c.nodeChanged();}if(i==46||i==8||(a.mac&&(i==91||i==93))){c.nodeChanged();}if(h&&s.typing){if(!c.isDirty()){c.isNotDirty=!f[0]||j()==f[0].content;if(!c.isNotDirty){c.fire('change',{level:f[0],lastLevel:null});}}c.fire('TypingUndo');h=false;c.nodeChanged();}});c.on('KeyDown',function(e){var i=e.keyCode;if((i>=33&&i<=36)||(i>=37&&i<=40)||i==45){if(s.typing){k(e);}return;}var m=V.modifierPressed(e);if((i<16||i>20)&&i!=224&&i!=91&&!s.typing&&!m){s.beforeChange();s.typing=true;s.add({},e);h=true;}});c.on('MouseDown',function(e){if(s.typing){k(e);}});c.addShortcut('ctrl+z','','Undo');c.addShortcut('ctrl+y,ctrl+shift+z','','Redo');c.on('AddUndo Undo Redo ClearUndos',function(e){if(!e.isDefaultPrevented()){c.nodeChanged();}});s={data:f,typing:false,beforeChange:function(){if(!l){g=c.selection.getBookmark(2,true);}},add:function(e,m){var i,n=c.settings,o;e=e||{};e.content=j();if(l||c.removed){return null;}o=f[d];if(c.fire('BeforeAddUndo',{level:e,lastLevel:o,originalEvent:m}).isDefaultPrevented()){return null;}if(o&&o.content==e.content){return null;}if(f[d]){f[d].beforeBookmark=g;}if(n.custom_undo_redo_levels){if(f.length>n.custom_undo_redo_levels){for(i=0;i<f.length-1;i++){f[i]=f[i+1];}f.length--;d=f.length;}}e.bookmark=c.selection.getBookmark(2,true);if(d<f.length-1){f.length=d+1;}f.push(e);d=f.length-1;var p={level:e,lastLevel:o,originalEvent:m};c.fire('AddUndo',p);if(d>0){c.isNotDirty=false;c.fire('change',p);}return e;},undo:function(){var e;if(s.typing){s.add();s.typing=false;}if(d>0){e=f[--d];if(d===0){c.isNotDirty=true;}c.setContent(e.content,{format:'raw'});c.selection.moveToBookmark(e.beforeBookmark);c.fire('undo',{level:e});}return e;},redo:function(){var e;if(d<f.length-1){e=f[++d];c.setContent(e.content,{format:'raw'});c.selection.moveToBookmark(e.bookmark);c.fire('redo',{level:e});}return e;},clear:function(){f=[];d=0;s.typing=false;c.fire('ClearUndos');},hasUndo:function(){return d>0||(s.typing&&f[0]&&j()!=f[0].content);},hasRedo:function(){return d<f.length-1&&!this.typing;},transact:function(e){s.beforeChange();try{l++;e();}finally{l--;}s.add();}};return s;};});
/**
 * EnterKey.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/EnterKey",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/Env"],function(T,R,a){var b=a.ie&&a.ie<11;return function(e){var d=e.dom,s=e.selection,c=e.settings;var u=e.undoManager,f=e.schema,n=f.getNonEmptyElements();function h(g){var r,t,j,k,o,p,l,m,v,w,x,y,G,H,I;function J(i){return i&&d.isBlock(i)&&!/^(TD|TH|CAPTION|FORM)$/.test(i.nodeName)&&!/^(fixed|absolute)/i.test(i.style.position)&&d.getContentEditable(i)!=="true";}function K(i){var Y;if(d.isBlock(i)){Y=s.getRng();i.appendChild(d.create('span',null,'\u00a0'));s.select(i);i.lastChild.outerHTML='';s.setRng(Y);}}function L(Y){var Z=Y,$=[],i;if(!Z){return;}while((Z=Z.firstChild)){if(d.isBlock(Z)){return;}if(Z.nodeType==1&&!n[Z.nodeName.toLowerCase()]){$.push(Z);}}i=$.length;while(i--){Z=$[i];if(!Z.hasChildNodes()||(Z.firstChild==Z.lastChild&&Z.firstChild.nodeValue==='')){d.remove(Z);}else{if(Z.nodeName=="A"&&(Z.innerText||Z.textContent)===' '){d.remove(Z);}}}}function M(i){var Y,Z,r,$=i,_;function a1(Z){while(Z){if(Z.nodeType==1||(Z.nodeType==3&&Z.data&&/[\r\n\s]/.test(Z.data))){return Z;}Z=Z.nextSibling;}}if(!i){return;}if(a.ie&&a.ie<9&&p&&p.firstChild){if(p.firstChild==p.lastChild&&p.firstChild.tagName=='BR'){d.remove(p.firstChild);}}if(/^(LI|DT|DD)$/.test(i.nodeName)){var b1=a1(i.firstChild);if(b1&&/^(UL|OL|DL)$/.test(b1.nodeName)){i.insertBefore(d.doc.createTextNode('\u00a0'),i.firstChild);}}r=d.createRng();if(!a.ie){i.normalize();}if(i.hasChildNodes()){Y=new T(i,i);while((Z=Y.current())){if(Z.nodeType==3){r.setStart(Z,0);r.setEnd(Z,0);break;}if(n[Z.nodeName.toLowerCase()]){r.setStartBefore(Z);r.setEndBefore(Z);break;}$=Z;Z=Y.next();}if(!Z){r.setStart($,0);r.setEnd($,0);}}else{if(i.nodeName=='BR'){if(i.nextSibling&&d.isBlock(i.nextSibling)){if(!l||l<9){_=d.create('br');i.parentNode.insertBefore(_,i);}r.setStartBefore(i);r.setEndBefore(i);}else{r.setStartAfter(i);r.setEndAfter(i);}}else{r.setStart(i,0);r.setEnd(i,0);}}s.setRng(r);d.remove(_);s.scrollIntoView(i);}function N(i){var Y=c.forced_root_block;if(Y&&Y.toLowerCase()===i.tagName.toLowerCase()){d.setAttribs(i,c.forced_root_block_attrs);}}function O(i){var Y=k,Z,$,_,a1=f.getTextInlineElements();if(i||y=="TABLE"){Z=d.create(i||H);N(Z);}else{Z=p.cloneNode(false);}_=Z;if(c.keep_styles!==false){do{if(a1[Y.nodeName]){if(Y.id=='_mce_caret'){continue;}$=Y.cloneNode(false);d.setAttrib($,'id','');if(Z.hasChildNodes()){$.appendChild(Z.firstChild);Z.appendChild($);}else{_=$;Z.appendChild($);}}}while((Y=Y.parentNode));}if(!b){_.innerHTML='<br data-mce-bogus="1">';}return Z;}function P(i){var Y,Z,$;if(k.nodeType==3&&(i?o>0:o<k.nodeValue.length)){return false;}if(k.parentNode==p&&I&&!i){return true;}if(i&&k.nodeType==1&&k==p.firstChild){return true;}if(k.nodeName==="TABLE"||(k.previousSibling&&k.previousSibling.nodeName=="TABLE")){return(I&&!i)||(!I&&i);}Y=new T(k,p);if(k.nodeType==3){if(i&&o===0){Y.prev();}else if(!i&&o==k.nodeValue.length){Y.next();}}while((Z=Y.current())){if(Z.nodeType===1){if(!Z.getAttribute('data-mce-bogus')){$=Z.nodeName.toLowerCase();if(n[$]&&$!=='br'){return false;}}}else if(Z.nodeType===3&&!/^[ \t\r\n]*$/.test(Z.nodeValue)){return false;}if(i){Y.prev();}else{Y.next();}}return true;}function Q(k,o){var v,p,i,Y,Z,$,_=H||'P';p=d.getParent(k,d.isBlock);$=e.getBody().nodeName.toLowerCase();if(!p||!J(p)){p=p||j;if(!p.hasChildNodes()){v=d.create(_);N(v);p.appendChild(v);r.setStart(v,0);r.setEnd(v,0);return v;}Y=k;while(Y.parentNode!=p){Y=Y.parentNode;}while(Y&&!d.isBlock(Y)){i=Y;Y=Y.previousSibling;}if(i&&f.isValidChild($,_.toLowerCase())){v=d.create(_);N(v);i.parentNode.insertBefore(v,i);Y=i;while(Y&&!d.isBlock(Y)){Z=Y.nextSibling;v.appendChild(Y);Y=Z;}r.setStart(k,o);r.setEnd(k,o);}}return k;}function S(){function i($){var _=x[$?'firstChild':'lastChild'];while(_){if(_.nodeType==1){break;}_=_[$?'nextSibling':'previousSibling'];}return _===p;}function Y(){var $=x.parentNode;if(/^(LI|DT|DD)$/.test($.nodeName)){return $;}return x;}var Z=x.parentNode.nodeName;if(/^(OL|UL|LI)$/.test(Z)){H='LI';}v=H?O(H):d.create('BR');if(i(true)&&i()){if(Z=='LI'){d.insertAfter(v,Y());}else{d.replace(v,x);}}else if(i(true)){if(Z=='LI'){d.insertAfter(v,Y());v.appendChild(d.doc.createTextNode(' '));v.appendChild(x);}else{x.parentNode.insertBefore(v,x);}}else if(i()){d.insertAfter(v,Y());K(v);}else{x=Y();t=r.cloneRange();t.setStartAfter(p);t.setEndAfter(x);w=t.extractContents();if(H=='LI'&&w.firstChild.nodeName=='LI'){v=w.firstChild;d.insertAfter(w,x);}else{d.insertAfter(w,x);d.insertAfter(v,x);}}d.remove(p);M(v);u.add();}function U(){e.execCommand("InsertLineBreak",false,g);}function V(i){do{if(i.nodeType===3){i.nodeValue=i.nodeValue.replace(/^[\r\n]+/,'');}i=i.firstChild;}while(i);}function W(i){var Y=d.getRoot(),Z,j;Z=i;while(Z!==Y&&d.getContentEditable(Z)!=="false"){if(d.getContentEditable(Z)==="true"){j=Z;}Z=Z.parentNode;}return Z!==Y?j:Y;}function X(i){var Y;if(!b){i.normalize();Y=i.lastChild;if(!Y||(/^(left|right)$/gi.test(d.getStyle(Y,'float',true)))){d.add(i,'br');}}}r=s.getRng(true);if(g.isDefaultPrevented()){return;}if(!r.collapsed){e.execCommand('Delete');return;}new R(d).normalize(r);k=r.startContainer;o=r.startOffset;H=(c.force_p_newlines?'p':'')||c.forced_root_block;H=H?H.toUpperCase():'';l=d.doc.documentMode;m=g.shiftKey;if(k.nodeType==1&&k.hasChildNodes()){I=o>k.childNodes.length-1;k=k.childNodes[Math.min(o,k.childNodes.length-1)]||k;if(I&&k.nodeType==3){o=k.nodeValue.length;}else{o=0;}}j=W(k);if(!j){return;}u.beforeChange();if(!d.isBlock(j)&&j!=d.getRoot()){if(!H||m){U();}return;}if((H&&!m)||(!H&&m)){k=Q(k,o);}p=d.getParent(k,d.isBlock);x=p?d.getParent(p.parentNode,d.isBlock):null;y=p?p.nodeName.toUpperCase():'';G=x?x.nodeName.toUpperCase():'';if(G=='LI'&&!g.ctrlKey){p=x;y=G;}if(/^(LI|DT|DD)$/.test(y)){if(!H&&m){U();return;}if(d.isEmpty(p)){S();return;}}if(y=='PRE'&&c.br_in_pre!==false){if(!m){U();return;}}else{if((!H&&!m&&y!='LI')||(H&&m)){U();return;}}if(H&&p===e.getBody()){return;}H=H||'P';if(P()){if(/^(H[1-6]|PRE|FIGURE)$/.test(y)&&G!='HGROUP'){v=O(H);}else{v=O();}if(c.end_container_on_empty_block&&J(x)&&d.isEmpty(p)){v=d.split(x,p);}else{d.insertAfter(v,p);}M(v);}else if(P(true)){v=p.parentNode.insertBefore(O(),p);K(v);M(p);}else{t=r.cloneRange();t.setEndAfter(p);w=t.extractContents();V(w);v=w.firstChild;d.insertAfter(w,p);L(v);X(p);M(v);}d.setAttrib(v,'id','');e.fire('NewBlock',{newBlock:v});u.add();}e.on('keydown',function(g){if(g.keyCode==13){if(h(g)!==false){g.preventDefault();}}});};});
/**
 * ForceBlocks.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ForceBlocks",[],function(){return function(e){var s=e.settings,d=e.dom,a=e.selection;var b=e.schema,c=b.getBlockElements();function f(){var n=a.getStart(),r=e.getBody(),g;var h,i,j,k,l;var t,o=-0xFFFFFF,w,m;var p,u,v;v=s.forced_root_block;if(!n||n.nodeType!==1||!v){return;}while(n&&n!=r){if(c[n.nodeName]){return;}n=n.parentNode;}g=a.getRng();if(g.setStart){h=g.startContainer;i=g.startOffset;j=g.endContainer;k=g.endOffset;try{m=e.getDoc().activeElement===r;}catch(x){}}else{if(g.item){n=g.item(0);g=e.getDoc().body.createTextRange();g.moveToElementText(n);}m=g.parentElement().ownerDocument===e.getDoc();p=g.duplicate();p.collapse(true);i=p.move('character',o)*-1;if(!p.collapsed){p=g.duplicate();p.collapse(false);k=(p.move('character',o)*-1)-i;}}n=r.firstChild;u=r.nodeName.toLowerCase();while(n){if(((n.nodeType===3||(n.nodeType==1&&!c[n.nodeName])))&&b.isValidChild(u,v.toLowerCase())){if(n.nodeType===3&&n.nodeValue.length===0){t=n;n=n.nextSibling;d.remove(t);continue;}if(!l){l=d.create(v,e.settings.forced_root_block_attrs);n.parentNode.insertBefore(l,n);w=true;}t=n;n=n.nextSibling;l.appendChild(t);}else{l=null;n=n.nextSibling;}}if(w&&m){if(g.setStart){g.setStart(h,i);g.setEnd(j,k);a.setRng(g);}else{try{g=e.getDoc().body.createTextRange();g.moveToElementText(r);g.collapse(true);g.moveStart('character',i);if(k>0){g.moveEnd('character',k);}g.select();}catch(x){}}e.nodeChanged();}}if(s.forced_root_block){e.on('NodeChange',f);}};});
/**
 * EditorCommands.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/EditorCommands",["tinymce/html/Serializer","tinymce/Env","tinymce/util/Tools","tinymce/dom/ElementUtils","tinymce/dom/RangeUtils","tinymce/dom/TreeWalker"],function(S,a,T,b,R,c){var e=T.each,d=T.extend;var m=T.map,i=T.inArray,f=T.explode;var g=a.gecko,h=a.ie,j=a.ie&&a.ie<11;var k=true,l=false;return function(n){var o=n.dom,s=n.selection,p={state:{},exec:{},value:{}},r=n.settings,t=n.formatter,u;function v(L,M,N){var O;L=L.toLowerCase();if((O=p.exec[L])){O(L,M,N);return k;}return l;}function w(L){var M;L=L.toLowerCase();if((M=p.state[L])){return M(L);}return-1;}function x(L){var M;L=L.toLowerCase();if((M=p.value[L])){return M(L);}return l;}function y(L,M){M=M||'exec';e(L,function(N,O){e(O.toLowerCase().split(','),function(O){p[M][O]=N;});});}d(this,{execCommand:v,queryCommandState:w,queryCommandValue:x,addCommands:y});function G(L,M,N){if(M===z){M=l;}if(N===z){N=null;}return n.getDoc().execCommand(L,M,N);}function H(L){return t.match(L);}function I(L,M){t.toggle(L,M?{value:M}:z);n.nodeChanged();}function J(L){u=s.getBookmark(L);}function K(){s.moveToBookmark(u);}y({'mceResetDesignMode,mceBeginUndoLevel':function(){},'mceEndUndoLevel,mceAddUndoLevel':function(){n.undoManager.add();},'Cut,Copy,Paste':function(L){var M=n.getDoc(),N;try{G(L);}catch(O){N=k;}if(N||!M.queryCommandSupported(L)){var P=n.translate("Your browser doesn't support direct access to the clipboard. "+"Please use the Ctrl+X/C/V keyboard shortcuts instead.");if(a.mac){P=P.replace(/Ctrl\+/g,'\u2318+');}n.windowManager.alert(P);}},unlink:function(){if(s.isCollapsed()){var L=s.getNode();if(L.tagName=='A'){n.dom.remove(L,true);}return;}t.remove("link");},'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull':function(L){var M=L.substring(7);if(M=='full'){M='justify';}e('left,center,right,justify'.split(','),function(N){if(M!=N){t.remove('align'+N);}});I('align'+M);v('mceRepaint');},'InsertUnorderedList,InsertOrderedList':function(L){var M,N;G(L);M=o.getParent(s.getNode(),'ol,ul');if(M){N=M.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(N.nodeName)){J();o.split(N,M);K();}}},'Bold,Italic,Underline,Strikethrough,Superscript,Subscript':function(L){I(L);},'ForeColor,HiliteColor,FontName':function(L,M,N){I(L,N);},FontSize:function(L,M,N){var O,P;if(N>=1&&N<=7){P=f(r.font_size_style_values);O=f(r.font_size_classes);if(O){N=O[N-1]||N;}else{N=P[N-1]||N;}}I(L,N);},RemoveFormat:function(L){t.remove(L);},mceBlockQuote:function(){I('blockquote');},FormatBlock:function(L,M,N){return I(N||'p');},mceCleanup:function(){var u=s.getBookmark();n.setContent(n.getContent({cleanup:k}),{cleanup:k});s.moveToBookmark(u);},mceRemoveNode:function(L,M,N){var O=N||s.getNode();if(O!=n.getBody()){J();n.dom.remove(O,k);K();}},mceSelectNodeDepth:function(L,M,N){var O=0;o.getParent(s.getNode(),function(P){if(P.nodeType==1&&O++==N){s.select(P);return l;}},n.getBody());},mceSelectNode:function(L,M,N){s.select(N);},mceInsertContent:function(L,M,N){var O,P,Q,U,V,W;var X,Y,Z,$,_,a1;var b1=n.schema.getTextInlineElements();function c1(i1){var Y,j1,k1;Y=s.getRng(true);j1=Y.startContainer;k1=Y.startOffset;function l1(m1){return j1[m1]&&j1[m1].nodeType==3;}if(j1.nodeType==3){if(k1>0){i1=i1.replace(/^&nbsp;/,' ');}else if(!l1('previousSibling')){i1=i1.replace(/^ /,'&nbsp;');}if(k1<j1.length){i1=i1.replace(/&nbsp;(<br>|)$/,' ');}else if(!l1('nextSibling')){i1=i1.replace(/(&nbsp;| )(<br>|)$/,'&nbsp;');}}return i1;}function d1(V){if(a1){for(Z=V.firstChild;Z;Z=Z.walk(true)){if(b1[Z.name]){Z.attr('data-mce-new',"true");}}}}function e1(){if(a1){var i1=n.getBody(),j1=new b(o);e(o.select('*[data-mce-new]'),function(Z){Z.removeAttribute('data-mce-new');for(var k1=Z.parentNode;k1&&k1!=i1;k1=k1.parentNode){if(j1.compare(k1,Z)){o.remove(Z,true);}}});}}if(typeof(N)!='string'){a1=N.merge;N=N.content;}if(/^ | $/.test(N)){N=c1(N);}O=n.parser;P=new S({},n.schema);_='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>';W={content:N,format:'html',selection:true};n.fire('BeforeSetContent',W);N=W.content;if(N.indexOf('{$caret}')==-1){N+='{$caret}';}N=N.replace(/\{\$caret\}/,_);Y=s.getRng();var f1=Y.startContainer||(Y.parentElement?Y.parentElement():null);var g1=n.getBody();if(f1===g1&&s.isCollapsed()){if(o.isBlock(g1.firstChild)&&o.isEmpty(g1.firstChild)){Y=o.createRng();Y.setStart(g1.firstChild,0);Y.setEnd(g1.firstChild,0);s.setRng(Y);}}if(!s.isCollapsed()){n.getDoc().execCommand('Delete',false,null);}Q=s.getNode();var h1={context:Q.nodeName.toLowerCase()};V=O.parse(N,h1);d1(V);Z=V.lastChild;if(Z.attr('id')=='mce_marker'){X=Z;for(Z=Z.prev;Z;Z=Z.walk(true)){if(Z.type==3||!o.isBlock(Z.name)){if(n.schema.isValidChild(Z.parent.name,'span')){Z.parent.insert(X,Z,Z.name==='br');}break;}}}if(!h1.invalid){N=P.serialize(V);Z=Q.firstChild;$=Q.lastChild;if(!Z||(Z===$&&Z.nodeName==='BR')){o.setHTML(Q,N);}else{s.setContent(N);}}else{s.setContent(_);Q=s.getNode();U=n.getBody();if(Q.nodeType==9){Q=Z=U;}else{Z=Q;}while(Z!==U){Q=Z;Z=Z.parentNode;}N=Q==U?U.innerHTML:o.getOuterHTML(Q);N=P.serialize(O.parse(N.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return P.serialize(V);})));if(Q==U){o.setHTML(U,N);}else{o.setOuterHTML(Q,N);}}e1();X=o.get('mce_marker');s.scrollIntoView(X);Y=o.createRng();Z=X.previousSibling;if(Z&&Z.nodeType==3){Y.setStart(Z,Z.nodeValue.length);if(!h){$=X.nextSibling;if($&&$.nodeType==3){Z.appendData($.data);$.parentNode.removeChild($);}}}else{Y.setStartBefore(X);Y.setEndBefore(X);}o.remove(X);s.setRng(Y);n.fire('SetContent',W);n.addVisual();},mceInsertRawHTML:function(L,M,N){s.setContent('tiny_mce_marker');n.setContent(n.getContent().replace(/tiny_mce_marker/g,function(){return N;}));},mceToggleFormat:function(L,M,N){I(N);},mceSetContent:function(L,M,N){n.setContent(N);},'Indent,Outdent':function(L){var M,N,O;M=r.indentation;N=/[a-z%]+$/i.exec(M);M=parseInt(M,10);if(!w('InsertUnorderedList')&&!w('InsertOrderedList')){if(!r.forced_root_block&&!o.getParent(s.getNode(),o.isBlock)){t.apply('div');}e(s.getSelectedBlocks(),function(P){if(P.nodeName!="LI"){var Q=n.getParam('indent_use_margin',false)?'margin':'padding';Q+=o.getStyle(P,'direction',true)=='rtl'?'Right':'Left';if(L=='outdent'){O=Math.max(0,parseInt(P.style[Q]||0,10)-M);o.setStyle(P,Q,O?O+N:'');}else{O=(parseInt(P.style[Q]||0,10)+M)+N;o.setStyle(P,Q,O);}}});}else{G(L);}},mceRepaint:function(){if(g){try{J(k);if(s.getSel()){s.getSel().selectAllChildren(n.getBody());}s.collapse(k);K();}catch(L){}}},InsertHorizontalRule:function(){n.execCommand('mceInsertContent',false,'<hr />');},mceToggleVisualAid:function(){n.hasVisual=!n.hasVisual;n.addVisual();},mceReplaceContent:function(L,M,N){n.execCommand('mceInsertContent',false,N.replace(/\{\$selection\}/g,s.getContent({format:'text'})));},mceInsertLink:function(L,M,N){var O;if(typeof(N)=='string'){N={href:N};}O=o.getParent(s.getNode(),'a');N.href=N.href.replace(' ','%20');if(!O||!N.href){t.remove('link');}if(N.href){t.apply('link',N,O);}},selectAll:function(){var L=o.getRoot(),M;if(s.getRng().setStart){M=o.createRng();M.setStart(L,0);M.setEnd(L,L.childNodes.length);s.setRng(M);}else{M=s.getRng();if(!M.item){M.moveToElementText(L);M.select();}}},"delete":function(){G("Delete");var L=n.getBody();if(o.isEmpty(L)){n.setContent('');if(L.firstChild&&o.isBlock(L.firstChild)){n.selection.setCursorLocation(L.firstChild,0);}else{n.selection.setCursorLocation(L,0);}}},mceNewDocument:function(){n.setContent('');},InsertLineBreak:function(L,M,N){var O=N;var P,Q,U;var V=s.getRng(true);new R(o).normalize(V);var W=V.startOffset;var X=V.startContainer;if(X.nodeType==1&&X.hasChildNodes()){var Y=W>X.childNodes.length-1;X=X.childNodes[Math.min(W,X.childNodes.length-1)]||X;if(Y&&X.nodeType==3){W=X.nodeValue.length;}else{W=0;}}var Z=o.getParent(X,o.isBlock);var $=Z?Z.nodeName.toUpperCase():'';var _=Z?o.getParent(Z.parentNode,o.isBlock):null;var a1=_?_.nodeName.toUpperCase():'';var b1=O&&O.ctrlKey;if(a1=='LI'&&!b1){Z=_;$=a1;}function c1(){var e1=new c(X,Z),f1;var g1=n.schema.getNonEmptyElements();while((f1=e1.next())){if(g1[f1.nodeName.toLowerCase()]||f1.length>0){return true;}}}if(X&&X.nodeType==3&&W>=X.nodeValue.length){if(!j&&!c1()){P=o.create('br');V.insertNode(P);V.setStartAfter(P);V.setEndAfter(P);Q=true;}}P=o.create('br');V.insertNode(P);var d1=o.doc.documentMode;if(j&&$=='PRE'&&(!d1||d1<8)){P.parentNode.insertBefore(o.doc.createTextNode('\r'),P);}U=o.create('span',{},'&nbsp;');P.parentNode.insertBefore(U,P);s.scrollIntoView(U);o.remove(U);if(!Q){V.setStartAfter(P);V.setEndAfter(P);}else{V.setStartBefore(P);V.setEndBefore(P);}s.setRng(V);n.undoManager.add();return k;}});y({'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull':function(L){var M='align'+L.substring(7);var N=s.isCollapsed()?[o.getParent(s.getNode(),o.isBlock)]:s.getSelectedBlocks();var O=m(N,function(P){return!!t.matchNode(P,M);});return i(O,k)!==-1;},'Bold,Italic,Underline,Strikethrough,Superscript,Subscript':function(L){return H(L);},mceBlockQuote:function(){return H('blockquote');},Outdent:function(){var L;if(r.inline_styles){if((L=o.getParent(s.getStart(),o.isBlock))&&parseInt(L.style.paddingLeft,10)>0){return k;}if((L=o.getParent(s.getEnd(),o.isBlock))&&parseInt(L.style.paddingLeft,10)>0){return k;}}return(w('InsertUnorderedList')||w('InsertOrderedList')||(!r.inline_styles&&!!o.getParent(s.getNode(),'BLOCKQUOTE')));},'InsertUnorderedList,InsertOrderedList':function(L){var M=o.getParent(s.getNode(),'ul,ol');return M&&(L==='insertunorderedlist'&&M.tagName==='UL'||L==='insertorderedlist'&&M.tagName==='OL');}},'state');y({'FontSize,FontName':function(L){var M=0,N;if((N=o.getParent(s.getNode(),'span'))){if(L=='fontsize'){M=N.style.fontSize;}else{M=N.style.fontFamily.replace(/, /g,',').replace(/[\'\"]/g,'').toLowerCase();}}return M;}},'value');y({Undo:function(){n.undoManager.undo();},Redo:function(){n.undoManager.redo();}});};});
/**
 * URI.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/URI",["tinymce/util/Tools"],function(T){var e=T.each,t=T.trim;var a="source protocol authority userInfo user password host port relative path directory file query anchor".split(' ');var b={'ftp':21,'http':80,'https':443,'mailto':25};function U(u,s){var c=this,d,f;u=t(u);s=c.settings=s||{};d=s.base_uri;if(/^([\w\-]+):([^\/]{2})/i.test(u)||/^\s*#/.test(u)){c.source=u;return;}var g=u.indexOf('//')===0;if(u.indexOf('/')===0&&!g){u=(d?d.protocol||'http':'http')+'://mce_host'+u;}if(!/^[\w\-]*:?\/\//.test(u)){f=s.base_uri?s.base_uri.path:new U(location.href).directory;if(s.base_uri.protocol===""){u='//mce_host'+c.toAbsPath(f,u);}else{u=/([^#?]*)([#?]?.*)/.exec(u);u=((d&&d.protocol)||'http')+'://mce_host'+c.toAbsPath(f,u[1])+u[2];}}u=u.replace(/@@/g,'(mce_at)');u=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(u);e(a,function(v,i){var p=u[i];if(p){p=p.replace(/\(mce_at\)/g,'@@');}c[v]=p;});if(d){if(!c.protocol){c.protocol=d.protocol;}if(!c.userInfo){c.userInfo=d.userInfo;}if(!c.port&&c.host==='mce_host'){c.port=d.port;}if(!c.host||c.host==='mce_host'){c.host=d.host;}c.source='';}if(g){c.protocol='';}}U.prototype={setPath:function(p){var s=this;p=/^(.*?)\/?(\w+)?$/.exec(p);s.path=p[0];s.directory=p[1];s.file=p[2];s.source='';s.getURI();},toRelative:function(u){var s=this,o;if(u==="./"){return u;}u=new U(u,{base_uri:s});if((u.host!='mce_host'&&s.host!=u.host&&u.host)||s.port!=u.port||(s.protocol!=u.protocol&&u.protocol!=="")){return u.getURI();}var c=s.getURI(),d=u.getURI();if(c==d||(c.charAt(c.length-1)=="/"&&c.substr(0,c.length-1)==d)){return c;}o=s.toRelPath(s.path,u.path);if(u.query){o+='?'+u.query;}if(u.anchor){o+='#'+u.anchor;}return o;},toAbsolute:function(u,n){u=new U(u,{base_uri:this});return u.getURI(n&&this.isSameOrigin(u));},isSameOrigin:function(u){if(this.host==u.host&&this.protocol==u.protocol){if(this.port==u.port){return true;}var d=b[this.protocol];if(d&&((this.port||d)==(u.port||d))){return true;}}return false;},toRelPath:function(c,p){var d,f=0,o='',i,l;c=c.substring(0,c.lastIndexOf('/'));c=c.split('/');d=p.split('/');if(c.length>=d.length){for(i=0,l=c.length;i<l;i++){if(i>=d.length||c[i]!=d[i]){f=i+1;break;}}}if(c.length<d.length){for(i=0,l=d.length;i<l;i++){if(i>=c.length||c[i]!=d[i]){f=i+1;break;}}}if(f===1){return p;}for(i=0,l=c.length-(f-1);i<l;i++){o+="../";}for(i=f-1,l=d.length;i<l;i++){if(i!=f-1){o+="/"+d[i];}else{o+=d[i];}}return o;},toAbsPath:function(c,p){var i,n=0,o=[],d,f;d=/\/$/.test(p)?'/':'';c=c.split('/');p=p.split('/');e(c,function(k){if(k){o.push(k);}});c=o;for(i=p.length-1,o=[];i>=0;i--){if(p[i].length===0||p[i]==="."){continue;}if(p[i]==='..'){n++;continue;}if(n>0){n--;continue;}o.push(p[i]);}i=c.length-n;if(i<=0){f=o.reverse().join('/');}else{f=c.slice(0,i).join('/')+'/'+o.reverse().join('/');}if(f.indexOf('/')!==0){f='/'+f;}if(d&&f.lastIndexOf('/')!==f.length-1){f+=d;}return f;},getURI:function(n){var s,c=this;if(!c.source||n){s='';if(!n){if(c.protocol){s+=c.protocol+'://';}else{s+='//';}if(c.userInfo){s+=c.userInfo+'@';}if(c.host){s+=c.host;}if(c.port){s+=':'+c.port;}}if(c.path){s+=c.path;}if(c.query){s+='?'+c.query;}if(c.anchor){s+='#'+c.anchor;}c.source=s;}return c.source;}};return U;});
/**
 * Class.js
 *
 * Copyright 2003-2012, Moxiecode Systems AB, All rights reserved.
 */
C("tinymce/util/Class",["tinymce/util/Tools"],function(T){var e=T.each,a=T.extend;var b,c;function d(){}d.extend=b=function(p){var s=this,_=s.prototype,f,n,m;function d(){var i,j,k,s=this;if(!c){if(s.init){s.init.apply(s,arguments);}j=s.Mixins;if(j){i=j.length;while(i--){k=j[i];if(k.init){k.init.apply(s,arguments);}}}}}function g(){return this;}function h(n,i){return function(){var s=this,t=s._super,r;s._super=_[n];r=i.apply(s,arguments);s._super=t;return r;};}c=true;f=new s();c=false;if(p.Mixins){e(p.Mixins,function(i){i=i;for(var n in i){if(n!=="init"){p[n]=i[n];}}});if(_.Mixins){p.Mixins=_.Mixins.concat(p.Mixins);}}if(p.Methods){e(p.Methods.split(','),function(n){p[n]=g;});}if(p.Properties){e(p.Properties.split(','),function(n){var i='_'+n;p[n]=function(v){var s=this,u;if(v!==u){s[i]=v;return s;}return s[i];};});}if(p.Statics){e(p.Statics,function(i,n){d[n]=i;});}if(p.Defaults&&_.Defaults){p.Defaults=a({},_.Defaults,p.Defaults);}for(n in p){m=p[n];if(typeof m=="function"&&_[n]){f[n]=h(n,m);}else{f[n]=m;}}d.prototype=f;d.constructor=d;d.extend=b;return d;};return d;});
/**
 * EventDispatcher.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/EventDispatcher",["tinymce/util/Tools"],function(T){var n=T.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange "+"mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover "+"draggesture dragdrop drop drag submit "+"compositionstart compositionend compositionupdate touchstart touchend",' ');function a(s){var b=this,c,d={},t;function r(){return false;}function e(){return true;}s=s||{};c=s.scope||b;t=s.toggleEvent||r;function f(k,m){var p,i,l,u;k=k.toLowerCase();m=m||{};m.type=k;if(!m.target){m.target=c;}if(!m.preventDefault){m.preventDefault=function(){m.isDefaultPrevented=e;};m.stopPropagation=function(){m.isPropagationStopped=e;};m.stopImmediatePropagation=function(){m.isImmediatePropagationStopped=e;};m.isDefaultPrevented=r;m.isPropagationStopped=r;m.isImmediatePropagationStopped=r;}if(s.beforeFire){s.beforeFire(m);}p=d[k];if(p){for(i=0,l=p.length;i<l;i++){u=p[i];if(u.once){g(k,u.func);}if(m.isImmediatePropagationStopped()){m.stopPropagation();return m;}if(u.func.call(c,m)===false){m.preventDefault();return m;}}}return m;}function o(k,l,p,m){var u,v,i;if(l===false){l=r;}if(l){l={func:l};if(m){T.extend(l,m);}v=k.toLowerCase().split(' ');i=v.length;while(i--){k=v[i];u=d[k];if(!u){u=d[k]=[];t(k,true);}if(p){u.unshift(l);}else{u.push(l);}}}return b;}function g(k,l){var i,m,p,u,v;if(k){u=k.toLowerCase().split(' ');i=u.length;while(i--){k=u[i];m=d[k];if(!k){for(p in d){t(p,false);delete d[p];}return b;}if(m){if(!l){m.length=0;}else{v=m.length;while(v--){if(m[v].func===l){m=m.slice(0,v).concat(m.slice(v+1));d[k]=m;}}}if(!m.length){t(k,false);delete d[k];}}}}else{for(k in d){t(k,false);}d={};}return b;}function h(i,k,p){return o(i,k,p,{once:true});}function j(i){i=i.toLowerCase();return!(!d[i]||d[i].length===0);}b.fire=f;b.on=o;b.off=g;b.once=h;b.has=j;}a.isNative=function(b){return!!n[b.toLowerCase()];};return a;});
/**
 * Selector.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Selector",["tinymce/util/Class"],function(a){"use strict";function u(d){var f=[],i=d.length,g;while(i--){g=d[i];if(!g.__checked){f.push(g);g.__checked=1;}}i=f.length;while(i--){delete f[i].__checked;}return f;}var e=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i;var c=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,w=/^\s*|\s*$/g,b;var S=a.extend({init:function(s){var m=this.match;function d(n){if(n){n=n.toLowerCase();return function(i){return n==='*'||i.type===n;};}}function f(i){if(i){return function(l){return l._name===i;};}}function g(l){if(l){l=l.split('.');return function(n){var i=l.length;while(i--){if(!n.hasClass(l[i])){return false;}}return true;};}}function h(n,i,l){if(n){return function(o){var v=o[n]?o[n]():'';return!i?!!l:i==="="?v===l:i==="*="?v.indexOf(l)>=0:i==="~="?(" "+v+" ").indexOf(" "+l+" ")>=0:i==="!="?v!=l:i==="^="?v.indexOf(l)===0:i==="$="?v.substr(v.length-l.length)===l:false;};}}function j(n){var i;if(n){n=/(?:not\((.+)\))|(.+)/i.exec(n);if(!n[1]){n=n[2];return function(l,o,r){return n==='first'?o===0:n==='last'?o===r-1:n==='even'?o%2===0:n==='odd'?o%2===1:l[n]?l[n]():false;};}else{i=p(n[1],[]);return function(l){return!m(l,i);};}}}function k(s,i,l){var n;function o(r){if(r){i.push(r);}}n=e.exec(s.replace(w,''));o(d(n[1]));o(f(n[2]));o(g(n[3]));o(h(n[4],n[5],n[6]));o(j(n[7]));i.psuedo=!!n[7];i.direct=l;return i;}function p(s,l){var n=[],o,r,i;do{c.exec("");r=c.exec(s);if(r){s=r[3];n.push(r[1]);if(r[2]){o=r[3];break;}}}while(r);if(o){p(o,l);}s=[];for(i=0;i<n.length;i++){if(n[i]!='>'){s.push(k(n[i],[],n[i-1]==='>'));}}l.push(s);return l;}this._selectors=p(s,[]);},match:function(d,s){var i,l,f,g,h,j,k,m,n,o,p,r,t;s=s||this._selectors;for(i=0,l=s.length;i<l;i++){h=s[i];g=h.length;t=d;r=0;for(f=g-1;f>=0;f--){m=h[f];while(t){if(m.psuedo){p=t.parent().items();n=o=p.length;while(n--){if(p[n]===t){break;}}}for(j=0,k=m.length;j<k;j++){if(!m[j](t,n,o)){j=k+1;break;}}if(j===k){r++;break;}else{if(f===g-1){break;}}t=t.parent();}}if(r===g){return true;}}return false;},find:function(d){var m=[],i,l,s=this._selectors;function f(g,h,j){var i,l,k,n,o,p=h[j];for(i=0,l=g.length;i<l;i++){o=g[i];for(k=0,n=p.length;k<n;k++){if(!p[k](o,i,l)){k=n+1;break;}}if(k===n){if(j==h.length-1){m.push(o);}else{if(o.items){f(o.items(),h,j+1);}}}else if(p.direct){return;}if(o.items){f(o.items(),h,j);}}}if(d.items){for(i=0,l=s.length;i<l;i++){f(d.items(),s[i],0);}if(l>1){m=u(m);}}if(!b){b=S.Collection;}return new b(m);}});return S;});
/**
 * Collection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Collection",["tinymce/util/Tools","tinymce/ui/Selector","tinymce/util/Class"],function(T,S,a){"use strict";var b,p,c=Array.prototype.push,s=Array.prototype.slice;p={length:0,init:function(i){if(i){this.add(i);}},add:function(i){var d=this;if(!T.isArray(i)){if(i instanceof b){d.add(i.toArray());}else{c.call(d,i);}}else{c.apply(d,i);}return d;},set:function(d){var e=this,l=e.length,i;e.length=0;e.add(d);for(i=e.length;i<l;i++){delete e[i];}return e;},filter:function(d){var e=this,i,l,m=[],f,g;if(typeof(d)==="string"){d=new S(d);g=function(f){return d.match(f);};}else{g=d;}for(i=0,l=e.length;i<l;i++){f=e[i];if(g(f)){m.push(f);}}return new b(m);},slice:function(){return new b(s.apply(this,arguments));},eq:function(i){return i===-1?this.slice(i):this.slice(i,+i+1);},each:function(d){T.each(this,d);return this;},toArray:function(){return T.toArray(this);},indexOf:function(d){var e=this,i=e.length;while(i--){if(e[i]===d){break;}}return i;},reverse:function(){return new b(T.toArray(this).reverse());},hasClass:function(d){return this[0]?this[0].hasClass(d):false;},prop:function(n,v){var d=this,u,i;if(v!==u){d.each(function(i){if(i[n]){i[n](v);}});return d;}i=d[0];if(i&&i[n]){return i[n]();}},exec:function(n){var d=this,e=T.toArray(arguments).slice(1);d.each(function(i){if(i[n]){i[n].apply(i,e);}});return d;},remove:function(){var i=this.length;while(i--){this[i].remove();}return this;}};T.each('fire on off show hide addClass removeClass append prepend before after reflow'.split(' '),function(n){p[n]=function(){var d=T.toArray(arguments);this.each(function(e){if(n in e){e[n].apply(e,d);}});return this;};});T.each('text name disabled active selected checked visible parent value data'.split(' '),function(n){p[n]=function(v){return this.prop(n,v);};});b=a.extend(p);S.Collection=b;return b;});
/**
 * DOMUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/DomUtils",["tinymce/util/Tools","tinymce/dom/DOMUtils"],function(T,a){"use strict";var c=0;return{id:function(){return'mceu_'+(c++);},createFragment:function(h){return a.DOM.createFragment(h);},getWindowSize:function(){return a.DOM.getViewPort();},getSize:function(e){var w,h;if(e.getBoundingClientRect){var r=e.getBoundingClientRect();w=Math.max(r.width||(r.right-r.left),e.offsetWidth);h=Math.max(r.height||(r.bottom-r.bottom),e.offsetHeight);}else{w=e.offsetWidth;h=e.offsetHeight;}return{width:w,height:h};},getPos:function(e,r){return a.DOM.getPos(e,r);},getViewPort:function(w){return a.DOM.getViewPort(w);},get:function(i){return document.getElementById(i);},addClass:function(e,b){return a.DOM.addClass(e,b);},removeClass:function(e,b){return a.DOM.removeClass(e,b);},hasClass:function(e,b){return a.DOM.hasClass(e,b);},toggleClass:function(e,b,s){return a.DOM.toggleClass(e,b,s);},css:function(e,n,v){return a.DOM.setStyle(e,n,v);},getRuntimeStyle:function(e,n){return a.DOM.getStyle(e,n,true);},on:function(t,n,b,s){return a.DOM.bind(t,n,b,s);},off:function(t,n,b){return a.DOM.unbind(t,n,b);},fire:function(t,n,b){return a.DOM.fire(t,n,b);},innerHtml:function(e,h){a.DOM.setHTML(e,h);}};});
/**
 * Control.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Control",["tinymce/util/Class","tinymce/util/Tools","tinymce/util/EventDispatcher","tinymce/ui/Collection","tinymce/ui/DomUtils"],function(b,T,c,d,f){"use strict";var h="onmousewheel"in document;var g=false;var j="mce-";function k(o){if(!o._eventDispatcher){o._eventDispatcher=new c({scope:o,toggleEvent:function(n,s){if(s&&c.isNative(n)){if(!o._nativeEvents){o._nativeEvents={};}o._nativeEvents[n]=true;if(o._rendered){o.bindPendingEvents();}}}});}return o._eventDispatcher;}var m=b.extend({Statics:{classPrefix:j},isRtl:function(){return m.rtl;},classPrefix:j,init:function(s){var a=this,e,i;a.settings=s=T.extend({},a.Defaults,s);a._id=s.id||f.id();a._text=a._name='';a._width=a._height=0;a._aria={role:s.role};this._elmCache={};e=s.classes;if(e){e=e.split(' ');e.map={};i=e.length;while(i--){e.map[e[i]]=true;}}a._classes=e||[];a.visible(true);T.each('title text width height name classes visible disabled active value'.split(' '),function(n){var v=s[n],u;if(v!==u){a[n](v);}else if(a['_'+n]===u){a['_'+n]=false;}});a.on('click',function(){if(a.disabled()){return false;}});if(s.classes){T.each(s.classes.split(' '),function(l){a.addClass(l);});}a.settings=s;a._borderBox=a.parseBox(s.border);a._paddingBox=a.parseBox(s.padding);a._marginBox=a.parseBox(s.margin);if(s.hidden){a.hide();}},Properties:'parent,title,text,width,height,disabled,active,name,value',Methods:'renderHtml',getContainerElm:function(){return document.body;},getParentCtrl:function(e){var a,l=this.getRoot().controlIdLookup;while(e&&l){a=l[e.id];if(a){break;}e=e.parentNode;}return a;},parseBox:function(v){var l,r=10;if(!v){return;}if(typeof(v)==="number"){v=v||0;return{top:v,left:v,bottom:v,right:v};}v=v.split(' ');l=v.length;if(l===1){v[1]=v[2]=v[3]=v[0];}else if(l===2){v[2]=v[0];v[3]=v[1];}else if(l===3){v[3]=v[1];}return{top:parseInt(v[0],r)||0,right:parseInt(v[1],r)||0,bottom:parseInt(v[2],r)||0,left:parseInt(v[3],r)||0};},borderBox:function(){return this._borderBox;},paddingBox:function(){return this._paddingBox;},marginBox:function(){return this._marginBox;},measureBox:function(e,p){function i(n){var o=document.defaultView;if(o){n=n.replace(/[A-Z]/g,function(a){return'-'+a;});return o.getComputedStyle(e,null).getPropertyValue(n);}return e.currentStyle[n];}function l(n){var v=parseFloat(i(n),10);return isNaN(v)?0:v;}return{top:l(p+"TopWidth"),right:l(p+"RightWidth"),bottom:l(p+"BottomWidth"),left:l(p+"LeftWidth")};},initLayoutRect:function(){var s=this,a=s.settings,e,l;var i=s.getEl(),w,n,o,p,r;var t,u,v;e=s._borderBox=s._borderBox||s.measureBox(i,'border');s._paddingBox=s._paddingBox||s.measureBox(i,'padding');s._marginBox=s._marginBox||s.measureBox(i,'margin');v=f.getSize(i);t=a.minWidth;u=a.minHeight;o=t||v.width;p=u||v.height;w=a.width;n=a.height;r=a.autoResize;r=typeof(r)!="undefined"?r:!w&&!n;w=w||o;n=n||p;var x=e.left+e.right;var y=e.top+e.bottom;var G=a.maxWidth||0xFFFF;var H=a.maxHeight||0xFFFF;s._layoutRect=l={x:a.x||0,y:a.y||0,w:w,h:n,deltaW:x,deltaH:y,contentW:w-x,contentH:n-y,innerW:w-x,innerH:n-y,startMinWidth:t||0,startMinHeight:u||0,minW:Math.min(o,G),minH:Math.min(p,H),maxW:G,maxH:H,autoResize:r,scrollW:0};s._lastLayoutRect={};return l;},layoutRect:function(n){var s=this,a=s._layoutRect,l,e,i,o,u,r;if(!a){a=s.initLayoutRect();}if(n){i=a.deltaW;o=a.deltaH;if(n.x!==u){a.x=n.x;}if(n.y!==u){a.y=n.y;}if(n.minW!==u){a.minW=n.minW;}if(n.minH!==u){a.minH=n.minH;}e=n.w;if(e!==u){e=e<a.minW?a.minW:e;e=e>a.maxW?a.maxW:e;a.w=e;a.innerW=e-i;}e=n.h;if(e!==u){e=e<a.minH?a.minH:e;e=e>a.maxH?a.maxH:e;a.h=e;a.innerH=e-o;}e=n.innerW;if(e!==u){e=e<a.minW-i?a.minW-i:e;e=e>a.maxW-i?a.maxW-i:e;a.innerW=e;a.w=e+i;}e=n.innerH;if(e!==u){e=e<a.minH-o?a.minH-o:e;e=e>a.maxH-o?a.maxH-o:e;a.innerH=e;a.h=e+o;}if(n.contentW!==u){a.contentW=n.contentW;}if(n.contentH!==u){a.contentH=n.contentH;}l=s._lastLayoutRect;if(l.x!==a.x||l.y!==a.y||l.w!==a.w||l.h!==a.h){r=m.repaintControls;if(r){if(r.map&&!r.map[s._id]){r.push(s);r.map[s._id]=true;}}l.x=a.x;l.y=a.y;l.w=a.w;l.h=a.h;}return s;}return a;},repaint:function(){var s=this,a,e,r,i,l=0,n=0,o,p;p=!document.createRange?Math.round:function(v){return v;};a=s.getEl().style;r=s._layoutRect;o=s._lastRepaintRect||{};i=s._borderBox;l=i.left+i.right;n=i.top+i.bottom;if(r.x!==o.x){a.left=p(r.x)+'px';o.x=r.x;}if(r.y!==o.y){a.top=p(r.y)+'px';o.y=r.y;}if(r.w!==o.w){a.width=p(r.w-l)+'px';o.w=r.w;}if(r.h!==o.h){a.height=p(r.h-n)+'px';o.h=r.h;}if(s._hasBody&&r.innerW!==o.innerW){e=s.getEl('body').style;e.width=p(r.innerW)+'px';o.innerW=r.innerW;}if(s._hasBody&&r.innerH!==o.innerH){e=e||s.getEl('body').style;e.height=p(r.innerH)+'px';o.innerH=r.innerH;}s._lastRepaintRect=o;s.fire('repaint',{},false);},on:function(n,a){var s=this;function r(n){var a,i;if(typeof(n)!='string'){return n;}return function(e){if(!a){s.parentsAndSelf().each(function(l){var o=l.settings.callbacks;if(o&&(a=o[n])){i=l;return false;}});}return a.call(i,e);};}k(s).on(n,r(a));return s;},off:function(n,a){k(this).off(n,a);return this;},fire:function(n,a,e){var s=this;a=a||{};if(!a.control){a.control=s;}a=k(s).fire(n,a);if(e!==false&&s.parent){var p=s.parent();while(p&&!a.isPropagationStopped()){p.fire(n,a,false);p=p.parent();}}return a;},hasEventListeners:function(n){return k(this).has(n);},parents:function(s){var a=this,e,p=new d();for(e=a.parent();e;e=e.parent()){p.add(e);}if(s){p=p.filter(s);}return p;},parentsAndSelf:function(s){return new d(this).add(this.parents(s));},next:function(){var p=this.parent().items();return p[p.indexOf(this)+1];},prev:function(){var p=this.parent().items();return p[p.indexOf(this)-1];},findCommonAncestor:function(a,e){var p;while(a){p=e;while(p&&a!=p){p=p.parent();}if(a==p){break;}a=a.parent();}return a;},hasClass:function(a,e){var i=this._classes[e||'control'];a=this.classPrefix+a;return i&&!!i.map[a];},addClass:function(a,e){var s=this,i,l;a=this.classPrefix+a;i=s._classes[e||'control'];if(!i){i=[];i.map={};s._classes[e||'control']=i;}if(!i.map[a]){i.map[a]=a;i.push(a);if(s._rendered){l=s.getEl(e);if(l){l.className=i.join(' ');}}}return s;},removeClass:function(a,e){var s=this,l,i,n;a=this.classPrefix+a;l=s._classes[e||'control'];if(l&&l.map[a]){delete l.map[a];i=l.length;while(i--){if(l[i]===a){l.splice(i,1);}}}if(s._rendered){n=s.getEl(e);if(n){n.className=l.join(' ');}}return s;},toggleClass:function(a,s,e){var i=this;if(s){i.addClass(a,e);}else{i.removeClass(a,e);}return i;},classes:function(a){var e=this._classes[a||'control'];return e?e.join(' '):'';},innerHtml:function(a){f.innerHtml(this.getEl(),a);return this;},getEl:function(s){var i=s?this._id+'-'+s:this._id;if(!this._elmCache[i]){this._elmCache[i]=f.get(i);}return this._elmCache[i];},visible:function(s){var a=this,p;if(typeof(s)!=="undefined"){if(a._visible!==s){if(a._rendered){a.getEl().style.display=s?'':'none';}a._visible=s;p=a.parent();if(p){p._lastRect=null;}a.fire(s?'show':'hide');}return a;}return a._visible;},show:function(){return this.visible(true);},hide:function(){return this.visible(false);},focus:function(){try{this.getEl().focus();}catch(e){}return this;},blur:function(){this.getEl().blur();return this;},aria:function(n,v){var s=this,e=s.getEl(s.ariaTarget);if(typeof(v)==="undefined"){return s._aria[n];}else{s._aria[n]=v;}if(s._rendered){e.setAttribute(n=='role'?n:'aria-'+n,v);}return s;},encode:function(t,a){if(a!==false){t=this.translate(t);}return(t||'').replace(/[&<>"]/g,function(e){return'&#'+e.charCodeAt(0)+';';});},translate:function(t){return m.translate?m.translate(t):t;},before:function(i){var s=this,p=s.parent();if(p){p.insert(i,p.items().indexOf(s),true);}return s;},after:function(i){var s=this,p=s.parent();if(p){p.insert(i,p.items().indexOf(s));}return s;},remove:function(){var s=this,e=s.getEl(),p=s.parent(),n,i;if(s.items){var a=s.items().toArray();i=a.length;while(i--){a[i].remove();}}if(p&&p.items){n=[];p.items().each(function(o){if(o!==s){n.push(o);}});p.items().set(n);p._lastRect=null;}if(s._eventsRoot&&s._eventsRoot==s){f.off(e);}var l=s.getRoot().controlIdLookup;if(l){delete l[s._id];}if(e&&e.parentNode){e.parentNode.removeChild(e);}s._rendered=false;return s;},renderBefore:function(e){var s=this;e.parentNode.insertBefore(f.createFragment(s.renderHtml()),e);s.postRender();return s;},renderTo:function(e){var s=this;e=e||s.getContainerElm();e.appendChild(f.createFragment(s.renderHtml()));s.postRender();return s;},postRender:function(){var s=this,a=s.settings,e,i,p,n,l;for(n in a){if(n.indexOf("on")===0){s.on(n.substr(2),a[n]);}}if(s._eventsRoot){for(p=s.parent();!l&&p;p=p.parent()){l=p._eventsRoot;}if(l){for(n in l._nativeEvents){s._nativeEvents[n]=true;}}}s.bindPendingEvents();if(a.style){e=s.getEl();if(e){e.setAttribute('style',a.style);e.style.cssText=a.style;}}if(!s._visible){f.css(s.getEl(),'display','none');}if(s.settings.border){i=s.borderBox();f.css(s.getEl(),{'border-top-width':i.top,'border-right-width':i.right,'border-bottom-width':i.bottom,'border-left-width':i.left});}var r=s.getRoot();if(!r.controlIdLookup){r.controlIdLookup={};}r.controlIdLookup[s._id]=s;for(var o in s._aria){s.aria(o,s._aria[o]);}s.fire('postrender',{},false);},scrollIntoView:function(a){function e(i,s){var x,y,t=i;x=y=0;while(t&&t!=s&&t.nodeType){x+=t.offsetLeft||0;y+=t.offsetTop||0;t=t.offsetParent;}return{x:x,y:y};}var i=this.getEl(),p=i.parentNode;var x,y,w,l,n,o;var r=e(i,p);x=r.x;y=r.y;w=i.offsetWidth;l=i.offsetHeight;n=p.clientWidth;o=p.clientHeight;if(a=="end"){x-=n-w;y-=o-l;}else if(a=="center"){x-=(n/2)-(w/2);y-=(o/2)-(l/2);}p.scrollLeft=x;p.scrollTop=y;return this;},bindPendingEvents:function(){var s=this,i,l,p,a,n,o;function r(e){var x=s.getParentCtrl(e.target);if(x){x.fire(e.type,e);}}function t(){var e=a._lastHoverCtrl;if(e){e.fire("mouseleave",{target:e.getEl()});e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()});});a._lastHoverCtrl=null;}}function u(e){var x=s.getParentCtrl(e.target),y=a._lastHoverCtrl,G=0,i,p,H;if(x!==y){a._lastHoverCtrl=x;p=x.parents().toArray().reverse();p.push(x);if(y){H=y.parents().toArray().reverse();H.push(y);for(G=0;G<H.length;G++){if(p[G]!==H[G]){break;}}for(i=H.length-1;i>=G;i--){y=H[i];y.fire("mouseleave",{target:y.getEl()});}}for(i=G;i<p.length;i++){x=p[i];x.fire("mouseenter",{target:x.getEl()});}}}function v(e){e.preventDefault();if(e.type=="mousewheel"){e.deltaY=-1/40*e.wheelDelta;if(e.wheelDeltaX){e.deltaX=-1/40*e.wheelDeltaX;}}else{e.deltaX=0;e.deltaY=e.detail;}e=s.fire("wheel",e);}s._rendered=true;n=s._nativeEvents;if(n){p=s.parents().toArray();p.unshift(s);for(i=0,l=p.length;!a&&i<l;i++){a=p[i]._eventsRoot;}if(!a){a=p[p.length-1]||s;}s._eventsRoot=a;for(l=i,i=0;i<l;i++){p[i]._eventsRoot=a;}var w=a._delegates;if(!w){w=a._delegates={};}for(o in n){if(!n){return false;}if(o==="wheel"&&!g){if(h){f.on(s.getEl(),"mousewheel",v);}else{f.on(s.getEl(),"DOMMouseScroll",v);}continue;}if(o==="mouseenter"||o==="mouseleave"){if(!a._hasMouseEnter){f.on(a.getEl(),"mouseleave",t);f.on(a.getEl(),"mouseover",u);a._hasMouseEnter=1;}}else if(!w[o]){f.on(a.getEl(),o,r);w[o]=true;}n[o]=false;}}},getRoot:function(){var a=this,r,p=[];while(a){if(a.rootControl){r=a.rootControl;break;}p.push(a);r=a;a=a.parent();}if(!r){r=this;}var i=p.length;while(i--){p[i].rootControl=r;}return r;},reflow:function(){this.repaint();return this;}});return m;});
/**
 * Factory.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Factory",[],function(){"use strict";var t={},n;return{add:function(a,b){t[a.toLowerCase()]=b;},has:function(a){return!!t[a.toLowerCase()];},create:function(a,s){var b,c,d;if(!n){d=tinymce.ui;for(c in d){t[c.toLowerCase()]=d[c];}n=true;}if(typeof(a)=='string'){s=s||{};s.type=a;}else{s=a;a=s.type;}a=a.toLowerCase();b=t[a];if(!b){throw new Error("Could not find control by type: "+a);}b=new b(s);b.type=a;return b;}};});
/**
 * KeyboardNavigation.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/KeyboardNavigation",[],function(){"use strict";return function(s){var r=s.root,f,a;try{f=document.activeElement;}catch(b){f=document.body;}a=r.getParentCtrl(f);function g(e){e=e||f;return e&&e.getAttribute('role');}function c(e){var i,G=e||f;while((G=G.parentNode)){if((i=g(G))){return i;}}}function d(e){var i=f;if(i){return i.getAttribute('aria-'+e);}}function h(e){var i=e.tagName.toUpperCase();return i=="INPUT"||i=="TEXTAREA";}function j(e){if(h(e)&&!e.hidden){return true;}if(/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(g(e))){return true;}return false;}function k(e){var G=[];function H(e){if(e.nodeType!=1||e.style.display=='none'){return;}if(j(e)){G.push(e);}for(var i=0;i<e.childNodes.length;i++){H(e.childNodes[i]);}}H(e||r.getEl());return G;}function l(e){var G,H;e=e||a;H=e.parents().toArray();H.unshift(e);for(var i=0;i<H.length;i++){G=H[i];if(G.settings.ariaRoot){break;}}return G;}function m(e){var i=l(e);var G=k(i.getEl());if(i.settings.ariaRemember&&"lastAriaIndex"in i){n(i.lastAriaIndex,G);}else{n(0,G);}}function n(i,e){if(i<0){i=e.length-1;}else if(i>=e.length){i=0;}if(e[i]){e[i].focus();}return i;}function o(e,G){var H=-1,I=l();G=G||k(I.getEl());for(var i=0;i<G.length;i++){if(G[i]===f){H=i;}}H+=e;I.lastAriaIndex=n(H,G);}function p(){var e=c();if(e=="tablist"){o(-1,k(f.parentNode));}else if(a.parent().submenu){x();}else{o(-1);}}function t(){var e=g(),i=c();if(i=="tablist"){o(1,k(f.parentNode));}else if(e=="menuitem"&&i=="menu"&&d('haspopup')){y();}else{o(1);}}function u(){o(-1);}function v(){var e=g(),i=c();if(e=="menuitem"&&i=="menubar"){y();}else if(e=="button"&&d('haspopup')){y({key:'down'});}else{o(1);}}function w(e){var i=c();if(i=="tablist"){var G=k(a.getEl('body'))[0];if(G){G.focus();}}else{o(e.shiftKey?-1:1);}}function x(){a.fire('cancel');}function y(e){e=e||{};a.fire('click',{target:f,aria:e});}r.on('keydown',function(e){function i(e,G){if(h(f)){return;}if(G(e)!==false){e.preventDefault();}}if(e.isDefaultPrevented()){return;}switch(e.keyCode){case 37:i(e,p);break;case 39:i(e,t);break;case 38:i(e,u);break;case 40:i(e,v);break;case 27:x();break;case 14:case 13:case 32:i(e,y);break;case 9:if(w(e)!==false){e.preventDefault();}break;}});r.on('focusin',function(e){f=e.target;a=e.control;});return{focusFirst:m};};});
/**
 * Container.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Container",["tinymce/ui/Control","tinymce/ui/Collection","tinymce/ui/Selector","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/util/Tools","tinymce/ui/DomUtils"],function(a,b,S,c,K,T,d){"use strict";var s={};return a.extend({layout:'',innerClass:'container-inner',init:function(e){var f=this;f._super(e);e=f.settings;f._fixed=e.fixed;f._items=new b();if(f.isRtl()){f.addClass('rtl');}f.addClass('container');f.addClass('container-body','body');if(e.containerCls){f.addClass(e.containerCls);}f._layout=c.create((e.layout||f.layout)+'layout');if(f.settings.items){f.add(f.settings.items);}f._hasBody=true;},items:function(){return this._items;},find:function(e){e=s[e]=s[e]||new S(e);return e.find(this);},add:function(i){var e=this;e.items().add(e.create(i)).parent(e);return e;},focus:function(k){var e=this,f,g,i;if(k){g=e.keyboardNav||e.parents().eq(-1)[0].keyboardNav;if(g){g.focusFirst(e);return;}}i=e.find('*');if(e.statusbar){i.add(e.statusbar.items());}i.each(function(h){if(h.settings.autofocus){f=null;return false;}if(h.canFocus){f=f||h;}});if(f){f.focus();}return e;},replace:function(o,n){var e,f=this.items(),i=f.length;while(i--){if(f[i]===o){f[i]=n;break;}}if(i>=0){e=n.getEl();if(e){e.parentNode.removeChild(e);}e=o.getEl();if(e){e.parentNode.removeChild(e);}}n.parent(this);},create:function(i){var e=this,f,g=[];if(!T.isArray(i)){i=[i];}T.each(i,function(h){if(h){if(!(h instanceof a)){if(typeof(h)=="string"){h={type:h};}f=T.extend({},e.settings.defaults,h);h.type=f.type=f.type||h.type||e.settings.defaultType||(f.defaults?f.defaults.type:null);h=c.create(f);}g.push(h);}});return g;},renderNew:function(){var e=this;e.items().each(function(f,i){var g,h;f.parent(e);if(!f._rendered){g=e.getEl('body');h=d.createFragment(f.renderHtml());if(g.hasChildNodes()&&i<=g.childNodes.length-1){g.insertBefore(h,g.childNodes[i]);}else{g.appendChild(h);}f.postRender();}});e._layout.applyClasses(e);e._lastRect=null;return e;},append:function(i){return this.add(i).renderNew();},prepend:function(i){var e=this;e.items().set(e.create(i).concat(e.items().toArray()));return e.renderNew();},insert:function(i,e,f){var g=this,h,j,k;i=g.create(i);h=g.items();if(!f&&e<h.length-1){e+=1;}if(e>=0&&e<h.length){j=h.slice(0,e).toArray();k=h.slice(e).toArray();h.set(j.concat(i,k));}return g.renderNew();},fromJSON:function(e){var f=this;for(var n in e){f.find('#'+n).value(e[n]);}return f;},toJSON:function(){var e=this,f={};e.find('*').each(function(g){var n=g.name(),v=g.value();if(n&&typeof(v)!="undefined"){f[n]=v;}});return f;},preRender:function(){},renderHtml:function(){var e=this,l=e._layout,r=this.settings.role;e.preRender();l.preRender(e);return('<div id="'+e._id+'" class="'+e.classes()+'"'+(r?' role="'+this.settings.role+'"':'')+'>'+'<div id="'+e._id+'-body" class="'+e.classes('body')+'">'+(e.settings.html||'')+l.renderHtml(e)+'</div>'+'</div>');},postRender:function(){var e=this,f;e.items().exec('postRender');e._super();e._layout.postRender(e);e._rendered=true;if(e.settings.style){d.css(e.getEl(),e.settings.style);}if(e.settings.border){f=e.borderBox();d.css(e.getEl(),{'border-top-width':f.top,'border-right-width':f.right,'border-bottom-width':f.bottom,'border-left-width':f.left});}if(!e.parent()){e.keyboardNav=new K({root:e});}return e;},initLayoutRect:function(){var e=this,l=e._super();e._layout.recalc(e);return l;},recalc:function(){var e=this,r=e._layoutRect,l=e._lastRect;if(!l||l.w!=r.w||l.h!=r.h){e._layout.recalc(e);r=e.layoutRect();e._lastRect={x:r.x,y:r.y,w:r.w,h:r.h};return true;}},reflow:function(){var i;if(this.visible()){a.repaintControls=[];a.repaintControls.map={};this.recalc();i=a.repaintControls.length;while(i--){a.repaintControls[i].repaint();}if(this.settings.layout!=="flow"&&this.settings.layout!=="stack"){this.repaint();}a.repaintControls=[];}return this;}});});
/**
 * DragHelper.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/DragHelper",["tinymce/ui/DomUtils"],function(a){"use strict";function g(){var d=document,b,c,s,e;var o,f,h,i,m=Math.max;b=d.documentElement;c=d.body;s=m(b.scrollWidth,c.scrollWidth);e=m(b.clientWidth,c.clientWidth);o=m(b.offsetWidth,c.offsetWidth);f=m(b.scrollHeight,c.scrollHeight);h=m(b.clientHeight,c.clientHeight);i=m(b.offsetHeight,c.offsetHeight);return{width:s<o?e:s,height:f<i?h:f};}return function(i,s){var b,d=document,c,f,h,j,k,l;s=s||{};function m(){return d.getElementById(s.handle||i);}f=function(e){var n=g(),o,p;e.preventDefault();c=e.button;o=m();k=e.screenX;l=e.screenY;if(window.getComputedStyle){p=window.getComputedStyle(o,null).getPropertyValue("cursor");}else{p=o.runtimeStyle.cursor;}b=d.createElement('div');a.css(b,{position:"absolute",top:0,left:0,width:n.width,height:n.height,zIndex:0x7FFFFFFF,opacity:0.0001,cursor:p});d.body.appendChild(b);a.on(d,'mousemove',j);a.on(d,'mouseup',h);s.start(e);};j=function(e){if(e.button!==c){return h(e);}e.deltaX=e.screenX-k;e.deltaY=e.screenY-l;e.preventDefault();s.drag(e);};h=function(e){a.off(d,'mousemove',j);a.off(d,'mouseup',h);b.parentNode.removeChild(b);if(s.stop){s.stop(e);}};this.destroy=function(){a.off(m());};a.on(m(),'mousedown',f);};});
/**
 * Scrollable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Scrollable",["tinymce/ui/DomUtils","tinymce/ui/DragHelper"],function(a,b){"use strict";return{init:function(){var s=this;s.on('repaint',s.renderScroll);},renderScroll:function(){var s=this,m=2;function r(){var h,d,e;function f(g,p,i,j,k,l){var n,o,t;var u,v,w,x;var y,G;o=s.getEl('scroll'+g);if(o){y=p.toLowerCase();G=i.toLowerCase();if(s.getEl('absend')){a.css(s.getEl('absend'),y,s.layoutRect()[j]-1);}if(!k){a.css(o,'display','none');return;}a.css(o,'display','block');n=s.getEl('body');t=s.getEl('scroll'+g+"t");u=n["client"+i]-(m*2);u-=h&&d?o["client"+l]:0;v=n["scroll"+i];w=u/v;x={};x[y]=n["offset"+p]+m;x[G]=u;a.css(o,x);x={};x[y]=n["scroll"+p]*w;x[G]=u*w;a.css(t,x);}}e=s.getEl('body');h=e.scrollWidth>e.clientWidth;d=e.scrollHeight>e.clientHeight;f("h","Left","Width","contentW",h,"Height");f("v","Top","Height","contentH",d,"Width");}function c(){function d(f,p,g,h,i){var j,k=s._id+'-scroll'+f,l=s.classPrefix;s.getEl().appendChild(a.createFragment('<div id="'+k+'" class="'+l+'scrollbar '+l+'scrollbar-'+f+'">'+'<div id="'+k+'t" class="'+l+'scrollbar-thumb"></div>'+'</div>'));s.draghelper=new b(k+'t',{start:function(){j=s.getEl('body')["scroll"+p];a.addClass(a.get(k),l+'active');},drag:function(e){var n,o,t,u,v=s.layoutRect();o=v.contentW>v.innerW;t=v.contentH>v.innerH;u=s.getEl('body')["client"+g]-(m*2);u-=o&&t?s.getEl('scroll'+f)["client"+i]:0;n=u/s.getEl('body')["scroll"+g];s.getEl('body')["scroll"+p]=j+(e["delta"+h]/n);},stop:function(){a.removeClass(a.get(k),l+'active');}});}s.addClass('scroll');d("v","Top","Height","Y","Width");d("h","Left","Width","X","Height");}if(s.settings.autoScroll){if(!s._hasScroll){s._hasScroll=true;c();s.on('wheel',function(e){var d=s.getEl('body');d.scrollLeft+=(e.deltaX||0)*10;d.scrollTop+=e.deltaY*10;r();});a.on(s.getEl('body'),"scroll",r);}r();}}};});
/**
 * Panel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Panel",["tinymce/ui/Container","tinymce/ui/Scrollable"],function(a,S){"use strict";return a.extend({Defaults:{layout:'fit',containerCls:'panel'},Mixins:[S],renderHtml:function(){var s=this,l=s._layout,i=s.settings.html;s.preRender();l.preRender(s);if(typeof(i)=="undefined"){i=('<div id="'+s._id+'-body" class="'+s.classes('body')+'">'+l.renderHtml(s)+'</div>');}else{if(typeof(i)=='function'){i=i.call(s);}s._hasBody=false;}return('<div id="'+s._id+'" class="'+s.classes()+'" hidefocus="1" tabindex="-1" role="group">'+(s._preBodyHtml||'')+i+'</div>');}});});
/**
 * Movable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Movable",["tinymce/ui/DomUtils"],function(a){"use strict";function c(b,t,r){var d,p,x,y,s,e,f,g,v,h;v=a.getViewPort();p=a.getPos(t);x=p.x;y=p.y;if(b._fixed&&a.getRuntimeStyle(document.body,'position')=='static'){x-=v.x;y-=v.y;}d=b.getEl();h=a.getSize(d);s=h.width;e=h.height;h=a.getSize(t);f=h.width;g=h.height;r=(r||'').split('');if(r[0]==='b'){y+=g;}if(r[1]==='r'){x+=f;}if(r[0]==='c'){y+=Math.round(g/2);}if(r[1]==='c'){x+=Math.round(f/2);}if(r[3]==='b'){y-=e;}if(r[4]==='r'){x-=s;}if(r[3]==='c'){y-=Math.round(e/2);}if(r[4]==='c'){x-=Math.round(s/2);}return{x:x,y:y,w:s,h:e};}return{testMoveRel:function(e,r){var v=a.getViewPort();for(var i=0;i<r.length;i++){var p=c(this,e,r[i]);if(this._fixed){if(p.x>0&&p.x+p.w<v.w&&p.y>0&&p.y+p.h<v.h){return r[i];}}else{if(p.x>v.x&&p.x+p.w<v.w+v.x&&p.y>v.y&&p.y+p.h<v.h+v.y){return r[i];}}}return r[0];},moveRel:function(e,r){if(typeof(r)!='string'){r=this.testMoveRel(e,r);}var p=c(this,e,r);return this.moveTo(p.x,p.y);},moveBy:function(d,b){var s=this,r=s.layoutRect();s.moveTo(r.x+d,r.y+b);return s;},moveTo:function(x,y){var s=this;function b(d,m,e){if(d<0){return 0;}if(d+e>m){d=m-e;return d<0?0:d;}return d;}if(s.settings.constrainToViewport){var v=a.getViewPort(window);var l=s.layoutRect();x=b(x,v.w+v.x,l.w);y=b(y,v.h+v.y,l.h);}if(s._rendered){s.layoutRect({x:x,y:y}).repaint();}else{s.settings.x=x;s.settings.y=y;}s.fire('move',{x:x,y:y});return s;}};});
/**
 * Resizable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Resizable",["tinymce/ui/DomUtils"],function(a){"use strict";return{resizeToContent:function(){this._layoutRect.autoResize=true;this._lastRect=null;this.reflow();},resizeTo:function(w,h){if(w<=1||h<=1){var r=a.getWindowSize();w=w<=1?w*r.w:w;h=h<=1?h*r.h:h;}this._layoutRect.autoResize=false;return this.layoutRect({minW:w,minH:h,w:w,h:h}).reflow();},resizeBy:function(d,b){var s=this,r=s.layoutRect();return s.resizeTo(r.w+d,r.h+b);}};});
/**
 * FloatPanel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/FloatPanel",["tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/DomUtils"],function(P,M,R,a){"use strict";var d,b,w,v=[];var c=[],h;function f(){function n(e,p){while(e){if(e==p){return true;}e=e.parent();}}if(!d){d=function(e){if(e.button==2){return;}var i=v.length;while(i--){var p=v[i],o=p.getParentCtrl(e.target);if(p.settings.autohide){if(o){if(n(o,p)||p.parent()===o){continue;}}e=p.fire('autohide',{target:e.target});if(!e.isDefaultPrevented()){p.hide();}}}};a.on(document,'click',d);}}function g(){if(!b){b=function(){var i;i=v.length;while(i--){r(v[i]);}};a.on(window,'scroll',b);}}function j(){if(!w){var e=document.documentElement,i=e.clientWidth,n=e.clientHeight;w=function(){if(!document.all||i!=e.clientWidth||n!=e.clientHeight){i=e.clientWidth;n=e.clientHeight;l.hideAll();}};a.on(window,'resize',w);}}function r(p){var s=a.getViewPort().y;function t(e,n){var o;for(var i=0;i<v.length;i++){if(v[i]!=p){o=v[i].parent();while(o&&(o=o.parent())){if(o==p){v[i].fixed(e).moveBy(0,n).repaint();}}}}}if(p.settings.autofix){if(!p._fixed){p._autoFixY=p.layoutRect().y;if(p._autoFixY<s){p.fixed(true).layoutRect({y:0}).repaint();t(true,s-p._autoFixY);}}else{if(p._autoFixY>s){p.fixed(false).layoutRect({y:p._autoFixY}).repaint();t(false,p._autoFixY-s);}}}}function k(e,n){var i,o=l.zIndex||0xFFFF,t;if(e){c.push(n);}else{i=c.length;while(i--){if(c[i]===n){c.splice(i,1);}}}if(c.length){for(i=0;i<c.length;i++){if(c[i].modal){o++;t=c[i];}c[i].getEl().style.zIndex=o;c[i].zIndex=o;o++;}}var p=document.getElementById(n.classPrefix+'modal-block');if(t){a.css(p,'z-index',t.zIndex-1);}else if(p){p.parentNode.removeChild(p);h=false;}l.currentZIndex=o;}var l=P.extend({Mixins:[M,R],init:function(s){var i=this;i._super(s);i._eventsRoot=i;i.addClass('floatpanel');if(s.autohide){f();j();v.push(i);}if(s.autofix){g();i.on('move',function(){r(this);});}i.on('postrender show',function(e){if(e.control==i){var n,p=i.classPrefix;if(i.modal&&!h){n=a.createFragment('<div id="'+p+'modal-block" class="'+p+'reset '+p+'fade"></div>');n=n.firstChild;i.getContainerElm().appendChild(n);setTimeout(function(){a.addClass(n,p+'in');a.addClass(i.getEl(),p+'in');},0);h=true;}k(true,i);}});i.on('show',function(){i.parents().each(function(e){if(e._fixed){i.fixed(true);return false;}});});if(s.popover){i._preBodyHtml='<div class="'+i.classPrefix+'arrow"></div>';i.addClass('popover').addClass('bottom').addClass(i.isRtl()?'end':'start');}},fixed:function(s){var e=this;if(e._fixed!=s){if(e._rendered){var i=a.getViewPort();if(s){e.layoutRect().y-=i.y;}else{e.layoutRect().y+=i.y;}}e.toggleClass('fixed',s);e._fixed=s;}return e;},show:function(){var s=this,i,e=s._super();i=v.length;while(i--){if(v[i]===s){break;}}if(i===-1){v.push(s);}return e;},hide:function(){m(this);k(false,this);return this._super();},hideAll:function(){l.hideAll();},close:function(){var s=this;if(!s.fire('close').isDefaultPrevented()){s.remove();k(false,s);}return s;},remove:function(){m(this);this._super();},postRender:function(){var s=this;if(s.settings.bodyRole){this.getEl('body').setAttribute('role',s.settings.bodyRole);}return s._super();}});l.hideAll=function(){var i=v.length;while(i--){var p=v[i];if(p&&p.settings.autohide){p.hide();v.splice(i,1);}}};function m(p){var i;i=v.length;while(i--){if(v[i]===p){v.splice(i,1);}}i=c.length;while(i--){if(c[i]===p){c.splice(i,1);}}}return l;});
/**
 * Window.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Window",["tinymce/ui/FloatPanel","tinymce/ui/Panel","tinymce/ui/DomUtils","tinymce/ui/DragHelper"],function(a,P,b,c){"use strict";var W=a.extend({modal:true,Defaults:{border:1,layout:'flex',containerCls:'panel',role:'dialog',callbacks:{submit:function(){this.fire('submit',{data:this.toJSON()});},close:function(){this.close();}}},init:function(s){var d=this;d._super(s);if(d.isRtl()){d.addClass('rtl');}d.addClass('window');d._fixed=true;if(s.buttons){d.statusbar=new P({layout:'flex',border:'1 0 0 0',spacing:3,padding:10,align:'center',pack:d.isRtl()?'start':'end',defaults:{type:'button'},items:s.buttons});d.statusbar.addClass('foot');d.statusbar.parent(d);}d.on('click',function(e){if(e.target.className.indexOf(d.classPrefix+'close')!=-1){d.close();}});d.on('cancel',function(){d.close();});d.aria('describedby',d.describedBy||d._id+'-none');d.aria('label',s.title);d._fullscreen=false;},recalc:function(){var s=this,d=s.statusbar,l,w,x,n;if(s._fullscreen){s.layoutRect(b.getWindowSize());s.layoutRect().contentH=s.layoutRect().innerH;}s._super();l=s.layoutRect();if(s.settings.title&&!s._fullscreen){w=l.headerW;if(w>l.w){x=l.x-Math.max(0,w/2);s.layoutRect({w:w,x:x});n=true;}}if(d){d.layoutRect({w:s.layoutRect().innerW}).recalc();w=d.layoutRect().minW+l.deltaW;if(w>l.w){x=l.x-Math.max(0,w-l.w);s.layoutRect({w:w,x:x});n=true;}}if(n){s.recalc();}},initLayoutRect:function(){var s=this,l=s._super(),d=0,h;if(s.settings.title&&!s._fullscreen){h=s.getEl('head');var e=b.getSize(h);l.headerW=e.width;l.headerH=e.height;d+=l.headerH;}if(s.statusbar){d+=s.statusbar.layoutRect().h;}l.deltaH+=d;l.minH+=d;l.h+=d;var r=b.getWindowSize();l.x=Math.max(0,r.w/2-l.w/2);l.y=Math.max(0,r.h/2-l.h/2);return l;},renderHtml:function(){var s=this,l=s._layout,i=s._id,p=s.classPrefix;var d=s.settings,h='',f='',e=d.html;s.preRender();l.preRender(s);if(d.title){h=('<div id="'+i+'-head" class="'+p+'window-head">'+'<div id="'+i+'-title" class="'+p+'title">'+s.encode(d.title)+'</div>'+'<button type="button" class="'+p+'close" aria-hidden="true">\u00d7</button>'+'<div id="'+i+'-dragh" class="'+p+'dragh"></div>'+'</div>');}if(d.url){e='<iframe src="'+d.url+'" tabindex="-1"></iframe>';}if(typeof(e)=="undefined"){e=l.renderHtml(s);}if(s.statusbar){f=s.statusbar.renderHtml();}return('<div id="'+i+'" class="'+s.classes()+'" hidefocus="1">'+'<div class="'+s.classPrefix+'reset" role="application">'+h+'<div id="'+i+'-body" class="'+s.classes('body')+'">'+e+'</div>'+f+'</div>'+'</div>');},fullscreen:function(s){var d=this,e=document.documentElement,f,p=d.classPrefix,l;if(s!=d._fullscreen){b.on(window,'resize',function(){var t;if(d._fullscreen){if(!f){t=new Date().getTime();var r=b.getWindowSize();d.moveTo(0,0).resizeTo(r.w,r.h);if((new Date().getTime())-t>50){f=true;}}else{if(!d._timer){d._timer=setTimeout(function(){var r=b.getWindowSize();d.moveTo(0,0).resizeTo(r.w,r.h);d._timer=0;},50);}}}});l=d.layoutRect();d._fullscreen=s;if(!s){d._borderBox=d.parseBox(d.settings.border);d.getEl('head').style.display='';l.deltaH+=l.headerH;b.removeClass(e,p+'fullscreen');b.removeClass(document.body,p+'fullscreen');d.removeClass('fullscreen');d.moveTo(d._initial.x,d._initial.y).resizeTo(d._initial.w,d._initial.h);}else{d._initial={x:l.x,y:l.y,w:l.w,h:l.h};d._borderBox=d.parseBox('0');d.getEl('head').style.display='none';l.deltaH-=l.headerH+2;b.addClass(e,p+'fullscreen');b.addClass(document.body,p+'fullscreen');d.addClass('fullscreen');var r=b.getWindowSize();d.moveTo(0,0).resizeTo(r.w,r.h);}}return d.reflow();},postRender:function(){var s=this,d;setTimeout(function(){s.addClass('in');},0);s._super();if(s.statusbar){s.statusbar.postRender();}s.focus();this.dragHelper=new c(s._id+'-dragh',{start:function(){d={x:s.layoutRect().x,y:s.layoutRect().y};},drag:function(e){s.moveTo(d.x+e.deltaX,d.y+e.deltaY);}});s.on('submit',function(e){if(!e.isDefaultPrevented()){s.close();}});},submit:function(){return this.fire('submit',{data:this.toJSON()});},remove:function(){var s=this,p=s.classPrefix;s.dragHelper.destroy();s._super();if(s.statusbar){this.statusbar.remove();}if(s._fullscreen){b.removeClass(document.documentElement,p+'fullscreen');b.removeClass(document.body,p+'fullscreen');}},getContentWindow:function(){var i=this.getEl().getElementsByTagName('iframe')[0];return i?i.contentWindow:null;}});return W;});
/**
 * MessageBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/MessageBox",["tinymce/ui/Window"],function(W){"use strict";var M=W.extend({init:function(s){s={border:1,padding:20,layout:'flex',pack:"center",align:"center",containerCls:'panel',autoScroll:true,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:true,maxWidth:500,maxHeight:200}};this._super(s);},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(s){var b,c=s.callback||function(){};function a(t,d,p){return{type:"button",text:t,subtype:p?'primary':'',onClick:function(e){e.control.parents()[1].close();c(d);}};}switch(s.buttons){case M.OK_CANCEL:b=[a('Ok',true,true),a('Cancel',false)];break;case M.YES_NO:case M.YES_NO_CANCEL:b=[a('Yes',1,true),a('No',0)];if(s.buttons==M.YES_NO_CANCEL){b.push(a('Cancel',-1));}break;default:b=[a('Ok',true,true)];break;}return new W({padding:20,x:s.x,y:s.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:b,title:s.title,role:'alertdialog',items:{type:"label",multiline:true,maxWidth:500,maxHeight:200,text:s.text},onPostRender:function(){this.aria('describedby',this.items()[0]._id);},onClose:s.onClose,onCancel:function(){c(false);}}).renderTo(document.body).reflow();},alert:function(s,c){if(typeof(s)=="string"){s={text:s};}s.callback=c;return M.msgBox(s);},confirm:function(s,c){if(typeof(s)=="string"){s={text:s};}s.callback=c;s.buttons=M.OK_CANCEL;return M.msgBox(s);}}});return M;});
/**
 * WindowManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/WindowManager",["tinymce/ui/Window","tinymce/ui/MessageBox"],function(W,M){return function(e){var s=this,w=[];function g(){if(w.length){return w[w.length-1];}}s.windows=w;e.on('remove',function(){var i=w.length;while(i--){w[i].close();}});s.open=function(a,p){var b;e.editorManager.setActive(e);a.title=a.title||' ';a.url=a.url||a.file;if(a.url){a.width=parseInt(a.width||320,10);a.height=parseInt(a.height||240,10);}if(a.body){a.items={defaults:a.defaults,type:a.bodyType||'form',items:a.body};}if(!a.url&&!a.buttons){a.buttons=[{text:'Ok',subtype:'primary',onclick:function(){b.find('form')[0].submit();}},{text:'Cancel',onclick:function(){b.close();}}];}b=new W(a);w.push(b);b.on('close',function(){var i=w.length;while(i--){if(w[i]===b){w.splice(i,1);}}if(!w.length){e.focus();}});if(a.data){b.on('postRender',function(){this.find('*').each(function(c){var n=c.name();if(n in a.data){c.value(a.data[n]);}});});}b.features=a||{};b.params=p||{};if(w.length===1){e.nodeChanged();}return b.renderTo().reflow();};s.alert=function(m,c,a){M.alert(m,function(){if(c){c.call(a||this);}else{e.focus();}});};s.confirm=function(m,c,a){M.confirm(m,function(b){c.call(a||this,b);});};s.close=function(){if(g()){g().close();}};s.getParams=function(){return g()?g().params:null;};s.setParams=function(p){if(g()){g().params=p;}};s.getWindows=function(){return w;};};});
/**
 * Quirks.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */
C("tinymce/util/Quirks",["tinymce/util/VK","tinymce/dom/RangeUtils","tinymce/html/Node","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools"],function(V,R,N,a,b,T){return function(c){var d=T.each;var f=V.BACKSPACE,g=V.DELETE,h=c.dom,s=c.selection,k=c.settings,p=c.parser,l=c.serializer;var m=b.gecko,n=b.ie,o=b.webkit;function r(e,i){try{c.getDoc().execCommand(e,false,i);}catch(j){}}function t(){var e=c.getDoc().documentMode;return e?e:6;}function u(e){return e.isDefaultPrevented();}function v(){var i=c.getDoc(),j='data:text/mce-internal,';var x=window.MutationObserver,y,m1;if(!x){y=true;x=function(){var o1=[],p1;function q1(e){var p1=e.relatedNode||e.target;o1.push({target:p1,addedNodes:[p1]});}function r1(e){var p1=e.relatedNode||e.target;o1.push({target:p1,attributeName:e.attrName});}this.observe=function(e){p1=e;p1.addEventListener('DOMSubtreeModified',q1,false);p1.addEventListener('DOMNodeInsertedIntoDocument',q1,false);p1.addEventListener('DOMNodeInserted',q1,false);p1.addEventListener('DOMAttrModified',r1,false);};this.disconnect=function(){p1.removeEventListener('DOMSubtreeModified',q1,false);p1.removeEventListener('DOMNodeInsertedIntoDocument',q1,false);p1.removeEventListener('DOMNodeInserted',q1,false);p1.removeEventListener('DOMAttrModified',r1,false);};this.takeRecords=function(){return o1;};};}function n1(e){var o1=new x(function(){});T.each(c.getBody().getElementsByTagName('*'),function(r1){if(r1.tagName=='SPAN'){r1.setAttribute('mce-data-marked',1);}if(!r1.hasAttribute('data-mce-style')&&r1.hasAttribute('style')){c.dom.setAttrib(r1,'style',c.dom.getAttrib(r1,'style'));}});o1.observe(c.getDoc(),{childList:true,attributes:true,subtree:true,attributeFilter:['style']});c.getDoc().execCommand(e?'ForwardDelete':'Delete',false,null);var p1=c.selection.getRng();var q1=p1.startContainer.parentNode;T.each(o1.takeRecords(),function(r1){if(!h.isChildOf(r1.target,c.getBody())){return;}if(r1.attributeName=="style"){var s1=r1.target.getAttribute('data-mce-style');if(s1){r1.target.setAttribute("style",s1);}else{r1.target.removeAttribute("style");}}T.each(r1.addedNodes,function(t1){if(t1.nodeName=="SPAN"&&!t1.getAttribute('mce-data-marked')){var u1,v1;if(t1==q1){u1=p1.startOffset;v1=t1.firstChild;}h.remove(t1,true);if(v1){p1.setStart(v1,u1);p1.setEnd(v1,u1);c.selection.setRng(p1);}}});});o1.disconnect();T.each(c.dom.select('span[mce-data-marked]'),function(r1){r1.removeAttribute('mce-data-marked');});}c.on('keydown',function(e){var o1=e.keyCode==g,p1=V.metaKeyPressed(e);if(!u(e)&&(o1||e.keyCode==f)){var q1=c.selection.getRng(),r1=q1.startContainer,s1=q1.startOffset;if(!p1&&q1.collapsed&&r1.nodeType==3){if(o1?s1<r1.data.length:s1>0){return;}}e.preventDefault();if(p1){c.selection.getSel().modify("extend",o1?"forward":"backward","word");}n1(o1);}});c.on('keypress',function(e){if(!u(e)&&!s.isCollapsed()&&e.charCode&&!V.metaKeyPressed(e)){e.preventDefault();n1(true);c.selection.setContent(String.fromCharCode(e.charCode));}});c.addCommand('Delete',function(){n1();});c.addCommand('ForwardDelete',function(){n1(true);});if(y){return;}c.on('dragstart',function(e){var o1;if(c.selection.isCollapsed()&&e.target.tagName=='IMG'){s.select(e.target);}m1=s.getRng();o1=c.selection.getContent();if(o1.length>0){e.dataTransfer.setData('URL','data:text/mce-internal,'+escape(o1));}});c.on('drop',function(e){if(!u(e)){var o1=e.dataTransfer.getData('URL');if(!o1||o1.indexOf(j)==-1||!i.caretRangeFromPoint){return;}o1=unescape(o1.substr(j.length));if(i.caretRangeFromPoint){e.preventDefault();window.setTimeout(function(){var p1=i.caretRangeFromPoint(e.x,e.y);if(m1){s.setRng(m1);m1=null;}n1();s.setRng(p1);c.insertContent(o1);},0);}}});c.on('cut',function(e){if(!u(e)&&e.clipboardData){e.preventDefault();e.clipboardData.clearData();e.clipboardData.setData('text/html',c.selection.getContent());e.clipboardData.setData('text/plain',c.selection.getContent({format:'text'}));n1(true);}});}function w(){function i(e){var x=h.create("body");var y=e.cloneContents();x.appendChild(y);return s.serializer.serialize(x,{format:'html'});}function j(e){if(!e.setStart){if(e.item){return false;}var x=e.duplicate();x.moveToElementText(c.getBody());return R.compareRanges(e,x);}var s=i(e);var y=h.createRng();y.selectNode(c.getBody());var m1=i(y);return s===m1;}c.on('keydown',function(e){var x=e.keyCode,y,m1;if(!u(e)&&(x==g||x==f)){y=c.selection.isCollapsed();m1=c.getBody();if(y&&!h.isEmpty(m1)){return;}if(!y&&!j(c.selection.getRng())){return;}e.preventDefault();c.setContent('');if(m1.firstChild&&h.isBlock(m1.firstChild)){c.selection.setCursorLocation(m1.firstChild,0);}else{c.selection.setCursorLocation(m1,0);}c.nodeChanged();}});}function G(){c.shortcuts.add('ctrl+a',null,'SelectAll');}function H(){if(!c.settings.content_editable){h.bind(c.getDoc(),'focusin',function(){s.setRng(s.getRng());});h.bind(c.getDoc(),'mousedown mouseup',function(e){if(e.target==c.getDoc().documentElement){c.getBody().focus();if(e.type=='mousedown'){s.placeCaretAt(e.clientX,e.clientY);}else{s.setRng(s.getRng());}}});}}function I(){c.on('keydown',function(e){if(!u(e)&&e.keyCode===f){if(!c.getBody().getElementsByTagName('hr').length){return;}if(s.isCollapsed()&&s.getRng(true).startOffset===0){var i=s.getNode();var j=i.previousSibling;if(i.nodeName=='HR'){h.remove(i);e.preventDefault();return;}if(j&&j.nodeName&&j.nodeName.toLowerCase()==="hr"){h.remove(j);e.preventDefault();}}}});}function J(){if(!window.Range.prototype.getClientRects){c.on('mousedown',function(e){if(!u(e)&&e.target.nodeName==="HTML"){var i=c.getBody();i.blur();setTimeout(function(){i.focus();},0);}});}}function K(){c.on('click',function(e){var i=e.target;if(/^(IMG|HR)$/.test(i.nodeName)){e.preventDefault();s.getSel().setBaseAndExtent(i,0,i,1);c.nodeChanged();}if(i.nodeName=='A'&&h.hasClass(i,'mce-item-anchor')){e.preventDefault();s.select(i);}});}function L(){function i(){var e=h.getAttribs(s.getStart().cloneNode(false));return function(){var x=s.getStart();if(x!==c.getBody()){h.setAttrib(x,"style",null);d(e,function(y){x.setAttributeNode(y.cloneNode(true));});}};}function j(){return!s.isCollapsed()&&h.getParent(s.getStart(),h.isBlock)!=h.getParent(s.getEnd(),h.isBlock);}c.on('keypress',function(e){var x;if(!u(e)&&(e.keyCode==8||e.keyCode==46)&&j()){x=i();c.getDoc().execCommand('delete',false,null);x();e.preventDefault();return false;}});h.bind(c.getDoc(),'cut',function(e){var x;if(!u(e)&&j()){x=i();setTimeout(function(){x();},0);}});}function M(){document.body.setAttribute("role","application");}function O(){c.on('keydown',function(e){if(!u(e)&&e.keyCode===f){if(s.isCollapsed()&&s.getRng(true).startOffset===0){var i=s.getNode().previousSibling;if(i&&i.nodeName&&i.nodeName.toLowerCase()==="table"){e.preventDefault();return false;}}}});}function P(){if(t()>7){return;}r('RespectVisibilityInDesign',true);c.contentStyles.push('.mceHideBrInPre pre br {display: none}');h.addClass(c.getBody(),'mceHideBrInPre');p.addNodeFilter('pre',function(e){var i=e.length,x,j,y,m1;while(i--){x=e[i].getAll('br');j=x.length;while(j--){y=x[j];m1=y.prev;if(m1&&m1.type===3&&m1.value.charAt(m1.value-1)!='\n'){m1.value+='\n';}else{y.parent.insert(new N('#text',3),y,true).value='\n';}}}});l.addNodeFilter('pre',function(e){var i=e.length,x,j,y,m1;while(i--){x=e[i].getAll('br');j=x.length;while(j--){y=x[j];m1=y.prev;if(m1&&m1.type==3){m1.value=m1.value.replace(/\r?\n$/,'');}}}});}function Q(){h.bind(c.getBody(),'mouseup',function(){var e,i=s.getNode();if(i.nodeName=='IMG'){if((e=h.getStyle(i,'width'))){h.setAttrib(i,'width',e.replace(/[^0-9%]+/g,''));h.setStyle(i,'width','');}if((e=h.getStyle(i,'height'))){h.setAttrib(i,'height',e.replace(/[^0-9%]+/g,''));h.setStyle(i,'height','');}}});}function S(){c.on('keydown',function(e){var i,j,x,y,m1;if(u(e)||e.keyCode!=V.BACKSPACE){return;}i=s.getRng();j=i.startContainer;x=i.startOffset;y=h.getRoot();m1=j;if(!i.collapsed||x!==0){return;}while(m1&&m1.parentNode&&m1.parentNode.firstChild==m1&&m1.parentNode!=y){m1=m1.parentNode;}if(m1.tagName==='BLOCKQUOTE'){c.formatter.toggle('blockquote',null,m1);i=h.createRng();i.setStart(j,0);i.setEnd(j,0);s.setRng(i);}});}function U(){function e(){c._refreshContentEditable();r("StyleWithCSS",false);r("enableInlineTableEditing",false);if(!k.object_resizing){r("enableObjectResizing",false);}}if(!k.readonly){c.on('BeforeExecCommand MouseDown',e);}}function W(){function i(){d(h.select('a'),function(e){var j=e.parentNode,x=h.getRoot();if(j.lastChild===e){while(j&&!h.isBlock(j)){if(j.parentNode.lastChild!==j||j===x){return;}j=j.parentNode;}h.add(j,'br',{'data-mce-bogus':1});}});}c.on('SetContent ExecCommand',function(e){if(e.type=="setcontent"||e.command==='mceInsertLink'){i();}});}function X(){if(k.forced_root_block){c.on('init',function(){r('DefaultParagraphSeparator',k.forced_root_block);});}}function Y(){c.on('Undo Redo SetContent',function(e){if(!e.initial){c.execCommand('mceRepaint');}});}function Z(){c.on('keydown',function(e){var i;if(!u(e)&&e.keyCode==f){i=c.getDoc().selection.createRange();if(i&&i.item){e.preventDefault();c.undoManager.beforeChange();h.remove(i.item(0));c.undoManager.add();}}});}function $(){var e;if(t()>=10){e='';d('p div h1 h2 h3 h4 h5 h6'.split(' '),function(j,i){e+=(i>0?',':'')+j+':empty';});c.contentStyles.push(e+'{padding-right: 1px !important}');}}function _(){if(t()<9){p.addNodeFilter('noscript',function(e){var i=e.length,j,x;while(i--){j=e[i];x=j.firstChild;if(x){j.attr('data-mce-innertext',x.value);}}});l.addNodeFilter('noscript',function(e){var i=e.length,j,x,y;while(i--){j=e[i];x=e[i].firstChild;if(x){x.value=a.decode(x.value);}else{y=j.attributes.map['data-mce-innertext'];if(y){j.attr('data-mce-innertext',null);x=new N('#text',3);x.value=y;x.raw=true;j.append(x);}}}});}}function a1(){var i=h.doc,j=i.body,m1,n1,o1;function p1(x,y){var e=j.createTextRange();try{e.moveToPoint(x,y);}catch(ex){e=null;}return e;}function q1(e){var x;if(e.button){x=p1(e.x,e.y);if(x){if(x.compareEndPoints('StartToStart',n1)>0){x.setEndPoint('StartToStart',n1);}else{x.setEndPoint('EndToEnd',n1);}x.select();}}else{r1();}}function r1(){var e=i.selection.createRange();if(n1&&!e.item&&e.compareEndPoints('StartToEnd',e)===0){n1.select();}h.unbind(i,'mouseup',r1);h.unbind(i,'mousemove',q1);n1=m1=0;}i.documentElement.unselectable=true;h.bind(i,'mousedown contextmenu',function(e){if(e.target.nodeName==='HTML'){if(m1){r1();}o1=i.documentElement;if(o1.scrollHeight>o1.clientHeight){return;}m1=1;n1=p1(e.x,e.y);if(n1){h.bind(i,'mouseup',r1);h.bind(i,'mousemove',q1);h.getRoot().focus();n1.select();}}});}function b1(){c.on('keyup focusin mouseup',function(e){if(e.keyCode!=65||!V.metaKeyPressed(e)){s.normalize();}},true);}function c1(){c.contentStyles.push('img:-moz-broken {'+'-moz-force-broken-image-icon:1;'+'min-width:24px;'+'min-height:24px'+'}');}function d1(){if(!c.inline){c.on('keydown',function(){if(document.activeElement==document.body){c.getWin().focus();}});}}function e1(){if(!c.inline){c.contentStyles.push('body {min-height: 150px}');c.on('click',function(e){if(e.target.nodeName=='HTML'){c.getBody().focus();c.selection.normalize();c.nodeChanged();}});}}function f1(){if(b.mac){c.on('keydown',function(e){if(V.metaKeyPressed(e)&&(e.keyCode==37||e.keyCode==39)){e.preventDefault();c.selection.getSel().modify('move',e.keyCode==37?'backward':'forward','word');}});}}function g1(){r("AutoUrlDetect",false);}function h1(){if(!c.inline){c.on('focus blur beforegetcontent',function(){var e=c.dom.create('br');c.getBody().appendChild(e);e.parentNode.removeChild(e);},true);}}function i1(){c.on('click',function(e){var i=e.target;do{if(i.tagName==='A'){e.preventDefault();return;}}while((i=i.parentNode));});c.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');}function j1(){c.on('touchstart',function(e){var i,j,x,y;i=e.target;j=new Date().getTime();y=e.changedTouches;if(!y||y.length>1){return;}x=y[0];c.once('touchend',function(e){var m1=e.changedTouches[0],n1;if(new Date().getTime()-j>500){return;}if(Math.abs(x.clientX-m1.clientX)>5){return;}if(Math.abs(x.clientY-m1.clientY)>5){return;}n1={target:i};d('pageX pageY clientX clientY screenX screenY'.split(' '),function(o1){n1[o1]=m1[o1];});n1=c.fire('click',n1);if(!n1.isDefaultPrevented()){c.selection.placeCaretAt(m1.clientX,m1.clientY);c.nodeChanged();}});});}function k1(){c.on('init',function(){c.dom.bind(c.getBody(),'submit',function(e){e.preventDefault();});});}function l1(){p.addNodeFilter('br',function(e){var i=e.length;while(i--){if(e[i].attr('class')=='Apple-interchange-newline'){e[i].remove();}}});}S();w();b1();if(o){v();H();K();X();k1();O();l1();j1();if(b.iOS){d1();e1();i1();}else{G();}}if(n&&b.ie<11){I();M();P();Q();Z();$();_();a1();}if(b.ie>=11){e1();h1();O();}if(b.ie){G();g1();}if(m){I();J();L();U();W();Y();c1();f1();O();}};});
/**
 * Observable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/Observable",["tinymce/util/EventDispatcher"],function(a){function g(o){if(!o._eventDispatcher){o._eventDispatcher=new a({scope:o,toggleEvent:function(n,s){if(a.isNative(n)&&o.toggleNativeEvent){o.toggleNativeEvent(n,s);}}});}return o._eventDispatcher;}return{fire:function(n,b,c){var s=this;if(s.removed&&n!=="remove"){return b;}b=g(s).fire(n,b,c);if(c!==false&&s.parent){var p=s.parent();while(p&&!b.isPropagationStopped()){p.fire(n,b,false);p=p.parent();}}return b;},on:function(n,c,p){return g(this).on(n,c,p);},off:function(n,c){return g(this).off(n,c);},once:function(n,c){return g(this).once(n,c);},hasEventListeners:function(n){return g(this).has(n);}};});
/**
 * EditorObservable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/EditorObservable",["tinymce/util/Observable","tinymce/dom/DOMUtils","tinymce/util/Tools"],function(O,a,T){var b=a.DOM,c;function g(e,h){if(h=='selectionchange'){return e.getDoc();}if(!e.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(h)){return e.getDoc().documentElement;}if(e.settings.event_root){if(!e.eventRoot){e.eventRoot=b.select(e.settings.event_root)[0];}return e.eventRoot;}return e.getBody();}function d(h,j){var k=g(h,j),l;if(!h.delegates){h.delegates={};}if(h.delegates[j]){return;}if(h.settings.event_root){if(!c){c={};h.editorManager.on('removeEditor',function(){var n;if(!h.editorManager.activeEditor){if(c){for(n in c){h.dom.unbind(g(h,n));}c=null;}}});}if(c[j]){return;}l=function(e){var t=e.target,m=h.editorManager.editors,i=m.length;while(i--){var n=m[i].getBody();if(n===t||b.isChildOf(t,n)){if(!m[i].hidden){m[i].fire(j,e);}}}};c[j]=l;b.bind(k,j,l);}else{l=function(e){if(!h.hidden){h.fire(j,e);}};b.bind(k,j,l);h.delegates[j]=l;}}var f={bindPendingEventDelegates:function(){var s=this;T.each(s._pendingNativeEvents,function(n){d(s,n);});},toggleNativeEvent:function(n,s){var e=this;if(e.settings.readonly){return;}if(n=="focus"||n=="blur"){return;}if(s){if(e.initialized){d(e,n);}else{if(!e._pendingNativeEvents){e._pendingNativeEvents=[n];}else{e._pendingNativeEvents.push(n);}}}else if(e.initialized){e.dom.unbind(g(e,n),n,e.delegates[n]);delete e.delegates[n];}},unbindAllNativeEvents:function(){var s=this,n;if(s.delegates){for(n in s.delegates){s.dom.unbind(g(s,n),n,s.delegates[n]);}delete s.delegates;}if(!s.inline){s.getBody().onload=null;s.dom.unbind(s.getWin());s.dom.unbind(s.getDoc());}s.dom.unbind(s.getBody());s.dom.unbind(s.getContainer());}};f=T.extend({},O,f);return f;});
/**
 * Shortcuts.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/Shortcuts",["tinymce/util/Tools","tinymce/Env"],function(T,a){var b=T.each,c=T.explode;var k={"f9":120,"f10":121,"f11":122};return function(d){var s=this,f={};d.on('keyup keypress keydown',function(e){if((e.altKey||e.ctrlKey||e.metaKey)&&!e.isDefaultPrevented()){b(f,function(g){var h=a.mac?e.metaKey:e.ctrlKey;if(g.ctrl!=h||g.alt!=e.altKey||g.shift!=e.shiftKey){return;}if(e.keyCode==g.keyCode||(e.charCode&&e.charCode==g.charCode)){e.preventDefault();if(e.type=="keydown"){g.func.call(g.scope);}return true;}});}});s.add=function(p,e,g,h){var i;i=g;if(typeof(g)==='string'){g=function(){d.execCommand(i,false,null);};}else if(T.isArray(i)){g=function(){d.execCommand(i[0],i[1],i[2]);};}b(c(p.toLowerCase()),function(p){var j={func:g,scope:h||d,desc:d.translate(e),alt:false,ctrl:false,shift:false};b(c(p,'+'),function(v){switch(v){case'alt':case'ctrl':case'shift':j[v]=true;break;default:if(/^[0-9]{2,}$/.test(v)){j.keyCode=parseInt(v,10);}else{j.charCode=v.charCodeAt(0);j.keyCode=k[v]||v.toUpperCase().charCodeAt(0);}}});f[(j.ctrl?'ctrl':'')+','+(j.alt?'alt':'')+','+(j.shift?'shift':'')+','+j.keyCode]=j;});return true;};};});
/**
 * Editor.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/Editor",["tinymce/dom/DOMUtils","tinymce/dom/DomQuery","tinymce/AddOnManager","tinymce/NodeChange","tinymce/html/Node","tinymce/dom/Serializer","tinymce/html/Serializer","tinymce/dom/Selection","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/dom/ScriptLoader","tinymce/dom/EventUtils","tinymce/WindowManager","tinymce/html/Schema","tinymce/html/DomParser","tinymce/util/Quirks","tinymce/Env","tinymce/util/Tools","tinymce/EditorObservable","tinymce/Shortcuts"],function(c,d,f,N,g,j,S,k,l,U,m,r,s,t,v,x,W,y,G,Q,H,T,I,J){var K=c.DOM,L=f.ThemeManager,P=f.PluginManager;var M=T.extend,O=T.each,R=T.explode;var V=T.inArray,X=T.trim,E=T.resolve;var Y=x.Event;var Z=H.gecko,$=H.ie;function _(i,a,e){var b=this,h,n;h=b.documentBaseUrl=e.documentBaseURL;n=e.baseURI;b.settings=a=M({id:i,theme:'modern',delta_width:0,delta_height:0,popup_css:'',plugins:'',document_base_url:h,add_form_submit_trigger:true,submit_patch:true,add_unload_trigger:true,convert_urls:true,relative_urls:true,remove_script_host:true,object_resizing:true,doctype:'<!DOCTYPE html>',visual:true,font_size_style_values:'xx-small,x-small,small,medium,large,x-large,xx-large',font_size_legacy_values:'xx-small,small,medium,large,x-large,xx-large,300%',forced_root_block:'p',hidden_input:true,padd_empty_editor:true,render_ui:true,indentation:'30px',inline_styles:true,convert_fonts_to_spans:true,indent:'simple',indent_before:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,'+'tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist',indent_after:'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,'+'tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist',validate:true,entity_encoding:'named',url_converter:b.convertURL,url_converter_scope:b,ie7_compat:true},a);f.language=a.language||'en';f.languageLoad=a.language_load;f.baseURL=e.baseURL;b.id=a.id=i;b.isNotDirty=true;b.plugins={};b.documentBaseURI=new t(a.document_base_url||h,{base_uri:n});b.baseURI=n;b.contentCSS=[];b.contentStyles=[];b.shortcuts=new J(b);b.execCommands={};b.queryStateCommands={};b.queryValueCommands={};b.loadedCSS={};if(a.target){b.targetElm=a.target;}b.suffix=e.suffix;b.editorManager=e;b.inline=a.inline;if(a.cache_suffix){H.cacheSuffix=a.cache_suffix.replace(/^[\?\&]+/,'');}e.fire('SetupEditor',b);b.execCallback('setup',b);b.$=d.overrideDefaults(function(){return{context:b.inline?b.getBody():b.getDoc(),element:b.getBody()};});}_.prototype={render:function(){var a=this,b=a.settings,i=a.id,h=a.suffix;function n(){K.unbind(window,'ready',n);a.render();}if(!Y.domLoaded){K.bind(window,'ready',n);return;}if(!a.getElement()){return;}if(!H.contentEditable){return;}if(!b.inline){a.orgVisibility=a.getElement().style.visibility;a.getElement().style.visibility='hidden';}else{a.inline=true;}var o=a.getElement().form||K.getParent(i,'form');if(o){a.formElement=o;if(b.hidden_input&&!/TEXTAREA|INPUT/i.test(a.getElement().nodeName)){K.insertAfter(K.create('input',{type:'hidden',name:i}),i);a.hasHiddenInput=true;}a.formEventDelegate=function(e){a.fire(e.type,e);};K.bind(o,'submit reset',a.formEventDelegate);a.on('reset',function(){a.setContent(a.startContent,{format:'raw'});});if(b.submit_patch&&!o.submit.nodeType&&!o.submit.length&&!o._mceOldSubmit){o._mceOldSubmit=o.submit;o.submit=function(){a.editorManager.triggerSave();a.isNotDirty=true;return o._mceOldSubmit(o);};}}a.windowManager=new W(a);if(b.encoding=='xml'){a.on('GetContent',function(e){if(e.save){e.content=K.encode(e.content);}});}if(b.add_form_submit_trigger){a.on('submit',function(){if(a.initialized){a.save();}});}if(b.add_unload_trigger){a._beforeUnload=function(){if(a.initialized&&!a.destroyed&&!a.isHidden()){a.save({format:'raw',no_events:true,set_dirty:false});}};a.editorManager.on('BeforeUnload',a._beforeUnload);}function p(){var e=v.ScriptLoader;if(b.language&&b.language!='en'&&!b.language_url){b.language_url=a.editorManager.baseURL+'/langs/'+b.language+'.js';}if(b.language_url){e.add(b.language_url);}if(b.theme&&typeof b.theme!="function"&&b.theme.charAt(0)!='-'&&!L.urls[b.theme]){var u=b.theme_url;if(u){u=a.documentBaseURI.toAbsolute(u);}else{u='themes/'+b.theme+'/theme'+h+'.js';}L.load(b.theme,u);}if(T.isArray(b.plugins)){b.plugins=b.plugins.join(' ');}O(b.external_plugins,function(w,a1){P.load(a1,w);b.plugins+=' '+a1;});O(b.plugins.split(/[ ,]/),function(w){w=X(w);if(w&&!P.urls[w]){if(w.charAt(0)=='-'){w=w.substr(1,w.length);var a1=P.dependencies(w);O(a1,function(b1){var c1={prefix:'plugins/',resource:b1,suffix:'/plugin'+h+'.js'};b1=P.createUrl(c1,b1);P.load(b1.resource,b1);});}else{P.load(w,{prefix:'plugins/',resource:w,suffix:'/plugin'+h+'.js'});}}});e.loadQueue(function(){if(!a.removed){a.init();}});}p();},init:function(){var a=this,b=a.settings,p=a.getElement();var w,h,a1,n,o,b1,c1,d1,e1,re,i,g1=[];a.rtl=this.editorManager.i18n.rtl;a.editorManager.add(a);b.aria_label=b.aria_label||K.getAttrib(p,'aria-label',a.getLang('aria.rich_text_area'));if(b.theme){if(typeof b.theme!="function"){b.theme=b.theme.replace(/-/,'');b1=L.get(b.theme);a.theme=new b1(a,L.urls[b.theme]);if(a.theme.init){a.theme.init(a,L.urls[b.theme]||a.documentBaseUrl.replace(/\/$/,''),a.$);}}else{a.theme=b.theme;}}function h1(u){var f1=P.get(u),l1,m1;l1=P.urls[u]||a.documentBaseUrl.replace(/\/$/,'');u=X(u);if(f1&&V(g1,u)===-1){O(P.dependencies(u),function(n1){h1(n1);});m1=new f1(a,l1,a.$);a.plugins[u]=m1;if(m1.init){m1.init(a,l1);g1.push(u);}}}O(b.plugins.replace(/\-/g,'').split(/[ ,]/),h1);if(b.render_ui&&a.theme){a.orgDisplay=p.style.display;if(typeof b.theme!="function"){w=b.width||p.style.width||p.offsetWidth;h=b.height||p.style.height||p.offsetHeight;a1=b.min_height||100;re=/^[0-9\.]+(|px)$/i;if(re.test(''+w)){w=Math.max(parseInt(w,10),100);}if(re.test(''+h)){h=Math.max(parseInt(h,10),a1);}o=a.theme.renderUI({targetNode:p,width:w,height:h,deltaWidth:b.delta_width,deltaHeight:b.delta_height});if(!b.content_editable){h=(o.iframeHeight||h)+(typeof(h)=='number'?(o.deltaHeight||0):'');if(h<a1){h=a1;}}}else{o=b.theme(a,p);if(o.editorContainer.nodeType){o.editorContainer=o.editorContainer.id=o.editorContainer.id||a.id+"_parent";}if(o.iframeContainer.nodeType){o.iframeContainer=o.iframeContainer.id=o.iframeContainer.id||a.id+"_iframecontainer";}h=o.iframeHeight||p.offsetHeight;}a.editorContainer=o.editorContainer;}if(b.content_css){O(R(b.content_css),function(u){a.contentCSS.push(a.documentBaseURI.toAbsolute(u));});}if(b.content_style){a.contentStyles.push(b.content_style);}if(b.content_editable){p=n=o=null;return a.initContentBody();}a.iframeHTML=b.doctype+'<html><head>';if(b.document_base_url!=a.documentBaseUrl){a.iframeHTML+='<base href="'+a.documentBaseURI.getURI()+'" />';}if(!H.caretAfter&&b.ie7_compat){a.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />';}a.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';for(i=0;i<a.contentCSS.length;i++){var i1=a.contentCSS[i];a.iframeHTML+=('<link type="text/css" '+'rel="stylesheet" '+'href="'+T._addCacheSuffix(i1)+'" />');a.loadedCSS[i1]=true;}d1=b.body_id||'tinymce';if(d1.indexOf('=')!=-1){d1=a.getParam('body_id','','hash');d1=d1[a.id]||d1;}e1=b.body_class||'';if(e1.indexOf('=')!=-1){e1=a.getParam('body_class','','hash');e1=e1[a.id]||'';}if(b.content_security_policy){a.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+b.content_security_policy+'" />';}a.iframeHTML+='</head><body id="'+d1+'" class="mce-content-body '+e1+'" data-id="'+a.id+'"><br></body></html>';var j1='javascript:(function(){'+'document.open();document.domain="'+document.domain+'";'+'var ed = window.parent.tinymce.get("'+a.id+'");document.write(ed.iframeHTML);'+'document.close();ed.initContentBody(true);})()';if(document.domain!=location.hostname){c1=j1;}var k1=K.create('iframe',{id:a.id+"_ifr",frameBorder:'0',allowTransparency:"true",title:a.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. "+"Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:'100%',height:h,display:'block'}});k1.onload=function(){k1.onload=null;a.fire("load");};K.setAttrib(k1,"src",c1||'javascript:""');a.contentAreaContainer=o.iframeContainer;a.iframeElement=k1;n=K.add(o.iframeContainer,k1);if($){try{a.getDoc();}catch(e){n.src=c1=j1;}}if(o.editorContainer){K.get(o.editorContainer).style.display=a.orgDisplay;a.hidden=K.isHidden(o.editorContainer);}a.getElement().style.display='none';K.setAttrib(a.id,'aria-hidden',true);if(!c1){a.initContentBody();}p=n=o=null;},initContentBody:function(a){var b=this,h=b.settings,n=b.getElement(),o=b.getDoc(),p,u;if(!h.inline){b.getElement().style.visibility=b.orgVisibility;}if(!a&&!h.content_editable){o.open();o.write(b.iframeHTML);o.close();}if(h.content_editable){b.on('remove',function(){var e=this.getBody();K.removeClass(e,'mce-content-body');K.removeClass(e,'mce-edit-focus');K.setAttrib(e,'contentEditable',null);});K.addClass(n,'mce-content-body');b.contentDocument=o=h.content_document||document;b.contentWindow=h.content_window||window;b.bodyElement=n;h.content_document=h.content_window=null;h.root_name=n.nodeName.toLowerCase();}p=b.getBody();p.disabled=true;if(!h.readonly){if(b.inline&&K.getStyle(p,'position',true)=='static'){p.style.position='relative';}p.contentEditable=b.getParam('content_editable_state',true);}p.disabled=false;b.schema=new y(h);b.dom=new c(o,{keep_values:true,url_converter:b.convertURL,url_converter_scope:b,hex_colors:h.force_hex_style_colors,class_filter:h.class_filter,update_styles:true,root_element:b.inline?b.getBody():null,collect:h.content_editable,schema:b.schema,onSetAttrib:function(e){b.fire('SetAttrib',e);}});b.parser=new G(h,b.schema);b.parser.addAttributeFilter('src,href,style,tabindex',function(e,w){var i=e.length,a1,b1=b.dom,c1,d1;while(i--){a1=e[i];c1=a1.attr(w);d1='data-mce-'+w;if(!a1.attributes.map[d1]){if(w==="style"){c1=b1.serializeStyle(b1.parseStyle(c1),a1.name);if(!c1.length){c1=null;}a1.attr(d1,c1);a1.attr(w,c1);}else if(w==="tabindex"){a1.attr(d1,c1);a1.attr(w,null);}else{a1.attr(d1,b.convertURL(c1,w,a1.name));}}}});b.parser.addNodeFilter('script',function(e){var i=e.length,w;while(i--){w=e[i];w.attr('type','mce-'+(w.attr('type')||'no/type'));}});b.parser.addNodeFilter('#cdata',function(e){var i=e.length,w;while(i--){w=e[i];w.type=8;w.name='#comment';w.value='[CDATA['+w.value+']]';}});b.parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div',function(e){var i=e.length,w,a1=b.schema.getNonEmptyElements();while(i--){w=e[i];if(w.isEmpty(a1)){w.append(new g('br',1)).shortEnded=true;}}});b.serializer=new j(h,b);b.selection=new k(b.dom,b.getWin(),b.serializer,b);b.formatter=new l(b);b.undoManager=new U(b);b.forceBlocks=new r(b);b.enterKey=new m(b);b.editorCommands=new s(b);b._nodeChangeDispatcher=new N(b);b.fire('PreInit');if(!h.browser_spellcheck&&!h.gecko_spellcheck){o.body.spellcheck=false;K.setAttrib(p,"spellcheck","false");}b.fire('PostRender');b.quirks=new Q(b);if(h.directionality){p.dir=h.directionality;}if(h.nowrap){p.style.whiteSpace="nowrap";}if(h.protect){b.on('BeforeSetContent',function(e){O(h.protect,function(i){e.content=e.content.replace(i,function(w){return'<!--mce:protected '+escape(w)+'-->';});});});}b.on('SetContent',function(){b.addVisual(b.getBody());});if(h.padd_empty_editor){b.on('PostProcess',function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,'');});}b.load({initial:true,format:'html'});b.startContent=b.getContent({format:'raw'});b.initialized=true;b.bindPendingEventDelegates();b.fire('init');b.focus(true);b.nodeChanged({initial:true});b.execCallback('init_instance_callback',b);if(b.contentStyles.length>0){u='';O(b.contentStyles,function(e){u+=e+"\r\n";});b.dom.addStyle(u);}O(b.contentCSS,function(e){if(!b.loadedCSS[e]){b.dom.loadCSS(e);b.loadedCSS[e]=true;}});if(h.auto_focus){setTimeout(function(){var e;if(h.auto_focus===true){e=b;}else{e=b.editorManager.get(h.auto_focus);}e.focus();},100);}n=o=p=null;},focus:function(a){var b=this,e=b.selection,h=b.settings.content_editable,i;var n,o=b.getDoc(),p;if(!a){i=e.getRng();if(i.item){n=i.item(0);}b._refreshContentEditable();if(!h){if(!H.opera){b.getBody().focus();}b.getWin().focus();}if(Z||h){p=b.getBody();if(p.setActive){try{p.setActive();}catch(u){p.focus();}}else{p.focus();}if(h){e.normalize();}}if(n&&n.ownerDocument==o){i=o.body.createControlRange();i.addElement(n);i.select();}}b.editorManager.setActive(b);},execCallback:function(n){var a=this,b=a.settings[n],e;if(!b){return;}if(a.callbackLookup&&(e=a.callbackLookup[n])){b=e.func;e=e.scope;}if(typeof(b)==='string'){e=b.replace(/\.\w+$/,'');e=e?E(e):0;b=E(b);a.callbackLookup=a.callbackLookup||{};a.callbackLookup[n]={func:b,scope:e};}return b.apply(e||a,Array.prototype.slice.call(arguments,1));},translate:function(e){var h=this.settings.language||'en',i=this.editorManager.i18n;if(!e){return'';}return i.data[h+'.'+e]||e.replace(/\{\#([^\}]+)\}/g,function(a,b){return i.data[h+'.'+b]||'{#'+b+'}';});},getLang:function(n,a){return(this.editorManager.i18n.data[(this.settings.language||'en')+'.'+n]||(a!==z?a:'{#'+n+'}'));},getParam:function(n,a,b){var e=n in this.settings?this.settings[n]:a,o;if(b==='hash'){o={};if(typeof(e)==='string'){O(e.indexOf('=')>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(','),function(e){e=e.split('=');if(e.length>1){o[X(e[0])]=X(e[1]);}else{o[X(e[0])]=X(e);}});}else{o=e;}return o;}return e;},nodeChanged:function(a){this._nodeChangeDispatcher.nodeChanged(a);},addButton:function(n,a){var b=this;if(a.cmd){a.onclick=function(){b.execCommand(a.cmd);};}if(!a.text&&!a.icon){a.icon=n;}b.buttons=b.buttons||{};a.tooltip=a.tooltip||a.title;b.buttons[n]=a;},addMenuItem:function(n,a){var b=this;if(a.cmd){a.onclick=function(){b.execCommand(a.cmd);};}b.menuItems=b.menuItems||{};b.menuItems[n]=a;},addCommand:function(n,a,b){this.execCommands[n]={func:a,scope:b||this};},addQueryStateHandler:function(n,a,b){this.queryStateCommands[n]={func:a,scope:b||this};},addQueryValueHandler:function(n,a,b){this.queryValueCommands[n]={func:a,scope:b||this};},addShortcut:function(p,a,b,e){this.shortcuts.add(p,a,b,e);},execCommand:function(a,u,b,e){var h=this,i=0,n;if(!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(a)&&(!e||!e.skip_focus)){h.focus();}e=M({},e);e=h.fire('BeforeExecCommand',{command:a,ui:u,value:b});if(e.isDefaultPrevented()){return false;}if((n=h.execCommands[a])){if(n.func.call(n.scope,u,b)!==true){h.fire('ExecCommand',{command:a,ui:u,value:b});return true;}}O(h.plugins,function(p){if(p.execCommand&&p.execCommand(a,u,b)){h.fire('ExecCommand',{command:a,ui:u,value:b});i=true;return false;}});if(i){return i;}if(h.theme&&h.theme.execCommand&&h.theme.execCommand(a,u,b)){h.fire('ExecCommand',{command:a,ui:u,value:b});return true;}if(h.editorCommands.execCommand(a,u,b)){h.fire('ExecCommand',{command:a,ui:u,value:b});return true;}try{i=h.getDoc().execCommand(a,u,b);}catch(o){}if(i){h.fire('ExecCommand',{command:a,ui:u,value:b});return true;}return false;},queryCommandState:function(a){var b=this,e,h;if(b._isHidden()){return;}if((e=b.queryStateCommands[a])){h=e.func.call(e.scope);if(h===true||h===false){return h;}}h=b.editorCommands.queryCommandState(a);if(h!==-1){return h;}try{return b.getDoc().queryCommandState(a);}catch(i){}},queryCommandValue:function(a){var b=this,e,h;if(b._isHidden()){return;}if((e=b.queryValueCommands[a])){h=e.func.call(e.scope);if(h!==true){return h;}}h=b.editorCommands.queryCommandValue(a);if(h!==z){return h;}try{return b.getDoc().queryCommandValue(a);}catch(i){}},show:function(){var a=this;if(a.hidden){a.hidden=false;if(a.inline){a.getBody().contentEditable=true;}else{K.show(a.getContainer());K.hide(a.id);}a.load();a.fire('show');}},hide:function(){var a=this,b=a.getDoc();if(!a.hidden){if($&&b&&!a.inline){b.execCommand('SelectAll');}a.save();if(a.inline){a.getBody().contentEditable=false;if(a==a.editorManager.focusedEditor){a.editorManager.focusedEditor=null;}}else{K.hide(a.getContainer());K.setStyle(a.id,'display',a.orgDisplay);}a.hidden=true;a.fire('hide');}},isHidden:function(){return!!this.hidden;},setProgressState:function(a,b){this.fire('ProgressState',{state:a,time:b});},load:function(a){var b=this,e=b.getElement(),h;if(e){a=a||{};a.load=true;h=b.setContent(e.value!==z?e.value:e.innerHTML,a);a.element=e;if(!a.no_events){b.fire('LoadContent',a);}a.element=e=null;return h;}},save:function(a){var b=this,e=b.getElement(),h,i;if(!e||!b.initialized){return;}a=a||{};a.save=true;a.element=e;h=a.content=b.getContent(a);if(!a.no_events){b.fire('SaveContent',a);}h=a.content;if(!/TEXTAREA|INPUT/i.test(e.nodeName)){if(!b.inline){e.innerHTML=h;}if((i=K.getParent(b.id,'form'))){O(i.elements,function(e){if(e.name==b.id){e.value=h;return false;}});}}else{e.value=h;}a.element=e=null;if(a.set_dirty!==false){b.isNotDirty=true;}return h;},setContent:function(a,b){var e=this,h=e.getBody(),i;b=b||{};b.format=b.format||'html';b.set=true;b.content=a;if(!b.no_events){e.fire('BeforeSetContent',b);}a=b.content;if(a.length===0||/^\s+$/.test(a)){i=e.settings.forced_root_block;if(i&&e.schema.isValidChild(h.nodeName.toLowerCase(),i.toLowerCase())){a=$&&$<11?'':'<br data-mce-bogus="1">';a=e.dom.createHTML(i,e.settings.forced_root_block_attrs,a);}else if(!$){a='<br data-mce-bogus="1">';}e.dom.setHTML(h,a);e.fire('SetContent',b);}else{if(b.format!=='raw'){a=new S({},e.schema).serialize(e.parser.parse(a,{isRootContent:true}));}b.content=X(a);e.dom.setHTML(h,b.content);if(!b.no_events){e.fire('SetContent',b);}}return b.content;},getContent:function(a){var b=this,e,h=b.getBody();a=a||{};a.format=a.format||'html';a.get=true;a.getInner=true;if(!a.no_events){b.fire('BeforeGetContent',a);}if(a.format=='raw'){e=h.innerHTML;}else if(a.format=='text'){e=h.innerText||h.textContent;}else{e=b.serializer.serialize(h,a);}if(a.format!='text'){a.content=X(e);}else{a.content=e;}if(!a.no_events){b.fire('GetContent',a);}return a.content;},insertContent:function(a,b){if(b){a=M({content:a},b);}this.execCommand('mceInsertContent',false,a);},isDirty:function(){return!this.isNotDirty;},getContainer:function(){var a=this;if(!a.container){a.container=K.get(a.editorContainer||a.id+'_parent');}return a.container;},getContentAreaContainer:function(){return this.contentAreaContainer;},getElement:function(){if(!this.targetElm){this.targetElm=K.get(this.id);}return this.targetElm;},getWin:function(){var a=this,e;if(!a.contentWindow){e=a.iframeElement;if(e){a.contentWindow=e.contentWindow;}}return a.contentWindow;},getDoc:function(){var a=this,w;if(!a.contentDocument){w=a.getWin();if(w){a.contentDocument=w.document;}}return a.contentDocument;},getBody:function(){return this.bodyElement||this.getDoc().body;},convertURL:function(u,n,e){var a=this,b=a.settings;if(b.urlconverter_callback){return a.execCallback('urlconverter_callback',u,e,true,n);}if(!b.convert_urls||(e&&e.nodeName=='LINK')||u.indexOf('file:')===0||u.length===0){return u;}if(b.relative_urls){return a.documentBaseURI.toRelative(u);}u=a.documentBaseURI.toAbsolute(u,b.remove_script_host);return u;},addVisual:function(e){var a=this,b=a.settings,h=a.dom,i;e=e||a.getBody();if(a.hasVisual===z){a.hasVisual=b.visual;}O(h.select('table,a',e),function(e){var n;switch(e.nodeName){case'TABLE':i=b.visual_table_class||'mce-item-table';n=h.getAttrib(e,'border');if((!n||n=='0')&&a.hasVisual){h.addClass(e,i);}else{h.removeClass(e,i);}return;case'A':if(!h.getAttrib(e,'href',false)){n=h.getAttrib(e,'name')||e.id;i=b.visual_anchor_class||'mce-item-anchor';if(n&&a.hasVisual){h.addClass(e,i);}else{h.removeClass(e,i);}}return;}});a.fire('VisualAid',{element:e,hasVisual:a.hasVisual});},remove:function(){var a=this;if(!a.removed){a.save();a.removed=1;a.unbindAllNativeEvents();if(a.hasHiddenInput){K.remove(a.getElement().nextSibling);}if(!a.inline){if($&&$<10){a.getDoc().execCommand('SelectAll',false,null);}K.setStyle(a.id,'display',a.orgDisplay);a.getBody().onload=null;}a.fire('remove');a.editorManager.remove(a);K.remove(a.getContainer());a.destroy();}},destroy:function(a){var b=this,e;if(b.destroyed){return;}if(!a&&!b.removed){b.remove();return;}if(!a){b.editorManager.off('beforeunload',b._beforeUnload);if(b.theme&&b.theme.destroy){b.theme.destroy();}b.selection.destroy();b.dom.destroy();}e=b.formElement;if(e){if(e._mceOldSubmit){e.submit=e._mceOldSubmit;e._mceOldSubmit=null;}K.unbind(e,'submit reset',b.formEventDelegate);}b.contentAreaContainer=b.formElement=b.container=b.editorContainer=null;b.bodyElement=b.contentDocument=b.contentWindow=null;b.iframeElement=b.targetElm=null;if(b.selection){b.selection=b.selection.win=b.selection.dom=b.selection.dom.doc=null;}b.destroyed=1;},_refreshContentEditable:function(){var a=this,b,p;if(a._isHidden()){b=a.getBody();p=b.parentNode;p.removeChild(b);p.appendChild(b);b.focus();}},_isHidden:function(){var a;if(!Z){return 0;}a=this.selection.getSel();return(!a||!a.rangeCount||a.rangeCount===0);}};M(_.prototype,I);return _;});
/**
 * I18n.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/I18n",[],function(){"use strict";var d={};return{rtl:false,add:function(c,i){for(var n in i){d[n]=i[n];}this.rtl=this.rtl||d._dir==='rtl';},translate:function(t){if(typeof(t)=="undefined"){return t;}if(typeof(t)!="string"&&t.raw){return t.raw;}if(t.push){var v=t.slice(1);t=(d[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(m,a){return v[a];});}return d[t]||t;},data:d};});
/**
 * FocusManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/FocusManager",["tinymce/dom/DOMUtils","tinymce/Env"],function(a,b){var s,d,c,f=a.DOM;function g(h){function i(){try{return document.activeElement;}catch(e){return document.body;}}function j(e,m){if(m&&m.startContainer){if(!e.isChildOf(m.startContainer,e.getRoot())||!e.isChildOf(m.endContainer,e.getRoot())){return;}return{startContainer:m.startContainer,startOffset:m.startOffset,endContainer:m.endContainer,endOffset:m.endOffset};}return m;}function k(e,m){var n;if(m.startContainer){n=e.getDoc().createRange();n.setStart(m.startContainer,m.startOffset);n.setEnd(m.endContainer,m.endOffset);}else{n=m;}return n;}function l(e){return!!f.getParent(e,g.isEditorUIElement);}function r(e){var m=e.editor;m.on('init',function(){if(m.inline||b.ie){if("onbeforedeactivate"in document&&b.ie<9){m.dom.bind(m.getBody(),'beforedeactivate',function(e){if(e.target!=m.getBody()){return;}try{m.lastRng=m.selection.getRng();}catch(n){}});}else{m.on('nodechange mouseup keyup',function(e){var n=i();if(e.type=='nodechange'&&e.selectionChange){return;}if(n&&n.id==m.id+'_ifr'){n=m.getBody();}if(m.dom.isChildOf(n,m.getBody())){m.lastRng=m.selection.getRng();}});}if(b.webkit&&!s){s=function(){var n=h.activeEditor;if(n&&n.selection){var o=n.selection.getRng();if(o&&!o.collapsed){m.lastRng=o;}}};f.bind(document,'selectionchange',s);}}});m.on('setcontent',function(){m.lastRng=null;});m.on('mousedown',function(){m.selection.lastFocusBookmark=null;});m.on('focusin',function(){var n=h.focusedEditor;if(m.selection.lastFocusBookmark){m.selection.setRng(k(m,m.selection.lastFocusBookmark));m.selection.lastFocusBookmark=null;}if(n!=m){if(n){n.fire('blur',{focusedEditor:m});}h.setActive(m);h.focusedEditor=m;m.fire('focus',{blurredEditor:n});m.focus(true);}m.lastRng=null;});m.on('focusout',function(){window.setTimeout(function(){var n=h.focusedEditor;if(!l(i())&&n==m){m.fire('blur',{focusedEditor:null});h.focusedEditor=null;if(m.selection){m.selection.lastFocusBookmark=null;}}},0);});if(!d){d=function(e){var n=h.activeEditor;if(n&&e.target.ownerDocument==document){if(n.selection&&e.target!=n.getBody()){n.selection.lastFocusBookmark=j(n.dom,n.lastRng);}if(e.target!=document.body&&!l(e.target)&&h.focusedEditor==n){n.fire('blur',{focusedEditor:null});h.focusedEditor=null;}}};f.bind(document,'focusin',d);}if(m.inline&&!c){c=function(e){var n=h.activeEditor;if(n.inline&&!n.dom.isChildOf(e.target,n.getBody())){var o=n.selection.getRng();if(!o.collapsed){n.lastRng=o;}}};f.bind(document,'mouseup',c);}}function u(e){if(h.focusedEditor==e.editor){h.focusedEditor=null;}if(!h.activeEditor){f.unbind(document,'selectionchange',s);f.unbind(document,'focusin',d);f.unbind(document,'mouseup',c);s=d=c=null;}}h.on('AddEditor',r);h.on('RemoveEditor',u);}g.isEditorUIElement=function(e){return e.className.toString().indexOf('mce-')!==-1;};return g;});
/**
 * EditorManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/EditorManager",["tinymce/Editor","tinymce/dom/DomQuery","tinymce/dom/DOMUtils","tinymce/util/URI","tinymce/Env","tinymce/util/Tools","tinymce/util/Observable","tinymce/util/I18n","tinymce/FocusManager"],function(a,b,c,U,d,T,O,I,g){var h=c.DOM;var j=T.explode,k=T.each,m=T.extend;var n=0,o,p;function r(e){var f=p.editors,l;delete f[e.id];for(var i=0;i<f.length;i++){if(f[i]==e){f.splice(i,1);l=true;break;}}if(p.activeEditor==e){p.activeEditor=f[0];}if(p.focusedEditor==e){p.focusedEditor=null;}return l;}function s(e){if(e&&!(e.getContainer()||e.getBody()).parentNode){r(e);e.unbindAllNativeEvents();e.destroy(true);e=null;}return e;}p={$:b,majorVersion:'4',minorVersion:'1.7',releaseDate:'2014-11-27',editors:[],i18n:I,activeEditor:null,setup:function(){var e=this,f,l,t="",u,v;l=document.location.href;if(/^[^:]+:\/\/\/?[^\/]+\//.test(l)){l=l.replace(/[\?#].*$/,'').replace(/[\/\\][^\/]+$/,'');if(!/[\/\\]$/.test(l)){l+='/';}}u=window.tinymce||window.tinyMCEPreInit;if(u){f=u.base||u.baseURL;t=u.suffix;}else{var w=document.getElementsByTagName('script');for(var i=0;i<w.length;i++){v=w[i].src;if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(v)){if(v.indexOf('.min')!=-1){t='.min';}f=v.substring(0,v.lastIndexOf('/'));break;}}if(!f&&document.currentScript){v=document.currentScript.src;if(v.indexOf('.min')!=-1){t='.min';}f=v.substring(0,v.lastIndexOf('/'));}}e.baseURL=new U(l).toAbsolute(f);e.documentBaseURL=l;e.baseURI=new U(e.baseURL);e.suffix=t;e.focusManager=new g(e);},init:function(i){var t=this,u=[];function v(e){var f=e.id;if(!f){f=e.name;if(f&&!h.get(f)){f=e.name;}else{f=h.uniqueId();}e.setAttribute('id',f);}return f;}function w(e,i,f){if(!s(t.get(e))){var l=new a(e,i,t);l.targetElm=l.targetElm||f;u.push(l);l.render();}}function x(e){var f=i[e];if(!f){return;}return f.apply(t,Array.prototype.slice.call(arguments,2));}function y(e,f){return f.constructor===RegExp?f.test(e.className):h.hasClass(e,f);}function G(){var l,H;h.unbind(window,'ready',G);x('onpageload');if(i.types){k(i.types,function(e){k(h.select(e.selector),function(f){w(v(f),m({},i,e),f);});});return;}else if(i.selector){k(h.select(i.selector),function(e){w(v(e),i,e);});return;}else if(i.target){w(v(i.target),i);}switch(i.mode){case"exact":l=i.elements||'';if(l.length>0){k(j(l),function(J){var K;if((K=h.get(J))){w(J,i,K);}else{k(document.forms,function(f){k(f.elements,function(e){if(e.name===J){J='mce_editor_'+n++;h.setAttrib(e,'id',J);w(J,i,e);}});});}});}break;case"textareas":case"specific_textareas":k(h.select('textarea'),function(e){if(i.editor_deselector&&y(e,i.editor_deselector)){return;}if(!i.editor_selector||y(e,i.editor_selector)){w(v(e),i,e);}});break;}if(i.oninit){l=H=0;k(u,function(e){H++;if(!e.initialized){e.on('init',function(){l++;if(l==H){x('oninit');}});}else{l++;}if(l==H){x('oninit');}});}}t.settings=i;h.bind(window,'ready',G);},get:function(i){if(!arguments.length){return this.editors;}return i in this.editors?this.editors[i]:null;},add:function(e){var f=this,i=f.editors;i[e.id]=e;i.push(e);f.activeEditor=e;f.fire('AddEditor',{editor:e});if(!o){o=function(){f.fire('BeforeUnload');};h.bind(window,'beforeunload',o);}return e;},createEditor:function(i,e){return this.add(new a(i,e,this));},remove:function(e){var f=this,i,l=f.editors,t;if(!e){for(i=l.length-1;i>=0;i--){f.remove(l[i]);}return;}if(typeof(e)=="string"){e=e.selector||e;k(h.select(e),function(u){t=l[u.id];if(t){f.remove(t);}});return;}t=e;if(!l[t.id]){return null;}if(r(t)){f.fire('RemoveEditor',{editor:t});}if(!l.length){h.unbind(window,'beforeunload',o);}t.remove();return t;},execCommand:function(e,u,v){var f=this,i=f.get(v);switch(e){case"mceAddEditor":if(!f.get(v)){new a(v,f.settings,f).render();}return true;case"mceRemoveEditor":if(i){i.remove();}return true;case'mceToggleEditor':if(!i){f.execCommand('mceAddEditor',0,v);return true;}if(i.isHidden()){i.show();}else{i.hide();}return true;}if(f.activeEditor){return f.activeEditor.execCommand(e,u,v);}return false;},triggerSave:function(){k(this.editors,function(e){e.save();});},addI18n:function(e,i){I.add(e,i);},translate:function(t){return I.translate(t);},setActive:function(e){var f=this.activeEditor;if(this.activeEditor!=e){if(f){f.fire('deactivate',{relatedTarget:e});}e.fire('activate',{relatedTarget:f});}this.activeEditor=e;}};m(p,O);p.setup();window.tinymce=window.tinyMCE=p;return p;});
/**
 * LegacyInput.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/LegacyInput",["tinymce/EditorManager","tinymce/util/Tools"],function(a,T){var b=T.each,c=T.explode;a.on('AddEditor',function(e){var d=e.editor;d.on('preInit',function(){var f,g,h,s=d.settings;function r(n,j){b(j,function(v,k){if(v){h.setStyle(n,k,v);}});h.rename(n,'span');}function i(e){h=d.dom;if(s.convert_fonts_to_spans){b(h.select('font,u,strike',e.node),function(n){f[n.nodeName.toLowerCase()](h,n);});}}if(s.inline_styles){g=c(s.font_size_legacy_values);f={font:function(h,n){r(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:g[parseInt(n.size,10)-1]});},u:function(h,n){r(n,{textDecoration:'underline'});},strike:function(h,n){r(n,{textDecoration:'line-through'});}};d.on('PreProcess SetContent',i);}});});});
/**
 * XHR.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/XHR",["tinymce/util/Observable","tinymce/util/Tools"],function(O,T){var X={send:function(s){var x,c=0;function r(){if(!s.async||x.readyState==4||c++>10000){if(s.success&&c<10000&&x.status==200){s.success.call(s.success_scope,''+x.responseText,x,s);}else if(s.error){s.error.call(s.error_scope,c>10000?'TIMED_OUT':'GENERAL',x,s);}x=null;}else{setTimeout(r,10);}}s.scope=s.scope||this;s.success_scope=s.success_scope||s.scope;s.error_scope=s.error_scope||s.scope;s.async=s.async===false?false:true;s.data=s.data||'';x=new XMLHttpRequest();if(x){if(x.overrideMimeType){x.overrideMimeType(s.content_type);}x.open(s.type||(s.data?'POST':'GET'),s.url,s.async);if(s.crossDomain){x.withCredentials=true;}if(s.content_type){x.setRequestHeader('Content-Type',s.content_type);}x.setRequestHeader('X-Requested-With','XMLHttpRequest');x=X.fire('beforeSend',{xhr:x,settings:s}).xhr;x.send(s.data);if(!s.async){return r();}setTimeout(r,10);}}};T.extend(X,O);return X;});
/**
 * JSON.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/JSON",[],function(){function s(o,c){var i,v,t,n;c=c||'"';if(o===null){return'null';}t=typeof o;if(t=='string'){v='\bb\tt\nn\ff\rr\""\'\'\\\\';return c+o.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if(c==='"'&&a==="'"){return a;}i=v.indexOf(b);if(i+1){return'\\'+v.charAt(i+1);}a=b.charCodeAt().toString(16);return'\\u'+'0000'.substring(a.length)+a;})+c;}if(t=='object'){if(o.hasOwnProperty&&Object.prototype.toString.call(o)==='[object Array]'){for(i=0,v='[';i<o.length;i++){v+=(i>0?',':'')+s(o[i],c);}return v+']';}v='{';for(n in o){if(o.hasOwnProperty(n)){v+=typeof o[n]!='function'?(v.length>1?','+c:c)+n+c+':'+s(o[n],c):'';}}return v+'}';}return''+o;}return{serialize:s,parse:function(t){try{return window[String.fromCharCode(101)+'val']('('+t+')');}catch(e){}}};});
/**
 * JSONRequest.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/JSONRequest",["tinymce/util/JSON","tinymce/util/XHR","tinymce/util/Tools"],function(J,X,T){var e=T.extend;function a(s){this.settings=e({},s);this.count=0;}a.sendRPC=function(o){return new a().send(o);};a.prototype={send:function(b){var d=b.error,s=b.success;b=e(this.settings,b);b.success=function(c,x){c=J.parse(c);if(typeof(c)=='undefined'){c={error:'JSON Parse error.'};}if(c.error){d.call(b.error_scope||b.scope,c.error,x);}else{s.call(b.success_scope||b.scope,c.result);}};b.error=function(t,x){if(d){d.call(b.error_scope||b.scope,t,x);}};b.data=J.serialize({id:b.id||'c'+(this.count++),method:b.method,params:b.params});b.content_type='application/json';X.send(b);}};return a;});
/**
 * JSONP.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/JSONP",["tinymce/dom/DOMUtils"],function(a){return{callbacks:{},count:0,send:function(s){var b=this,d=a.DOM,c=s.count!==z?s.count:b.count;var i='tinymce_jsonp_'+c;b.callbacks[c]=function(j){d.remove(i);delete b.callbacks[c];s.callback(j);};d.add(d.doc.body,'script',{id:i,src:s.url,type:'text/javascript'});b.count++;}};});
/**
 * LocalStorage.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/LocalStorage",[],function(){var L,s,i,k,u,h;try{if(window.localStorage){return localStorage;}}catch(e){}u="tinymce";s=document.documentElement;h=!!s.addBehavior;if(h){s.addBehavior('#default#userData');}function a(){k=[];for(var c in i){k.push(c);}L.length=k.length;}function l(){var c,d,v,p=0;i={};if(!h){return;}function n(f){var v,g;g=f!==z?p+f:d.indexOf(',',p);if(g===-1||g>d.length){return null;}v=d.substring(p,g);p=g+1;return v;}s.load(u);d=s.getAttribute(u)||'';do{var o=n();if(o===null){break;}c=n(parseInt(o,32)||0);if(c!==null){o=n();if(o===null){break;}v=n(parseInt(o,32)||0);if(c){i[c]=v;}}}while(c!==null);a();}function b(){var v,d='';if(!h){return;}for(var c in i){v=i[c];d+=(d?',':'')+c.length.toString(32)+','+c+','+v.length.toString(32)+','+v;}s.setAttribute(u,d);try{s.save(u);}catch(e){}a();}L={key:function(c){return k[c];},getItem:function(c){return c in i?i[c]:null;},setItem:function(c,v){i[c]=""+v;b();},removeItem:function(c){delete i[c];b();},clear:function(){i={};b();}};l();return L;});
/**
 * Compat.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/Compat",["tinymce/dom/DOMUtils","tinymce/dom/EventUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/util/Tools","tinymce/Env"],function(a,b,S,c,T,d){var t=window.tinymce;t.DOM=a.DOM;t.ScriptLoader=S.ScriptLoader;t.PluginManager=c.PluginManager;t.ThemeManager=c.ThemeManager;t.dom=t.dom||{};t.dom.Event=b.Event;T.each(T,function(f,k){t[k]=f;});T.each('isOpera isWebKit isIE isGecko isMac'.split(' '),function(n){t[n]=d[n.substr(2).toLowerCase()];});return{};});
/**
 * Layout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Layout",["tinymce/util/Class","tinymce/util/Tools"],function(a,T){"use strict";return a.extend({Defaults:{firstControlClass:'first',lastControlClass:'last'},init:function(s){this.settings=T.extend({},this.Defaults,s);},preRender:function(c){c.addClass(this.settings.containerClass,'body');},applyClasses:function(c){var s=this,b=s.settings,i,f,l;i=c.items().filter(':visible');f=b.firstControlClass;l=b.lastControlClass;i.each(function(d){d.removeClass(f).removeClass(l);if(b.controlClass){d.addClass(b.controlClass);}});i.eq(0).addClass(f);i.eq(-1).addClass(l);},renderHtml:function(c){var s=this,b=s.settings,i,h='';i=c.items();i.eq(0).addClass(b.firstControlClass);i.eq(-1).addClass(b.lastControlClass);i.each(function(d){if(b.controlClass){d.addClass(b.controlClass);}h+=d.renderHtml();});return h;},recalc:function(){},postRender:function(){}});});
/**
 * AbsoluteLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/AbsoluteLayout",["tinymce/ui/Layout"],function(L){"use strict";return L.extend({Defaults:{containerClass:'abs-layout',controlClass:'abs-layout-item'},recalc:function(c){c.items().filter(':visible').each(function(a){var s=a.settings;a.layoutRect({x:s.x,y:s.y,w:s.w,h:s.h});if(a.recalc){a.recalc();}});},renderHtml:function(c){return'<div id="'+c._id+'-absend" class="'+c.classPrefix+'abs-end"></div>'+this._super(c);}});});
/**
 * Tooltip.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Tooltip",["tinymce/ui/Control","tinymce/ui/Movable"],function(a,M){return a.extend({Mixins:[M],Defaults:{classes:'widget tooltip tooltip-n'},text:function(v){var s=this;if(typeof(v)!="undefined"){s._value=v;if(s._rendered){s.getEl().lastChild.innerHTML=s.encode(v);}return s;}return s._value;},renderHtml:function(){var s=this,p=s.classPrefix;return('<div id="'+s._id+'" class="'+s.classes()+'" role="presentation">'+'<div class="'+p+'tooltip-arrow"></div>'+'<div class="'+p+'tooltip-inner">'+s.encode(s._text)+'</div>'+'</div>');},repaint:function(){var s=this,b,r;b=s.getEl().style;r=s._layoutRect;b.left=r.x+'px';b.top=r.y+'px';b.zIndex=0xFFFF+0xFFFF;}});});
/**
 * Widget.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Widget",["tinymce/ui/Control","tinymce/ui/Tooltip"],function(a,T){"use strict";var t;var W=a.extend({init:function(s){var b=this;b._super(s);s=b.settings;b.canFocus=true;if(s.tooltip&&W.tooltips!==false){b.on('mouseenter',function(e){var t=b.tooltip().moveTo(-0xFFFF);if(e.control==b){var r=t.text(s.tooltip).show().testMoveRel(b.getEl(),['bc-tc','bc-tl','bc-tr']);t.toggleClass('tooltip-n',r=='bc-tc');t.toggleClass('tooltip-nw',r=='bc-tl');t.toggleClass('tooltip-ne',r=='bc-tr');t.moveRel(b.getEl(),r);}else{t.hide();}});b.on('mouseleave mousedown click',function(){b.tooltip().hide();});}b.aria('label',s.ariaLabel||s.tooltip);},tooltip:function(){if(!t){t=new T({type:'tooltip'});t.renderTo();}return t;},active:function(s){var b=this,u;if(s!==u){b.aria('pressed',s);b.toggleClass('active',s);}return b._super(s);},disabled:function(s){var b=this,u;if(s!==u){b.aria('disabled',s);b.toggleClass('disabled',s);}return b._super(s);},postRender:function(){var s=this,b=s.settings;s._rendered=true;s._super();if(!s.parent()&&(b.width||b.height)){s.initLayoutRect();s.repaint();}if(b.autofocus){s.focus();}},remove:function(){this._super();if(t){t.remove();t=null;}}});return W;});
/**
 * Button.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Button",["tinymce/ui/Widget"],function(W){"use strict";return W.extend({Defaults:{classes:"widget btn",role:"button"},init:function(s){var a=this,b;a.on('click mousedown',function(e){e.preventDefault();});a._super(s);b=s.size;if(s.subtype){a.addClass(s.subtype);}if(b){a.addClass('btn-'+b);}},icon:function(i){var s=this,p=s.classPrefix;if(typeof(i)=='undefined'){return s.settings.icon;}s.settings.icon=i;i=i?p+'ico '+p+'i-'+s.settings.icon:'';if(s._rendered){var b=s.getEl().firstChild,a=b.getElementsByTagName('i')[0];if(i){if(!a||a!=b.firstChild){a=document.createElement('i');b.insertBefore(a,b.firstChild);}a.className=i;}else if(a){b.removeChild(a);}s.text(s._text);}return s;},repaint:function(){var b=this.getEl().firstChild.style;b.width=b.height="100%";this._super();},text:function(t){var s=this;if(s._rendered){var a=s.getEl().lastChild.lastChild;if(a){a.data=s.translate(t);}}return s._super(t);},renderHtml:function(){var s=this,i=s._id,p=s.classPrefix;var a=s.settings.icon,b;b=s.settings.image;if(b){a='none';if(typeof b!="string"){b=window.getSelection?b[0]:b[1];}b=' style="background-image: url(\''+b+'\')"';}else{b='';}a=s.settings.icon?p+'ico '+p+'i-'+a:'';return('<div id="'+i+'" class="'+s.classes()+'" tabindex="-1" aria-labelledby="'+i+'">'+'<button role="presentation" type="button" tabindex="-1">'+(a?'<i class="'+a+'"'+b+'></i>':'')+(s._text?(a?'\u00a0':'')+s.encode(s._text):'')+'</button>'+'</div>');}});});
/**
 * ButtonGroup.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/ButtonGroup",["tinymce/ui/Container"],function(a){"use strict";return a.extend({Defaults:{defaultType:'button',role:'group'},renderHtml:function(){var s=this,l=s._layout;s.addClass('btn-group');s.preRender();l.preRender(s);return('<div id="'+s._id+'" class="'+s.classes()+'">'+'<div id="'+s._id+'-body">'+(s.settings.html||'')+l.renderHtml(s)+'</div>'+'</div>');}});});
/**
 * Checkbox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Checkbox",["tinymce/ui/Widget"],function(W){"use strict";return W.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:false},init:function(s){var a=this;a._super(s);a.on('click mousedown',function(e){e.preventDefault();});a.on('click',function(e){e.preventDefault();if(!a.disabled()){a.checked(!a.checked());}});a.checked(a.settings.checked);},checked:function(s){var a=this;if(typeof s!="undefined"){if(s){a.addClass('checked');}else{a.removeClass('checked');}a._checked=s;a.aria('checked',s);return a;}return a._checked;},value:function(s){return this.checked(s);},renderHtml:function(){var s=this,i=s._id,p=s.classPrefix;return('<div id="'+i+'" class="'+s.classes()+'" unselectable="on" aria-labelledby="'+i+'-al" tabindex="-1">'+'<i class="'+p+'ico '+p+'i-checkbox"></i>'+'<span id="'+i+'-al" class="'+p+'label">'+s.encode(s._text)+'</span>'+'</div>');}});});
/**
 * ComboBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/ComboBox",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/ui/DomUtils"],function(W,a,b){"use strict";return W.extend({init:function(s){var c=this;c._super(s);c.addClass('combobox');c.subinput=true;c.ariaTarget='inp';s=c.settings;s.menu=s.menu||s.values;if(s.menu){s.icon='caret';}c.on('click',function(e){var d=e.target,r=c.getEl();while(d&&d!=r){if(d.id&&d.id.indexOf('-open')!=-1){c.fire('action');if(s.menu){c.showMenu();if(e.aria){c.menu.items()[0].focus();}}}d=d.parentNode;}});c.on('keydown',function(e){if(e.target.nodeName=="INPUT"&&e.keyCode==13){c.parents().reverse().each(function(d){e.preventDefault();c.fire('change');if(d.hasEventListeners('submit')&&d.toJSON){d.fire('submit',{data:d.toJSON()});return false;}});}});if(s.placeholder){c.addClass('placeholder');c.on('focusin',function(){if(!c._hasOnChange){b.on(c.getEl('inp'),'change',function(){c.fire('change');});c._hasOnChange=true;}if(c.hasClass('placeholder')){c.getEl('inp').value='';c.removeClass('placeholder');}});c.on('focusout',function(){if(c.value().length===0){c.getEl('inp').value=s.placeholder;c.addClass('placeholder');}});}},showMenu:function(){var s=this,c=s.settings,m;if(!s.menu){m=c.menu||[];if(m.length){m={type:'menu',items:m};}else{m.type=m.type||'menu';}s.menu=a.create(m).parent(s).renderTo(s.getContainerElm());s.fire('createmenu');s.menu.reflow();s.menu.on('cancel',function(e){if(e.control===s.menu){s.focus();}});s.menu.on('show hide',function(e){e.control.items().each(function(d){d.active(d.value()==s.value());});}).fire('show');s.menu.on('select',function(e){s.value(e.control.value());});s.on('focusin',function(e){if(e.target.tagName.toUpperCase()=='INPUT'){s.menu.hide();}});s.aria('expanded',true);}s.menu.show();s.menu.layoutRect({w:s.layoutRect().w});s.menu.moveRel(s.getEl(),s.isRtl()?['br-tr','tr-br']:['bl-tl','tl-bl']);},value:function(v){var s=this;if(typeof(v)!="undefined"){s._value=v;s.removeClass('placeholder');if(s._rendered){s.getEl('inp').value=v;}return s;}if(s._rendered){v=s.getEl('inp').value;if(v!=s.settings.placeholder){return v;}return'';}return s._value;},disabled:function(s){var c=this;if(c._rendered&&typeof(s)!='undefined'){c.getEl('inp').disabled=s;}return c._super(s);},focus:function(){this.getEl('inp').focus();},repaint:function(){var s=this,e=s.getEl(),o=s.getEl('open'),r=s.layoutRect();var w,l;if(o){w=r.w-b.getSize(o).width-10;}else{w=r.w-10;}var d=document;if(d.all&&(!d.documentMode||d.documentMode<=8)){l=(s.layoutRect().h-2)+'px';}b.css(e.firstChild,{width:w,lineHeight:l});s._super();return s;},postRender:function(){var s=this;b.on(this.getEl('inp'),'change',function(){s.fire('change');});return s._super();},remove:function(){b.off(this.getEl('inp'));this._super();},renderHtml:function(){var s=this,i=s._id,c=s.settings,p=s.classPrefix;var v=c.value||c.placeholder||'';var d,t,o='',e='';if("spellcheck"in c){e+=' spellcheck="'+c.spellcheck+'"';}if(c.maxLength){e+=' maxlength="'+c.maxLength+'"';}if(c.size){e+=' size="'+c.size+'"';}if(c.subtype){e+=' type="'+c.subtype+'"';}if(s.disabled()){e+=' disabled="disabled"';}d=c.icon;if(d&&d!='caret'){d=p+'ico '+p+'i-'+c.icon;}t=s._text;if(d||t){o=('<div id="'+i+'-open" class="'+p+'btn '+p+'open" tabIndex="-1" role="button">'+'<button id="'+i+'-action" type="button" hidefocus="1" tabindex="-1">'+(d!='caret'?'<i class="'+d+'"></i>':'<i class="'+p+'caret"></i>')+(t?(d?' ':'')+t:'')+'</button>'+'</div>');s.addClass('has-open');}return('<div id="'+i+'" class="'+s.classes()+'">'+'<input id="'+i+'-inp" class="'+p+'textbox '+p+'placeholder" value="'+v+'" hidefocus="1"'+e+' />'+o+'</div>');}});});
/**
 * ColorBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/ColorBox",["tinymce/ui/ComboBox"],function(a){"use strict";return a.extend({init:function(s){var b=this;s.spellcheck=false;if(s.onaction){s.icon='none';}b._super(s);b.addClass('colorbox');b.on('change keyup postrender',function(){b.repaintColor(b.value());});},repaintColor:function(v){var e=this.getEl().getElementsByTagName('i')[0];if(e){try{e.style.background=v;}catch(b){}}},value:function(v){var s=this;if(typeof v!="undefined"){if(s._rendered){s.repaintColor(v);}}return s._super(v);}});});
/**
 * PanelButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/PanelButton",["tinymce/ui/Button","tinymce/ui/FloatPanel"],function(a,b){"use strict";return a.extend({showPanel:function(){var s=this,c=s.settings;s.active(true);if(!s.panel){var p=c.panel;if(p.type){p={layout:'grid',items:p};}p.role=p.role||'dialog';p.popover=true;p.autohide=true;p.ariaRoot=true;s.panel=new b(p).on('hide',function(){s.active(false);}).on('cancel',function(e){e.stopPropagation();s.focus();s.hidePanel();}).parent(s).renderTo(s.getContainerElm());s.panel.fire('show');s.panel.reflow();}else{s.panel.show();}s.panel.moveRel(s.getEl(),c.popoverAlign||(s.isRtl()?['bc-tr','bc-tc']:['bc-tl','bc-tc']));},hidePanel:function(){var s=this;if(s.panel){s.panel.hide();}},postRender:function(){var s=this;s.aria('haspopup',true);s.on('click',function(e){if(e.control===s){if(s.panel&&s.panel.visible()){s.hidePanel();}else{s.showPanel();s.panel.focus(!!e.aria);}}});return s._super();},remove:function(){if(this.panel){this.panel.remove();this.panel=null;}return this._super();}});});
/**
 * ColorButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/ColorButton",["tinymce/ui/PanelButton","tinymce/dom/DOMUtils"],function(P,a){"use strict";var b=a.DOM;return P.extend({init:function(s){this._super(s);this.addClass('colorbutton');},color:function(c){if(c){this._color=c;this.getEl('preview').style.backgroundColor=c;return this;}return this._color;},renderHtml:function(){var s=this,i=s._id,p=s.classPrefix;var c=s.settings.icon?p+'ico '+p+'i-'+s.settings.icon:'';var d=s.settings.image?' style="background-image: url(\''+s.settings.image+'\')"':'';return('<div id="'+i+'" class="'+s.classes()+'" role="button" tabindex="-1" aria-haspopup="true">'+'<button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(c?'<i class="'+c+'"'+d+'></i>':'')+'<span id="'+i+'-preview" class="'+p+'preview"></span>'+(s._text?(c?' ':'')+(s._text):'')+'</button>'+'<button type="button" class="'+p+'open" hidefocus="1" tabindex="-1">'+' <i class="'+p+'caret"></i>'+'</button>'+'</div>');},postRender:function(){var s=this,o=s.settings.onclick;s.on('click',function(e){if(e.aria&&e.aria.key=='down'){return;}if(e.control==s&&!b.getParent(e.target,'.'+s.classPrefix+'open')){e.stopImmediatePropagation();o.call(s,e);}});delete s.settings.onclick;return s._super();}});});
/**
 * Color.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/util/Color",[],function(){var m=Math.min,a=Math.max,c=Math.round;function e(f){var i=this,r=0,g=0,b=0;function j(r,g,b){var h,s,v,d,o,u;h=0;s=0;v=0;r=r/255;g=g/255;b=b/255;o=m(r,m(g,b));u=a(r,a(g,b));if(o==u){v=o;return{h:0,s:0,v:v*100};}d=(r==o)?g-b:((b==o)?r-g:b-r);h=(r==o)?3:((b==o)?1:5);h=60*(h-d/(u-o));s=(u-o)/u;v=u;return{h:c(h),s:c(s*100),v:c(v*100)};}function k(h,s,d){var o,u,x,v;h=(parseInt(h,10)||0)%360;s=parseInt(s,10)/100;d=parseInt(d,10)/100;s=a(0,m(s,1));d=a(0,m(d,1));if(s===0){r=g=b=c(255*d);return;}o=h/60;u=d*s;x=u*(1-Math.abs(o%2-1));v=d-u;switch(Math.floor(o)){case 0:r=u;g=x;b=0;break;case 1:r=x;g=u;b=0;break;case 2:r=0;g=u;b=x;break;case 3:r=0;g=x;b=u;break;case 4:r=x;g=0;b=u;break;case 5:r=u;g=0;b=x;break;default:r=g=b=0;}r=c(255*(r+v));g=c(255*(g+v));b=c(255*(b+v));}function t(){function h(v){v=parseInt(v,10).toString(16);return v.length>1?v:'0'+v;}return'#'+h(r)+h(g)+h(b);}function l(){return{r:r,g:g,b:b};}function n(){return j(r,g,b);}function p(f){var d;if(typeof f=='object'){if("r"in f){r=f.r;g=f.g;b=f.b;}else if("v"in f){k(f.h,f.s,f.v);}}else{if((d=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(f))){r=parseInt(d[1],10);g=parseInt(d[2],10);b=parseInt(d[3],10);}else if((d=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(f))){r=parseInt(d[1],16);g=parseInt(d[2],16);b=parseInt(d[3],16);}else if((d=/#([0-F])([0-F])([0-F])/gi.exec(f))){r=parseInt(d[1]+d[1],16);g=parseInt(d[2]+d[2],16);b=parseInt(d[3]+d[3],16);}}r=r<0?0:(r>255?255:r);g=g<0?0:(g>255?255:g);b=b<0?0:(b>255?255:b);return i;}if(f){p(f);}i.toRgb=l;i.toHsv=n;i.toHex=t;i.parse=p;}return e;});
/**
 * ColorPicker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/ColorPicker",["tinymce/ui/Widget","tinymce/ui/DragHelper","tinymce/ui/DomUtils","tinymce/util/Color"],function(W,a,b,c){"use strict";return W.extend({Defaults:{classes:"widget colorpicker"},init:function(s){this._super(s);},postRender:function(){var s=this,d=s.color(),h,f,g,i,j;f=s.getEl('h');g=s.getEl('hp');i=s.getEl('sv');j=s.getEl('svp');function k(e,n){var p=b.getPos(e),x,y;x=n.pageX-p.x;y=n.pageY-p.y;x=Math.max(0,Math.min(x/e.clientWidth,1));y=Math.max(0,Math.min(y/e.clientHeight,1));return{x:x,y:y};}function u(h,e){var n=(360-h.h)/360;b.css(g,{top:(n*100)+'%'});if(!e){b.css(j,{left:h.s+'%',top:(100-h.v)+'%'});}i.style.background=new c({s:100,v:100,h:h.h}).toHex();s.color().parse({s:h.s,v:h.v,h:h.h});}function l(e){var p;p=k(i,e);h.s=p.x*100;h.v=(1-p.y)*100;u(h);s.fire('change');}function m(e){var p;p=k(f,e);h=d.toHsv();h.h=(1-p.y)*360;u(h,true);s.fire('change');}s._repaint=function(){h=d.toHsv();u(h);};s._super();s._svdraghelper=new a(s._id+'-sv',{start:l,drag:l});s._hdraghelper=new a(s._id+'-h',{start:m,drag:m});s._repaint();},rgb:function(){return this.color().toRgb();},value:function(v){var s=this;if(arguments.length){s.color().parse(v);if(s._rendered){s._repaint();}}else{return s.color().toHex();}},color:function(){if(!this._color){this._color=new c();}return this._color;},renderHtml:function(){var s=this,d=s._id,p=s.classPrefix,h;var e='#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000';function g(){var i,l,j='',k,m;k='filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=';m=e.split(',');for(i=0,l=m.length-1;i<l;i++){j+=('<div class="'+p+'colorpicker-h-chunk" style="'+'height:'+(100/l)+'%;'+k+m[i]+',endColorstr='+m[i+1]+');'+'-ms-'+k+m[i]+',endColorstr='+m[i+1]+')'+'"></div>');}return j;}var f=('background: -ms-linear-gradient(top,'+e+');'+'background: linear-gradient(to bottom,'+e+');');h=('<div id="'+d+'-h" class="'+p+'colorpicker-h" style="'+f+'">'+g()+'<div id="'+d+'-hp" class="'+p+'colorpicker-h-marker"></div>'+'</div>');return('<div id="'+d+'" class="'+s.classes()+'">'+'<div id="'+d+'-sv" class="'+p+'colorpicker-sv">'+'<div class="'+p+'colorpicker-overlay1">'+'<div class="'+p+'colorpicker-overlay2">'+'<div id="'+d+'-svp" class="'+p+'colorpicker-selector1">'+'<div class="'+p+'colorpicker-selector2"></div>'+'</div>'+'</div>'+'</div>'+'</div>'+h+'</div>');}});});
/**
 * Path.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Path",["tinymce/ui/Widget"],function(W){"use strict";return W.extend({init:function(s){var a=this;if(!s.delimiter){s.delimiter='\u00BB';}a._super(s);a.addClass('path');a.canFocus=true;a.on('click',function(e){var i,t=e.target;if((i=t.getAttribute('data-index'))){a.fire('select',{value:a.data()[i],index:i});}});},focus:function(){var s=this;s.getEl().firstChild.focus();return s;},data:function(d){var s=this;if(typeof(d)!=="undefined"){s._data=d;s.update();return s;}return s._data;},update:function(){this.innerHtml(this._getPathHtml());},postRender:function(){var s=this;s._super();s.data(s.settings.data);},renderHtml:function(){var s=this;return('<div id="'+s._id+'" class="'+s.classes()+'">'+s._getPathHtml()+'</div>');},_getPathHtml:function(){var s=this,p=s._data||[],i,l,h='',a=s.classPrefix;for(i=0,l=p.length;i<l;i++){h+=((i>0?'<div class="'+a+'divider" aria-hidden="true"> '+s.settings.delimiter+' </div>':'')+'<div role="button" class="'+a+'path-item'+(i==l-1?' '+a+'last':'')+'" data-index="'+i+'" tabindex="-1" id="'+s._id+'-'+i+'" aria-level="'+i+'">'+p[i].name+'</div>');}if(!h){h='<div class="'+a+'path-item">\u00a0</div>';}return h;}});});
/**
 * ElementPath.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/ElementPath",["tinymce/ui/Path","tinymce/EditorManager"],function(P,a){return P.extend({postRender:function(){var s=this,b=a.activeEditor;function c(e){if(e.nodeType===1){if(e.nodeName=="BR"||!!e.getAttribute('data-mce-bogus')){return true;}if(e.getAttribute('data-mce-type')==='bookmark'){return true;}}return false;}s.on('select',function(e){b.focus();b.selection.select(this.data()[e.index].element);b.nodeChanged();});b.on('nodeChange',function(e){var o=[],p=e.parents,i=p.length;while(i--){if(p[i].nodeType==1&&!c(p[i])){var d=b.fire('ResolveName',{name:p[i].nodeName.toLowerCase(),target:p[i]});if(!d.isDefaultPrevented()){o.push({name:d.name,element:p[i]});}if(d.isPropagationStopped()){break;}}}s.data(o);});return s._super();}});});
/**
 * FormItem.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/FormItem",["tinymce/ui/Container"],function(a){"use strict";return a.extend({Defaults:{layout:'flex',align:'center',defaults:{flex:1}},renderHtml:function(){var s=this,l=s._layout,p=s.classPrefix;s.addClass('formitem');l.preRender(s);return('<div id="'+s._id+'" class="'+s.classes()+'" hidefocus="1" tabindex="-1">'+(s.settings.title?('<div id="'+s._id+'-title" class="'+p+'title">'+s.settings.title+'</div>'):'')+'<div id="'+s._id+'-body" class="'+s.classes('body')+'">'+(s.settings.html||'')+l.renderHtml(s)+'</div>'+'</div>');}});});
/**
 * Form.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Form",["tinymce/ui/Container","tinymce/ui/FormItem","tinymce/util/Tools"],function(a,b,T){"use strict";return a.extend({Defaults:{containerCls:'form',layout:'flex',direction:'column',align:'stretch',flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit();}}},preRender:function(){var s=this,i=s.items();if(!s.settings.formItemDefaults){s.settings.formItemDefaults={layout:'flex',autoResize:"overflow",defaults:{flex:1}};}i.each(function(c){var f,l=c.settings.label;if(l){f=new b(T.extend({items:{type:'label',id:c._id+'-l',text:l,flex:0,forId:c._id,disabled:c.disabled()}},s.settings.formItemDefaults));f.type='formitem';c.aria('labelledby',c._id+'-l');if(typeof(c.settings.flex)=="undefined"){c.settings.flex=1;}s.replace(c,f);f.add(c);}});},recalcLabels:function(){var s=this,m=0,l=[],i,c,d;if(s.settings.labelGapCalc===false){return;}if(s.settings.labelGapCalc=="children"){d=s.find('formitem');}else{d=s.items();}d.filter('formitem').each(function(e){var f=e.items()[0],g=f.getEl().clientWidth;m=g>m?g:m;l.push(f);});c=s.settings.labelGap||0;i=l.length;while(i--){l[i].settings.minWidth=m+c;}},visible:function(s){var v=this._super(s);if(s===true&&this._rendered){this.recalcLabels();}return v;},submit:function(){return this.fire('submit',{data:this.toJSON()});},postRender:function(){var s=this;s._super();s.recalcLabels();s.fromJSON(s.settings.data);}});});
/**
 * FieldSet.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/FieldSet",["tinymce/ui/Form"],function(a){"use strict";return a.extend({Defaults:{containerCls:'fieldset',layout:'flex',direction:'column',align:'stretch',flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var s=this,l=s._layout,p=s.classPrefix;s.preRender();l.preRender(s);return('<fieldset id="'+s._id+'" class="'+s.classes()+'" hidefocus="1" tabindex="-1">'+(s.settings.title?('<legend id="'+s._id+'-title" class="'+p+'fieldset-title">'+s.settings.title+'</legend>'):'')+'<div id="'+s._id+'-body" class="'+s.classes('body')+'">'+(s.settings.html||'')+l.renderHtml(s)+'</div>'+'</fieldset>');}});});
/**
 * FilePicker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/FilePicker",["tinymce/ui/ComboBox","tinymce/util/Tools"],function(a,T){"use strict";return a.extend({init:function(s){var b=this,e=tinymce.activeEditor,c=e.settings;var d,f,g;s.spellcheck=false;g=c.file_picker_types||c.file_browser_callback_types;if(g){g=T.makeMap(g,/[, ]/);}if(!g||g[s.filetype]){f=c.file_picker_callback;if(f&&(!g||g[s.filetype])){d=function(){var m=b.fire('beforecall').meta;m=T.extend({filetype:s.filetype},m);f.call(e,function(v,m){b.value(v).fire('change',{meta:m});},b.value(),m);};}else{f=c.file_browser_callback;if(f&&(!g||g[s.filetype])){d=function(){f(b.getEl('inp').id,b.value(),s.filetype,window);};}}}if(d){s.icon='browse';s.onaction=d;}b._super(s);}});});
/**
 * FitLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/FitLayout",["tinymce/ui/AbsoluteLayout"],function(a){"use strict";return a.extend({recalc:function(c){var b=c.layoutRect(),p=c.paddingBox();c.items().filter(':visible').each(function(d){d.layoutRect({x:p.left,y:p.top,w:b.innerW-p.right-p.left,h:b.innerH-p.top-p.bottom});if(d.recalc){d.recalc();}});}});});
/**
 * FlexLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/FlexLayout",["tinymce/ui/AbsoluteLayout"],function(a){"use strict";return a.extend({recalc:function(c){var i,l,b,d,e,f,g,p,s,t,h,j;var k,m,n,o,r=[],u,v,w,x,y,G;var H,I,J,K,L,M,N,O;var P,Q,R,S,T,U;var V,W;var X=Math.max,Y=Math.min;b=c.items().filter(':visible');d=c.layoutRect();e=c._paddingBox;f=c.settings;j=c.isRtl()?(f.direction||'row-reversed'):f.direction;g=f.align;p=c.isRtl()?(f.pack||'end'):f.pack;s=f.spacing||0;if(j=="row-reversed"||j=="column-reverse"){b=b.set(b.toArray().reverse());j=j.split('-')[0];}if(j=="column"){J="y";H="h";I="minH";K="maxH";M="innerH";L='top';N="deltaH";O="contentH";T="left";R="w";P="x";Q="innerW";S="minW";U="right";V="deltaW";W="contentW";}else{J="x";H="w";I="minW";K="maxW";M="innerW";L='left';N="deltaW";O="contentW";T="top";R="h";P="y";Q="innerH";S="minH";U="bottom";V="deltaH";W="contentH";}h=d[M]-e[L]-e[L];G=t=0;for(i=0,l=b.length;i<l;i++){k=b[i];m=k.layoutRect();n=k.settings;o=n.flex;h-=(i<l-1?s:0);if(o>0){t+=o;if(m[K]){r.push(k);}m.flex=o;}h-=m[I];u=e[T]+m[S]+e[U];if(u>G){G=u;}}x={};if(h<0){x[I]=d[I]-h+d[N];}else{x[I]=d[M]-h+d[N];}x[S]=G+d[V];x[O]=d[M]-h;x[W]=G;x.minW=Y(x.minW,d.maxW);x.minH=Y(x.minH,d.maxH);x.minW=X(x.minW,d.startMinWidth);x.minH=X(x.minH,d.startMinHeight);if(d.autoResize&&(x.minW!=d.minW||x.minH!=d.minH)){x.w=x.minW;x.h=x.minH;c.layoutRect(x);this.recalc(c);if(c._lastRect===null){var Z=c.parent();if(Z){Z._lastRect=null;Z.recalc();}}return;}w=h/t;for(i=0,l=r.length;i<l;i++){k=r[i];m=k.layoutRect();v=m[K];u=m[I]+m.flex*w;if(u>v){h-=(m[K]-m[I]);t-=m.flex;m.flex=0;m.maxFlexSize=v;}else{m.maxFlexSize=0;}}w=h/t;y=e[L];x={};if(t===0){if(p=="end"){y=h+e[L];}else if(p=="center"){y=Math.round((d[M]/2)-((d[M]-h)/2))+e[L];if(y<0){y=e[L];}}else if(p=="justify"){y=e[L];s=Math.floor(h/(b.length-1));}}x[P]=e[T];for(i=0,l=b.length;i<l;i++){k=b[i];m=k.layoutRect();u=m.maxFlexSize||m[I];if(g==="center"){x[P]=Math.round((d[Q]/2)-(m[R]/2));}else if(g==="stretch"){x[R]=X(m[S]||0,d[Q]-e[T]-e[U]);x[P]=e[T];}else if(g==="end"){x[P]=d[Q]-m[R]-e.top;}if(m.flex>0){u+=m.flex*w;}x[H]=u;x[J]=y;k.layoutRect(x);if(k.recalc){k.recalc();}y+=u+s;}}});});
/**
 * FlowLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/FlowLayout",["tinymce/ui/Layout"],function(L){return L.extend({Defaults:{containerClass:'flow-layout',controlClass:'flow-layout-item',endClass:'break'},recalc:function(c){c.items().filter(':visible').each(function(a){if(a.recalc){a.recalc();}});}});});
/**
 * FormatControls.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/FormatControls",["tinymce/ui/Control","tinymce/ui/Widget","tinymce/ui/FloatPanel","tinymce/util/Tools","tinymce/EditorManager","tinymce/Env"],function(a,W,b,T,c,d){var f=T.each;c.on('AddEditor',function(e){if(e.editor.rtl){a.rtl=true;}r(e.editor);});a.translate=function(t){return c.translate(t);};W.tooltips=!d.iOS;function r(g){var h;function j(i,o){return function(){var s=this;g.on('nodeChange',function(e){var p=g.formatter;var v=null;f(e.parents,function(u){f(i,function(w){if(o){if(p.matchNode(u,o,{value:w.value})){v=w.value;}}else{if(p.matchNode(u,w.value)){v=w.value;}}if(v){return false;}});if(v){return false;}});s.value(v);});};}function k(e){e=e.replace(/;$/,'').split(';');var i=e.length;while(i--){e[i]=e[i].split('=');}return e;}function l(){var i=0,o=[];var p=[{title:'Headings',items:[{title:'Heading 1',format:'h1'},{title:'Heading 2',format:'h2'},{title:'Heading 3',format:'h3'},{title:'Heading 4',format:'h4'},{title:'Heading 5',format:'h5'},{title:'Heading 6',format:'h6'}]},{title:'Inline',items:[{title:'Bold',icon:'bold',format:'bold'},{title:'Italic',icon:'italic',format:'italic'},{title:'Underline',icon:'underline',format:'underline'},{title:'Strikethrough',icon:'strikethrough',format:'strikethrough'},{title:'Superscript',icon:'superscript',format:'superscript'},{title:'Subscript',icon:'subscript',format:'subscript'},{title:'Code',icon:'code',format:'code'}]},{title:'Blocks',items:[{title:'Paragraph',format:'p'},{title:'Blockquote',format:'blockquote'},{title:'Div',format:'div'},{title:'Pre',format:'pre'}]},{title:'Alignment',items:[{title:'Left',icon:'alignleft',format:'alignleft'},{title:'Center',icon:'aligncenter',format:'aligncenter'},{title:'Right',icon:'alignright',format:'alignright'},{title:'Justify',icon:'alignjustify',format:'alignjustify'}]}];function s(e){var v=[];if(!e){return;}f(e,function(w){var x={text:w.title,icon:w.icon};if(w.items){x.menu=s(w.items);}else{var y=w.format||"custom"+i++;if(!w.format){w.name=y;o.push(w);}x.format=y;x.cmd=w.cmd;}v.push(x);});return v;}function u(){var e;if(g.settings.style_formats_merge){if(g.settings.style_formats){e=s(p.concat(g.settings.style_formats));}else{e=s(p);}}else{e=s(g.settings.style_formats||p);}return e;}g.on('init',function(){f(o,function(e){g.formatter.register(e.name,e);});});return{type:'menu',items:u(),onPostRender:function(e){g.fire('renderFormatsMenu',{control:e.control});},itemDefaults:{preview:true,textStyle:function(){if(this.settings.format){return g.formatter.getCssText(this.settings.format);}},onPostRender:function(){var e=this;e.parent().on('show',function(){var v,w;v=e.settings.format;if(v){e.disabled(!g.formatter.canApply(v));e.active(g.formatter.match(v));}w=e.settings.cmd;if(w){e.active(g.queryCommandState(w));}});},onclick:function(){if(this.settings.format){n(this.settings.format);}if(this.settings.cmd){g.execCommand(this.settings.cmd);}}}};}h=l();f({bold:'Bold',italic:'Italic',underline:'Underline',strikethrough:'Strikethrough',subscript:'Subscript',superscript:'Superscript'},function(e,i){g.addButton(i,{tooltip:e,onPostRender:function(){var s=this;if(g.formatter){g.formatter.formatChanged(i,function(o){s.active(o);});}else{g.on('init',function(){g.formatter.formatChanged(i,function(o){s.active(o);});});}},onclick:function(){n(i);}});});f({outdent:['Decrease indent','Outdent'],indent:['Increase indent','Indent'],cut:['Cut','Cut'],copy:['Copy','Copy'],paste:['Paste','Paste'],help:['Help','mceHelp'],selectall:['Select all','SelectAll'],removeformat:['Clear formatting','RemoveFormat'],visualaid:['Visual aids','mceToggleVisualAid'],newdocument:['New document','mceNewDocument']},function(i,e){g.addButton(e,{tooltip:i[0],cmd:i[1]});});f({blockquote:['Blockquote','mceBlockQuote'],numlist:['Numbered list','InsertOrderedList'],bullist:['Bullet list','InsertUnorderedList'],subscript:['Subscript','Subscript'],superscript:['Superscript','Superscript'],alignleft:['Align left','JustifyLeft'],aligncenter:['Align center','JustifyCenter'],alignright:['Align right','JustifyRight'],alignjustify:['Justify','JustifyFull']},function(i,e){g.addButton(e,{tooltip:i[0],cmd:i[1],onPostRender:function(){var s=this;if(g.formatter){g.formatter.formatChanged(e,function(o){s.active(o);});}else{g.on('init',function(){g.formatter.formatChanged(e,function(o){s.active(o);});});}}});});function t(e){return function(){var s=this;e=e=='redo'?'hasRedo':'hasUndo';function i(){return g.undoManager?g.undoManager[e]():false;}s.disabled(!i());g.on('Undo Redo AddUndo TypingUndo ClearUndos',function(){s.disabled(!i());});};}function m(){var s=this;g.on('VisualAid',function(e){s.active(e.hasVisual);});s.active(g.hasVisual);}g.addButton('undo',{tooltip:'Undo',onPostRender:t('undo'),cmd:'undo'});g.addButton('redo',{tooltip:'Redo',onPostRender:t('redo'),cmd:'redo'});g.addMenuItem('newdocument',{text:'New document',shortcut:'Ctrl+N',icon:'newdocument',cmd:'mceNewDocument'});g.addMenuItem('undo',{text:'Undo',icon:'undo',shortcut:'Ctrl+Z',onPostRender:t('undo'),cmd:'undo'});g.addMenuItem('redo',{text:'Redo',icon:'redo',shortcut:'Ctrl+Y',onPostRender:t('redo'),cmd:'redo'});g.addMenuItem('visualaid',{text:'Visual aids',selectable:true,onPostRender:m,cmd:'mceToggleVisualAid'});f({cut:['Cut','Cut','Ctrl+X'],copy:['Copy','Copy','Ctrl+C'],paste:['Paste','Paste','Ctrl+V'],selectall:['Select all','SelectAll','Ctrl+A'],bold:['Bold','Bold','Ctrl+B'],italic:['Italic','Italic','Ctrl+I'],underline:['Underline','Underline'],strikethrough:['Strikethrough','Strikethrough'],subscript:['Subscript','Subscript'],superscript:['Superscript','Superscript'],removeformat:['Clear formatting','RemoveFormat']},function(i,e){g.addMenuItem(e,{text:i[0],icon:e,shortcut:i[2],cmd:i[1]});});g.on('mousedown',function(){b.hideAll();});function n(e){if(e.control){e=e.control.value();}if(e){g.execCommand('mceToggleFormat',false,e);}}g.addButton('styleselect',{type:'menubutton',text:'Formats',menu:h});g.addButton('formatselect',function(){var i=[],e=k(g.settings.block_formats||'Paragraph=p;'+'Address=address;'+'Pre=pre;'+'Heading 1=h1;'+'Heading 2=h2;'+'Heading 3=h3;'+'Heading 4=h4;'+'Heading 5=h5;'+'Heading 6=h6');f(e,function(o){i.push({text:o[0],value:o[1],textStyle:function(){return g.formatter.getCssText(o[1]);}});});return{type:'listbox',text:e[0][0],values:i,fixedWidth:true,onselect:n,onPostRender:j(i)};});g.addButton('fontselect',function(){var i='Andale Mono=andale mono,times;'+'Arial=arial,helvetica,sans-serif;'+'Arial Black=arial black,avant garde;'+'Book Antiqua=book antiqua,palatino;'+'Comic Sans MS=comic sans ms,sans-serif;'+'Courier New=courier new,courier;'+'Georgia=georgia,palatino;'+'Helvetica=helvetica;'+'Impact=impact,chicago;'+'Symbol=symbol;'+'Tahoma=tahoma,arial,helvetica,sans-serif;'+'Terminal=terminal,monaco;'+'Times New Roman=times new roman,times;'+'Trebuchet MS=trebuchet ms,geneva;'+'Verdana=verdana,geneva;'+'Webdings=webdings;'+'Wingdings=wingdings,zapf dingbats';var o=[],p=k(g.settings.font_formats||i);f(p,function(e){o.push({text:{raw:e[0]},value:e[1],textStyle:e[1].indexOf('dings')==-1?'font-family:'+e[1]:''});});return{type:'listbox',text:'Font Family',tooltip:'Font Family',values:o,fixedWidth:true,onPostRender:j(o,'fontname'),onselect:function(e){if(e.control.settings.value){g.execCommand('FontName',false,e.control.settings.value);}}};});g.addButton('fontsizeselect',function(){var i=[],o='8pt 10pt 12pt 14pt 18pt 24pt 36pt';var p=g.settings.fontsize_formats||o;f(p.split(' '),function(e){var s=e,v=e;var u=e.split('=');if(u.length>1){s=u[0];v=u[1];}i.push({text:s,value:v});});return{type:'listbox',text:'Font Sizes',tooltip:'Font Sizes',values:i,fixedWidth:true,onPostRender:j(i,'fontsize'),onclick:function(e){if(e.control.settings.value){g.execCommand('FontSize',false,e.control.settings.value);}}};});g.addMenuItem('formats',{text:'Formats',menu:h});}});
/**
 * GridLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/GridLayout",["tinymce/ui/AbsoluteLayout"],function(a){"use strict";return a.extend({recalc:function(c){var s=c.settings,r,b,i,d,w,h,e,f,g,x,y,p,j,k,l,m,n,o,t,u,v,G,H=[],I=[],J,K,L,M,N,O;s=c.settings;i=c.items().filter(':visible');d=c.layoutRect();b=s.columns||Math.ceil(Math.sqrt(i.length));r=Math.ceil(i.length/b);n=s.spacingH||s.spacing||0;o=s.spacingV||s.spacing||0;t=s.alignH||s.align;u=s.alignV||s.align;l=c._paddingBox;N='reverseRows'in s?s.reverseRows:c.isRtl();if(t&&typeof(t)=="string"){t=[t];}if(u&&typeof(u)=="string"){u=[u];}for(x=0;x<b;x++){H.push(0);}for(y=0;y<r;y++){I.push(0);}for(y=0;y<r;y++){for(x=0;x<b;x++){g=i[y*b+x];if(!g){break;}f=g.layoutRect();J=f.minW;K=f.minH;H[x]=J>H[x]?J:H[x];I[y]=K>I[y]?K:I[y];}}L=d.innerW-l.left-l.right;for(v=0,x=0;x<b;x++){v+=H[x]+(x>0?n:0);L-=(x>0?n:0)+H[x];}M=d.innerH-l.top-l.bottom;for(G=0,y=0;y<r;y++){G+=I[y]+(y>0?o:0);M-=(y>0?o:0)+I[y];}v+=l.left+l.right;G+=l.top+l.bottom;e={};e.minW=v+(d.w-d.innerW);e.minH=G+(d.h-d.innerH);e.contentW=e.minW-d.deltaW;e.contentH=e.minH-d.deltaH;e.minW=Math.min(e.minW,d.maxW);e.minH=Math.min(e.minH,d.maxH);e.minW=Math.max(e.minW,d.startMinWidth);e.minH=Math.max(e.minH,d.startMinHeight);if(d.autoResize&&(e.minW!=d.minW||e.minH!=d.minH)){e.w=e.minW;e.h=e.minH;c.layoutRect(e);this.recalc(c);if(c._lastRect===null){var P=c.parent();if(P){P._lastRect=null;P.recalc();}}return;}if(d.autoResize){e=c.layoutRect(e);e.contentW=e.minW-d.deltaW;e.contentH=e.minH-d.deltaH;}var Q;if(s.packV=='start'){Q=0;}else{Q=M>0?Math.floor(M/r):0;}var R=0;var S=s.flexWidths;if(S){for(x=0;x<S.length;x++){R+=S[x];}}else{R=b;}var T=L/R;for(x=0;x<b;x++){H[x]+=S?S[x]*T:T;}j=l.top;for(y=0;y<r;y++){p=l.left;h=I[y]+Q;for(x=0;x<b;x++){if(N){O=y*b+b-1-x;}else{O=y*b+x;}g=i[O];if(!g){break;}k=g.settings;f=g.layoutRect();w=Math.max(H[x],f.startMinWidth);f.x=p;f.y=j;m=k.alignH||(t?(t[x]||t[0]):null);if(m=="center"){f.x=p+(w/2)-(f.w/2);}else if(m=="right"){f.x=p+w-f.w;}else if(m=="stretch"){f.w=w;}m=k.alignV||(u?(u[x]||u[0]):null);if(m=="center"){f.y=j+(h/2)-(f.h/2);}else if(m=="bottom"){f.y=j+h-f.h;}else if(m=="stretch"){f.h=h;}g.layoutRect(f);p+=w+n;if(g.recalc){g.recalc();}}j+=h+o;}}});});
/**
 * Iframe.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Iframe",["tinymce/ui/Widget"],function(W){"use strict";return W.extend({renderHtml:function(){var s=this;s.addClass('iframe');s.canFocus=false;return('<iframe id="'+s._id+'" class="'+s.classes()+'" tabindex="-1" src="'+(s.settings.url||"javascript:\'\'")+'" frameborder="0"></iframe>');},src:function(s){this.getEl().src=s;},html:function(h,c){var s=this,b=this.getEl().contentWindow.document.body;if(!b){setTimeout(function(){s.html(h);},0);}else{b.innerHTML=h;if(c){c();}}return this;}});});
/**
 * Label.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Label",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(W,a){"use strict";return W.extend({init:function(s){var b=this;b._super(s);b.addClass('widget');b.addClass('label');b.canFocus=false;if(s.multiline){b.addClass('autoscroll');}if(s.strong){b.addClass('strong');}},initLayoutRect:function(){var s=this,l=s._super();if(s.settings.multiline){var b=a.getSize(s.getEl());if(b.width>l.maxW){l.minW=l.maxW;s.addClass('multiline');}s.getEl().style.width=l.minW+'px';l.startMinH=l.h=l.minH=Math.min(l.maxH,a.getSize(s.getEl()).height);}return l;},repaint:function(){var s=this;if(!s.settings.multiline){s.getEl().style.lineHeight=s.layoutRect().h+'px';}return s._super();},text:function(t){var s=this;if(s._rendered&&t){this.innerHtml(s.encode(t));}return s._super(t);},renderHtml:function(){var s=this,f=s.settings.forId;return('<label id="'+s._id+'" class="'+s.classes()+'"'+(f?' for="'+f+'"':'')+'>'+s.encode(s._text)+'</label>');}});});
/**
 * Toolbar.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Toolbar",["tinymce/ui/Container"],function(a){"use strict";return a.extend({Defaults:{role:'toolbar',layout:'flow'},init:function(s){var b=this;b._super(s);b.addClass('toolbar');},postRender:function(){var s=this;s.items().addClass('toolbar-item');return s._super();}});});
/**
 * MenuBar.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/MenuBar",["tinymce/ui/Toolbar"],function(T){"use strict";return T.extend({Defaults:{role:'menubar',containerCls:'menubar',ariaRoot:true,defaults:{type:'menubutton'}}});});
/**
 * MenuButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/MenuButton",["tinymce/ui/Button","tinymce/ui/Factory","tinymce/ui/MenuBar"],function(a,b,M){"use strict";function c(n,p){while(n){if(p===n){return true;}n=n.parentNode;}return false;}var d=a.extend({init:function(s){var e=this;e._renderOpen=true;e._super(s);e.addClass('menubtn');if(s.fixedWidth){e.addClass('fixed-width');}e.aria('haspopup',true);e.hasPopup=true;},showMenu:function(){var s=this,f=s.settings,m;if(s.menu&&s.menu.visible()){return s.hideMenu();}if(!s.menu){m=f.menu||[];if(m.length){m={type:'menu',items:m};}else{m.type=m.type||'menu';}s.menu=b.create(m).parent(s).renderTo();s.fire('createmenu');s.menu.reflow();s.menu.on('cancel',function(e){if(e.control.parent()===s.menu){e.stopPropagation();s.focus();s.hideMenu();}});s.menu.on('select',function(){s.focus();});s.menu.on('show hide',function(e){if(e.control==s.menu){s.activeMenu(e.type=='show');}s.aria('expanded',e.type=='show');}).fire('show');}s.menu.show();s.menu.layoutRect({w:s.layoutRect().w});s.menu.moveRel(s.getEl(),s.isRtl()?['br-tr','tr-br']:['bl-tl','tl-bl']);},hideMenu:function(){var s=this;if(s.menu){s.menu.items().each(function(i){if(i.hideMenu){i.hideMenu();}});s.menu.hide();}},activeMenu:function(s){this.toggleClass('active',s);},renderHtml:function(){var s=this,i=s._id,p=s.classPrefix;var e=s.settings.icon,f;f=s.settings.image;if(f){e='none';if(typeof f!="string"){f=window.getSelection?f[0]:f[1];}f=' style="background-image: url(\''+f+'\')"';}else{f='';}e=s.settings.icon?p+'ico '+p+'i-'+e:'';s.aria('role',s.parent()instanceof M?'menuitem':'button');return('<div id="'+i+'" class="'+s.classes()+'" tabindex="-1" aria-labelledby="'+i+'">'+'<button id="'+i+'-open" role="presentation" type="button" tabindex="-1">'+(e?'<i class="'+e+'"'+f+'></i>':'')+'<span>'+(s._text?(e?'\u00a0':'')+s.encode(s._text):'')+'</span>'+' <i class="'+p+'caret"></i>'+'</button>'+'</div>');},postRender:function(){var s=this;s.on('click',function(e){if(e.control===s&&c(e.target,s.getEl())){s.showMenu();if(e.aria){s.menu.items()[0].focus();}}});s.on('mouseenter',function(e){var o=e.control,p=s.parent(),h;if(o&&p&&o instanceof d&&o.parent()==p){p.items().filter('MenuButton').each(function(f){if(f.hideMenu&&f!=o){if(f.menu&&f.menu.visible()){h=true;}f.hideMenu();}});if(h){o.focus();o.showMenu();}}});return s._super();},text:function(t){var s=this,i,e;if(s._rendered){e=s.getEl('open').getElementsByTagName('span');for(i=0;i<e.length;i++){e[i].innerHTML=(s.settings.icon&&t?'\u00a0':'')+s.encode(t);}}return this._super(t);},remove:function(){this._super();if(this.menu){this.menu.remove();}}});return d;});
/**
 * ListBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/ListBox",["tinymce/ui/MenuButton"],function(M){"use strict";return M.extend({init:function(s){var a=this,v,b,c,l;function d(m){for(var i=0;i<m.length;i++){b=m[i].selected||s.value===m[i].value;if(b){c=c||m[i].text;a._value=m[i].value;break;}if(m[i].menu){d(m[i].menu);}}}a._values=v=s.values;if(v){if(typeof s.value!="undefined"){d(v);}if(!b&&v.length>0){c=v[0].text;a._value=v[0].value;}s.menu=v;}s.text=s.text||c||v[0].text;a._super(s);a.addClass('listbox');a.on('select',function(e){var f=e.control;if(l){e.lastControl=l;}if(s.multiple){f.active(!f.active());}else{a.value(e.control.settings.value);}l=f;});},value:function(v){var s=this,a,b,m;function c(m,v){m.items().each(function(e){a=e.value()===v;if(a){b=b||e.text();}e.active(a);if(e.menu){c(e.menu,v);}});}function d(e){for(var i=0;i<e.length;i++){a=e[i].value==v;if(a){b=b||e[i].text;}e[i].active=a;if(e[i].menu){d(e[i].menu);}}}if(typeof(v)!="undefined"){if(s.menu){c(s.menu,v);}else{m=s.settings.menu;d(m);}s.text(b||this.settings.text);}return s._super(v);}});});
/**
 * MenuItem.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/MenuItem",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/Env"],function(W,a,b){"use strict";return W.extend({Defaults:{border:0,role:'menuitem'},init:function(s){var c=this;c.hasPopup=true;c._super(s);s=c.settings;c.addClass('menu-item');if(s.menu){c.addClass('menu-item-expand');}if(s.preview){c.addClass('menu-item-preview');}if(c._text==='-'||c._text==='|'){c.addClass('menu-item-sep');c.aria('role','separator');c._text='-';}if(s.selectable){c.aria('role','menuitemcheckbox');c.addClass('menu-item-checkbox');s.icon='selected';}if(!s.preview&&!s.selectable){c.addClass('menu-item-normal');}c.on('mousedown',function(e){e.preventDefault();});if(s.menu&&!s.ariaHideMenu){c.aria('haspopup',true);}},hasMenus:function(){return!!this.settings.menu;},showMenu:function(){var s=this,c=s.settings,m,p=s.parent();p.items().each(function(d){if(d!==s){d.hideMenu();}});if(c.menu){m=s.menu;if(!m){m=c.menu;if(m.length){m={type:'menu',items:m};}else{m.type=m.type||'menu';}if(p.settings.itemDefaults){m.itemDefaults=p.settings.itemDefaults;}m=s.menu=a.create(m).parent(s).renderTo();m.reflow();m.on('cancel',function(e){e.stopPropagation();s.focus();m.hide();});m.on('show hide',function(e){e.control.items().each(function(d){d.active(d.settings.selected);});}).fire('show');m.on('hide',function(e){if(e.control===m){s.removeClass('selected');}});m.submenu=true;}else{m.show();}m._parentMenu=p;m.addClass('menu-sub');var r=m.testMoveRel(s.getEl(),s.isRtl()?['tl-tr','bl-br','tr-tl','br-bl']:['tr-tl','br-bl','tl-tr','bl-br']);m.moveRel(s.getEl(),r);m.rel=r;r='menu-sub-'+r;m.removeClass(m._lastRel);m.addClass(r);m._lastRel=r;s.addClass('selected');s.aria('expanded',true);}},hideMenu:function(){var s=this;if(s.menu){s.menu.items().each(function(i){if(i.hideMenu){i.hideMenu();}});s.menu.hide();s.aria('expanded',false);}return s;},renderHtml:function(){var s=this,i=s._id,c=s.settings,p=s.classPrefix,t=s.encode(s._text);var d=s.settings.icon,e='',f=c.shortcut;if(d){s.parent().addClass('menu-has-icons');}if(c.image){d='none';e=' style="background-image: url(\''+c.image+'\')"';}if(f&&b.mac){f=f.replace(/ctrl\+alt\+/i,'&#x2325;&#x2318;');f=f.replace(/ctrl\+/i,'&#x2318;');f=f.replace(/alt\+/i,'&#x2325;');f=f.replace(/shift\+/i,'&#x21E7;');}d=p+'ico '+p+'i-'+(s.settings.icon||'none');return('<div id="'+i+'" class="'+s.classes()+'" tabindex="-1">'+(t!=='-'?'<i class="'+d+'"'+e+'></i>\u00a0':'')+(t!=='-'?'<span id="'+i+'-text" class="'+p+'text">'+t+'</span>':'')+(f?'<div id="'+i+'-shortcut" class="'+p+'menu-shortcut">'+f+'</div>':'')+(c.menu?'<div class="'+p+'caret"></div>':'')+'</div>');},postRender:function(){var s=this,c=s.settings;var t=c.textStyle;if(typeof(t)=="function"){t=t.call(this);}if(t){var d=s.getEl('text');if(d){d.setAttribute('style',t);}}s.on('mouseenter click',function(e){if(e.control===s){if(!c.menu&&e.type==='click'){s.fire('select');s.parent().hideAll();}else{s.showMenu();if(e.aria){s.menu.focus(true);}}}});s._super();return s;},active:function(s){if(typeof(s)!="undefined"){this.aria('checked',s);}return this._super(s);},remove:function(){this._super();if(this.menu){this.menu.remove();}}});});
/**
 * Menu.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Menu",["tinymce/ui/FloatPanel","tinymce/ui/MenuItem","tinymce/util/Tools"],function(a,M,T){"use strict";var b=a.extend({Defaults:{defaultType:'menuitem',border:1,layout:'stack',role:'application',bodyRole:'menu',ariaRoot:true},init:function(s){var c=this;s.autohide=true;s.constrainToViewport=true;if(s.itemDefaults){var d=s.items,i=d.length;while(i--){d[i]=T.extend({},s.itemDefaults,d[i]);}}c._super(s);c.addClass('menu');},repaint:function(){this.toggleClass('menu-align',true);this._super();this.getEl().style.height='';this.getEl('body').style.height='';return this;},cancel:function(){var s=this;s.hideAll();s.fire('select');},hideAll:function(){var s=this;this.find('menuitem').exec('hideMenu');return s._super();},preRender:function(){var s=this;s.items().each(function(c){var d=c.settings;if(d.icon||d.selectable){s._hasIcons=true;return false;}});return s._super();}});return b;});
/**
 * Radio.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Radio",["tinymce/ui/Checkbox"],function(a){"use strict";return a.extend({Defaults:{classes:"radio",role:"radio"}});});
/**
 * ResizeHandle.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/ResizeHandle",["tinymce/ui/Widget","tinymce/ui/DragHelper"],function(W,a){"use strict";return W.extend({renderHtml:function(){var s=this,p=s.classPrefix;s.addClass('resizehandle');if(s.settings.direction=="both"){s.addClass('resizehandle-both');}s.canFocus=false;return('<div id="'+s._id+'" class="'+s.classes()+'">'+'<i class="'+p+'ico '+p+'i-resize"></i>'+'</div>');},postRender:function(){var s=this;s._super();s.resizeDragHelper=new a(this._id,{start:function(){s.fire('ResizeStart');},drag:function(e){if(s.settings.direction!="both"){e.deltaX=0;}s.fire('Resize',e);},stop:function(){s.fire('ResizeEnd');}});},remove:function(){if(this.resizeDragHelper){this.resizeDragHelper.destroy();}return this._super();}});});
/**
 * Spacer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Spacer",["tinymce/ui/Widget"],function(W){"use strict";return W.extend({renderHtml:function(){var s=this;s.addClass('spacer');s.canFocus=false;return'<div id="'+s._id+'" class="'+s.classes()+'"></div>';}});});
/**
 * SplitButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/SplitButton",["tinymce/ui/MenuButton","tinymce/ui/DomUtils"],function(M,a){return M.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var s=this,e=s.getEl(),r=s.layoutRect(),m,b;s._super();m=e.firstChild;b=e.lastChild;a.css(m,{width:r.w-a.getSize(b).width,height:r.h-2});a.css(b,{height:r.h-2});return s;},activeMenu:function(s){var b=this;a.toggleClass(b.getEl().lastChild,b.classPrefix+'active',s);},renderHtml:function(){var s=this,i=s._id,p=s.classPrefix,b;var c=s.settings.icon;b=s.settings.image;if(b){c='none';if(typeof b!="string"){b=window.getSelection?b[0]:b[1];}b=' style="background-image: url(\''+b+'\')"';}else{b='';}c=s.settings.icon?p+'ico '+p+'i-'+c:'';return('<div id="'+i+'" class="'+s.classes()+'" role="button" tabindex="-1">'+'<button type="button" hidefocus="1" tabindex="-1">'+(c?'<i class="'+c+'"'+b+'></i>':'')+(s._text?(c?' ':'')+s._text:'')+'</button>'+'<button type="button" class="'+p+'open" hidefocus="1" tabindex="-1">'+(s._menuBtnText?(c?'\u00a0':'')+s._menuBtnText:'')+' <i class="'+p+'caret"></i>'+'</button>'+'</div>');},postRender:function(){var s=this,o=s.settings.onclick;s.on('click',function(e){var n=e.target;if(e.control==this){while(n){if((e.aria&&e.aria.key!='down')||(n.nodeName=='BUTTON'&&n.className.indexOf('open')==-1)){e.stopImmediatePropagation();o.call(this,e);return;}n=n.parentNode;}}});delete s.settings.onclick;return s._super();}});});
/**
 * StackLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/StackLayout",["tinymce/ui/FlowLayout"],function(a){"use strict";return a.extend({Defaults:{containerClass:'stack-layout',controlClass:'stack-layout-item',endClass:'break'}});});
/**
 * TabPanel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/TabPanel",["tinymce/ui/Panel","tinymce/ui/DomUtils"],function(P,a){"use strict";return P.extend({Defaults:{layout:'absolute',defaults:{type:'panel'}},activateTab:function(b){var c;if(this.activeTabId){c=this.getEl(this.activeTabId);a.removeClass(c,this.classPrefix+'active');c.setAttribute('aria-selected',"false");}this.activeTabId='t'+b;c=this.getEl('t'+b);c.setAttribute('aria-selected',"true");a.addClass(c,this.classPrefix+'active');this.items()[b].show().fire('showtab');this.reflow();this.items().each(function(d,i){if(b!=i){d.hide();}});},renderHtml:function(){var s=this,l=s._layout,t='',p=s.classPrefix;s.preRender();l.preRender(s);s.items().each(function(c,i){var b=s._id+'-t'+i;c.aria('role','tabpanel');c.aria('labelledby',b);t+=('<div id="'+b+'" class="'+p+'tab" '+'unselectable="on" role="tab" aria-controls="'+c._id+'" aria-selected="false" tabIndex="-1">'+s.encode(c.settings.title)+'</div>');});return('<div id="'+s._id+'" class="'+s.classes()+'" hidefocus="1" tabindex="-1">'+'<div id="'+s._id+'-head" class="'+p+'tabs" role="tablist">'+t+'</div>'+'<div id="'+s._id+'-body" class="'+s.classes('body')+'">'+l.renderHtml(s)+'</div>'+'</div>');},postRender:function(){var s=this;s._super();s.settings.activeTab=s.settings.activeTab||0;s.activateTab(s.settings.activeTab);this.on('click',function(e){var t=e.target.parentNode;if(e.target.parentNode.id==s._id+'-head'){var i=t.childNodes.length;while(i--){if(t.childNodes[i]==e.target){s.activateTab(i);}}}});},initLayoutRect:function(){var s=this,r,m,b;m=a.getSize(s.getEl('head')).width;m=m<0?0:m;b=0;s.items().each(function(i){m=Math.max(m,i.layoutRect().minW);b=Math.max(b,i.layoutRect().minH);});s.items().each(function(c){c.settings.x=0;c.settings.y=0;c.settings.w=m;c.settings.h=b;c.layoutRect({x:0,y:0,w:m,h:b});});var h=a.getSize(s.getEl('head')).height;s.settings.minWidth=m;s.settings.minHeight=b+h;r=s._super();r.deltaH+=h;r.innerH=r.h-r.deltaH;return r;}});});
/**
 * TextBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/TextBox",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(W,a){"use strict";return W.extend({init:function(s){var b=this;b._super(s);b._value=s.value||'';b.addClass('textbox');if(s.multiline){b.addClass('multiline');}else{b.on('keydown',function(e){if(e.keyCode==13){b.parents().reverse().each(function(c){e.preventDefault();if(c.hasEventListeners('submit')&&c.toJSON){c.fire('submit',{data:c.toJSON()});return false;}});}});}},disabled:function(s){var b=this;if(b._rendered&&typeof(s)!='undefined'){b.getEl().disabled=s;}return b._super(s);},value:function(v){var s=this;if(typeof(v)!="undefined"){s._value=v;if(s._rendered){s.getEl().value=v;}return s;}if(s._rendered){return s.getEl().value;}return s._value;},repaint:function(){var s=this,b,r,c,d=0,e=0,l;b=s.getEl().style;r=s._layoutRect;l=s._lastRepaintRect||{};var f=document;if(!s.settings.multiline&&f.all&&(!f.documentMode||f.documentMode<=8)){b.lineHeight=(r.h-e)+'px';}c=s._borderBox;d=c.left+c.right+8;e=c.top+c.bottom+(s.settings.multiline?8:0);if(r.x!==l.x){b.left=r.x+'px';l.x=r.x;}if(r.y!==l.y){b.top=r.y+'px';l.y=r.y;}if(r.w!==l.w){b.width=(r.w-d)+'px';l.w=r.w;}if(r.h!==l.h){b.height=(r.h-e)+'px';l.h=r.h;}s._lastRepaintRect=l;s.fire('repaint',{},false);return s;},renderHtml:function(){var s=this,i=s._id,b=s.settings,v=s.encode(s._value,false),e='';if("spellcheck"in b){e+=' spellcheck="'+b.spellcheck+'"';}if(b.maxLength){e+=' maxlength="'+b.maxLength+'"';}if(b.size){e+=' size="'+b.size+'"';}if(b.subtype){e+=' type="'+b.subtype+'"';}if(s.disabled()){e+=' disabled="disabled"';}if(b.multiline){return('<textarea id="'+i+'" class="'+s.classes()+'" '+(b.rows?' rows="'+b.rows+'"':'')+' hidefocus="1"'+e+'>'+v+'</textarea>');}return'<input id="'+i+'" class="'+s.classes()+'" value="'+v+'" hidefocus="1"'+e+' />';},postRender:function(){var s=this;a.on(s.getEl(),'change',function(e){s.fire('change',e);});return s._super();},remove:function(){a.off(this.getEl());this._super();}});});
/**
 * Throbber.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
C("tinymce/ui/Throbber",["tinymce/ui/DomUtils","tinymce/ui/Control"],function(a,b){"use strict";return function(e,i){var s=this,c,d=b.classPrefix;s.show=function(t){s.hide();c=true;window.setTimeout(function(){if(c){e.appendChild(a.createFragment('<div class="'+d+'throbber'+(i?' '+d+'throbber-inline':'')+'"></div>'));}},t||0);return s;};s.hide=function(){var f=e.lastChild;if(f&&f.className.indexOf('throbber')!=-1){f.parentNode.removeChild(f);}c=false;return s;};};});F(["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/Env","tinymce/util/Tools","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/dom/DOMUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/html/DomParser","tinymce/html/Writer","tinymce/html/Serializer","tinymce/dom/Serializer","tinymce/dom/TridentSelection","tinymce/util/VK","tinymce/dom/ControlSelection","tinymce/dom/BookmarkManager","tinymce/dom/Selection","tinymce/dom/ElementUtils","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/util/Class","tinymce/util/EventDispatcher","tinymce/ui/Selector","tinymce/ui/Collection","tinymce/ui/DomUtils","tinymce/ui/Control","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/ui/Container","tinymce/ui/DragHelper","tinymce/ui/Scrollable","tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/FloatPanel","tinymce/ui/Window","tinymce/ui/MessageBox","tinymce/WindowManager","tinymce/util/Quirks","tinymce/util/Observable","tinymce/EditorObservable","tinymce/Shortcuts","tinymce/Editor","tinymce/util/I18n","tinymce/FocusManager","tinymce/EditorManager","tinymce/LegacyInput","tinymce/util/XHR","tinymce/util/JSON","tinymce/util/JSONRequest","tinymce/util/JSONP","tinymce/util/LocalStorage","tinymce/Compat","tinymce/ui/Layout","tinymce/ui/AbsoluteLayout","tinymce/ui/Tooltip","tinymce/ui/Widget","tinymce/ui/Button","tinymce/ui/ButtonGroup","tinymce/ui/Checkbox","tinymce/ui/ComboBox","tinymce/ui/ColorBox","tinymce/ui/PanelButton","tinymce/ui/ColorButton","tinymce/util/Color","tinymce/ui/ColorPicker","tinymce/ui/Path","tinymce/ui/ElementPath","tinymce/ui/FormItem","tinymce/ui/Form","tinymce/ui/FieldSet","tinymce/ui/FilePicker","tinymce/ui/FitLayout","tinymce/ui/FlexLayout","tinymce/ui/FlowLayout","tinymce/ui/FormatControls","tinymce/ui/GridLayout","tinymce/ui/Iframe","tinymce/ui/Label","tinymce/ui/Toolbar","tinymce/ui/MenuBar","tinymce/ui/MenuButton","tinymce/ui/ListBox","tinymce/ui/MenuItem","tinymce/ui/Menu","tinymce/ui/Radio","tinymce/ui/ResizeHandle","tinymce/ui/Spacer","tinymce/ui/SplitButton","tinymce/ui/StackLayout","tinymce/ui/TabPanel","tinymce/ui/TextBox","tinymce/ui/Throbber"]);})(this);
