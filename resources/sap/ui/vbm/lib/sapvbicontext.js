VBI.VBIContext=
function(c){var v={};v.vbiclass="VBIContext";v.m_bLoaded=false;v.m_Resources=null;v.m_Config=null;v.m_DataTypeProvider=null;v.m_DataProvider=null;v.m_SceneManager=null;v.m_MapProviders=null;v.m_MapLayerStackManager=null;v.m_Windows=null;v.m_Actions=null;v.m_Automations=null;v.m_Menus=null;v.m_Control=c;var n=new Date();v.m_StartupTime=n.getTime();v.clear=function(){v.m_Control=null;if(v.m_Resources)v.m_Resources.clear();if(v.m_Config)v.m_Config.clear();if(v.m_DataTypeProvider)v.m_DataTypeProvider.clear();if(v.m_DataProvider)v.m_DataProvider.clear();if(v.m_SceneManager)v.m_SceneManager.clear();if(v.m_MapProviders)v.m_MapProviders.clear();if(v.m_MapLayerStackManager)v.m_MapLayerStackManager.clear();if(v.m_Windows)v.m_Windows.clear();if(v.m_Actions)v.m_Actions.clear();if(v.m_Automations)v.m_Automations.clear();if(v.m_Menus)v.m_Menus.clear();v.m_Resources=null;v.m_Config=null;v.m_DataTypeProvider=null;v.m_DataProvider=null;v.m_SceneManager=null;v.m_MapProviders=null;v.m_MapLayerStackManager=null;v.m_Windows=null;v.m_Actions=null;v.m_Automations=null;v.m_Menus=null;};v.GetResources=function(){var r;if(r=v.m_Resources)return r;return(v.m_Resources=new VBI.Resources());};v.GetConfig=function(){var C;if(C=v.m_Config)return C;return(v.m_Config=new VBI.Configurations());};v.GetMainScene=function(){if(v.m_Windows){var w=null;if(w=v.m_Windows.GetMainWindow()){var s=null;if(s=w.GetScene())return s;}}return null;};v.FireAction=function(b,s,d,e,p,i){var f=null;if(jQuery.type(d)=='object')f=d.m_ID;else if(jQuery.type(d)=='string')f=d;var o={};var r=(o["SAPVB"]={});r["version"]="2.0";r["xmlns:VB"]="VB";var A=(r["Action"]={});A.name=b.m_name;A.object=f;A.id=b.m_id;if(i!=undefined)A.instance=i;else if(e)A.instance=e.GetPath();var x=0.0;var y=0.0;var m=false;if(p){A.Params={};A.Params.Param=[];for(var a in p){var t={};t["name"]=a;t["#"]=p[a];A.Params.Param.push(t);if(a=='x'){x=p[a];m=true;}if(a=='y'){y=p[a];m=true;}}}if(v.m_DataProvider)v.m_DataProvider.store(r);var l;if(b.m_additionalProperties&&(l=b.m_additionalProperties.length)){var g=A.AddActionProperties={};var h=g.AddActionProperty=[];for(var j=0;j<l;++j){var k;switch(b.m_additionalProperties[j]){case'zoom':h.push({name:'zoom','#':s.GetCurrentZoomlevel().toString()});break;case'centerpoint':k=VBI.MathLib.RadToDeg(s.GetCenterPos());h.push({name:'centerpoint','#':k[0].toString()+';'+k[1].toString()+';0.0'});break;case'clustercount':clusterGroups=s.m_PreassembledData;cluster=clusterGroups[d.m_nPreDataIndex];clusteredObjects=d.m_HotClusterVO.cobjs;h.push({name:'clustercount','#':d.m_HotClusterVO.ct});break;case'pos':if(m){k=s.GetPosFromVPPoint([x,y,0]);h.push({name:'pos','#':k[0].toString()+';'+k[1].toString()+';0.0'});}break;case'pitch':h.push({name:'pitch','#':'0.0'});break;case'yaw':h.push({name:'yaw','#':'0.0'});break;}}}var q=JSON.stringify(r,null,'  ');if(v.m_Control)v.m_Control.fireSubmit({data:q});};v.onRenderLayer=function(a){v.m_Control.fireRender({canvas:a});};v.onMoveLayer=function(a){v.m_Control.fireMove({canvas:a});};v.onZoomLayer=function(a){v.m_Control.fireZoom({canvas:a});};v.onOpenWindow=function(i,d){v.m_Control.fireOpenWindow({id:i,contentarea:d});};v.onCloseWindow=function(i,d){v.m_Control.fireCloseWindow({id:i,contentarea:d});};return v;}
;
