jQuery.sap.declare('sap.ui.fl.library-all');if(!jQuery.sap.isDeclared('sap.ui.fl.Utils')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2014-2015 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.fl.Utils');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Component');sap.ui.define("sap/ui/fl/Utils",["jquery.sap.global","sap/ui/core/Component"],function(q,C){"use strict";var U={log:{error:function(m,d,c){q.sap.log.error(m,d,c);},warning:function(m,d,c){q.sap.log.warning(m,d,c);}},getXSRFTokenFromControl:function(c){var m;if(!c){return"";}if(c&&typeof c.getModel==='function'){m=c.getModel();return U._getXSRFTokenFromModel(m);}return"";},_getXSRFTokenFromModel:function(m){var h;if(!m){return"";}if(typeof m.getHeaders==='function'){h=m.getHeaders();if(h){return h['x-csrf-token'];}}return"";},getComponentClassName:function(c){if(!c){return"";}var s=U._getComponentIdForControl(c);if(!s){return"";}return sap.ui.component(s).getMetadata().getName();},_getComponentIdForControl:function(c){var s="",i=0;do{i++;s=U._getOwnerIdForControl(c);if(s){return s;}if(c&&typeof c.getParent==='function'){c=c.getParent();}else{return"";}}while(c&&i<100);return"";},getViewForControl:function(c){return U.getFirstAncestorOfControlWithControlType(c,sap.ui.core.mvc.View);},getFirstAncestorOfControlWithControlType:function(c,a){if(c instanceof a){return c;}if(c&&typeof c.getParent==='function'){c=c.getParent();return U.getFirstAncestorOfControlWithControlType(c,a);}},hasControlAncestorWithId:function(c,a){var o;if(c===a){return true;}o=sap.ui.getCore().byId(c);while(o){if(o.getId()===a){return true;}if(typeof o.getParent==='function'){o=o.getParent();}else{return false;}}return false;},_isView:function(c){return c instanceof sap.ui.core.mvc.View;},_getOwnerIdForControl:function(c){return C.getOwnerIdFor(c);},getCurrentLayer:function(i){var u,l;if(i){return"USER";}u=this._getUriParameters();l=u.mParams['sap-ui-layer'];if(l&&l.length>0){return l[0];}return"CUSTOMER";},doesSharedVariantRequirePackage:function(){var c;c=U.getCurrentLayer(false);if((c==='VENDOR')||(c==='PARTNER')){return true;}if(c==='USER'){return false;}if(c==='CUSTOMER'){return false;}return false;},getClient:function(){var u,c;u=this._getUriParameters();c=u.mParams['sap-client'];if(c&&c.length>0){return c[0];}return undefined;},_getUriParameters:function(){return q.sap.getUriParameters();},isHotfixMode:function(){var u,i,I;u=this._getUriParameters();i=u.mParams['hotfix'];if(i&&i.length>0){I=i[0];}return(I==='true');},convertBrowserLanguageToISO639_1:function(b){if(!b||typeof b!=='string'){return"";}var n=b.indexOf('-');if((n<0)&&(b.length<=2)){return b.toUpperCase();}if(n>0&&n<=2){return b.substring(0,n).toUpperCase();}return"";},getCurrentLanguage:function(){var l=sap.ui.getCore().getConfiguration().getLanguage();return U.convertBrowserLanguageToISO639_1(l);},getControlType:function(c){var m;if(c&&typeof c.getMetadata==='function'){m=c.getMetadata();if(m&&typeof m.getElementName==='function'){return m.getElementName();}}},checkControlId:function(c){var i=sap.ui.base.ManagedObjectMetadata.isGeneratedId(c.getId());if(i===true){q.sap.log.error("Generated id attribute found","to offer flexibility a stable control id is needed to assign the changes to, but for this control the id was generated by SAPUI5",c.getId());}return!i;}};return U;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.Base')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2014-2015 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.fl.changeHandler.Base');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/Base",["sap/ui/fl/Utils","jquery.sap.global"],function(U,$){"use strict";var B=function(){};B.prototype._getProperty=function(c,n){if(c){if(c.getMetadata){var m=c.getMetadata();var p=m.getProperties();if(p){var P=p[n];if(P){return P;}}}}};B.prototype.changeProperty=function(c,n,v){var p=this._getProperty(c,n);if(p){c.setProperty(n,v);}};B.prototype.clearProperty=function(c,n){var p=this._getProperty(c,n);if(p){c.setProperty(n,p.defaultValue);}};B.prototype.addAggregation=function(c,n,o,i){if(c){if(c.getMetadata){var m=c.getMetadata();var a=m.getAllAggregations();if(a){var A=a[n];if(A){if(A.multiple){var I=i||a.length||0;c.insertAggregation(n,o,I);}else{c[A._sMutator](o);}}}}}};B.prototype.setTextInChange=function(c,k,t,T){if(!c.texts){c.texts={};}if(!c.texts[k]){c.texts[k]={};}c.texts[k].value=t;c.texts[k].type=T;};return B;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.HideControl')){jQuery.sap.declare('sap.ui.fl.changeHandler.HideControl');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/HideControl",['jquery.sap.global','./Base'],function(q,B){"use strict";var H=function(){};H.prototype=q.sap.newObject(B.prototype);H.prototype.applyChange=function(c,C){if(C.setVisible){C.setVisible(false);}else{throw new Error("Provided control instance has no setVisible method");}};H.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(!C.content){C.content={};}};return H;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.MoveFields')){jQuery.sap.declare('sap.ui.fl.changeHandler.MoveFields');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/MoveFields",['jquery.sap.global','./Base','sap/ui/fl/Utils'],function(q,B,F){"use strict";var M=function(){};M.prototype=q.sap.newObject(B.prototype);M.prototype.applyChange=function(c,g){if(!c){throw new Error("No change instance");}var C=c.getDefinition();if(!C.selector||!C.content||!C.content.moveFields||C.content.moveFields.length===0||Object.keys(C.selector).length!==1){throw new Error("Change format invalid");}if(!g||!g.getGroupElements||!g.getId){throw new Error("No smart form group instance supplied");}var t=g;var T=false;if(C.content.targetId){var s=g.getId();if(s!==C.content.targetId){t=sap.ui.getCore().byId(C.content.targetId);T=true;}}var f=g.getGroupElements();if(!f){return;}var a=f.length;var o={},m={};var b=C.content.moveFields.length;var I,i,j;for(i=0;i<b;i++){m=C.content.moveFields[i];if(!m.id){throw new Error("Change format invalid - moveFields element has no id attribute");}if(typeof(m.index)!=="number"){throw new Error("Change format invalid - moveFields element index attribute is no number");}I=-1;for(j=0;j<a;j++){var d=f[j].getId();if(d===m.id){I=j;break;}}if(T===false&&I===m.index){continue;}if(I===-1){continue;}o=f[I];if(T===true){g.removeGroupElement(o);t.insertGroupElement(o,m.index);continue;}f.splice(I,1);if(T===false){f.splice(m.index,0,o);}}if(T===true){return;}g.removeAllGroupElements();for(i=0;i<a;i++){g.insertGroupElement(f[i],i);}};M.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(s.moveFields){var m={};var i,l=s.moveFields.length;if(l===0){throw new Error("MoveFields array is empty");}for(i=0;i<l;i++){m=s.moveFields[i];if(!m.id){throw new Error("MoveFields element has no id attribute");}if(typeof(m.index)!=="number"){throw new Error("Index attribute at MoveFields element is no number");}}if(!C.content){C.content={};}if(!C.content.moveFields){C.content.moveFields=[];}C.content.moveFields=s.moveFields;if(s.targetId){C.content.targetId=s.targetId;}}else{throw new Error("oSpecificChangeInfo.moveFields attribute required");}};return M;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.MoveGroups')){jQuery.sap.declare('sap.ui.fl.changeHandler.MoveGroups');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/MoveGroups",['jquery.sap.global','./Base','sap/ui/fl/Utils'],function(q,B,F){"use strict";var M=function(){};M.prototype=q.sap.newObject(B.prototype);M.prototype.applyChange=function(c,s){if(!c){throw new Error("No change instance");}var C=c.getDefinition();if(!C.selector||!C.content||!C.content.moveGroups||C.content.moveGroups.length===0||Object.keys(C.selector).length!==1){throw new Error("Change format invalid");}if(!s||!s.getGroups){throw new Error("No smart form instance supplied");}var g=[];g=s.getGroups();if(g.length===0){return;}var G=g.length;var o={},m={};var a=C.content.moveGroups.length;var I;var i,j;for(i=0;i<a;i++){m=C.content.moveGroups[i];if(!m.id){throw new Error("Change format invalid - moveGroups element has no id attribute");}if(typeof(m.index)!=="number"){throw new Error("Change format invalid - moveGroups element index attribute is no number");}I=-1;for(j=0;j<G;j++){if(g[j].getId()===m.id){I=j;break;}}if(I===m.index||I===-1){continue;}o=g[I];g.splice(I,1);g.splice(m.index,0,o);}s.removeAllGroups();for(i=0;i<G;i++){s.insertGroup(g[i],i);}};M.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(s.moveGroups){var m={};var i,l=s.moveGroups.length;if(l===0){throw new Error("MoveGroups array is empty");}for(i=0;i<l;i++){m=s.moveGroups[i];if(!m.id){throw new Error("MoveGroups element has no id attribute");}if(typeof(m.index)!=="number"){throw new Error("Index attribute at MoveGroups element is no number");}}if(!C.content){C.content={};}if(!C.content.moveGroups){C.content.moveGroups=[];}C.content.moveGroups=s.moveGroups;}else{throw new Error("oSpecificChangeInfo.moveGroups attribute required");}};return M;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.OrderFields')){jQuery.sap.declare('sap.ui.fl.changeHandler.OrderFields');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/OrderFields",['jquery.sap.global','./Base','sap/ui/fl/Utils'],function(q,B,F){"use strict";var O=function(){};O.prototype=q.sap.newObject(B.prototype);O.prototype.applyChange=function(c,C){if(!c){throw new Error("No change instance");}var o=c.getDefinition();if(!o.selector||!o.content||!o.content.orderFields||o.content.orderFields.length===0||Object.keys(o.selector).length!==1){throw new Error("Change format invalid");}if(!C||!C.getGroupElements){throw new Error("No control instance or wrong control instance supplied");}var g=C.getGroupElements();var G=g.length;var k=o.content.orderFields;var K=k.length;var a={},b={};var s;var i;for(i=0;i<G;i++){b=g[i];if(!b.getId()){return;}s=b.getId();a[s]=b;}C.removeAllGroupElements();for(i=0;i<G;i++){s=k[i];if(a[s]){C.insertGroupElement(a[s],i);a[s]=null;}}i=K;q.each(a,function(d,e){if(e!==null){i+=1;C.insertGroupElement(e,i);}});};O.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(s.orderFields){if(!C.content){C.content={};}if(!C.content.orderFields){C.content.orderFields={};}C.content.orderFields=s.orderFields;}else{throw new Error("oSpecificChangeInfo.orderFields attribute required");}};return O;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.OrderGroups')){jQuery.sap.declare('sap.ui.fl.changeHandler.OrderGroups');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/OrderGroups",['jquery.sap.global','./Base','sap/ui/fl/Utils'],function(q,B,F){"use strict";var O=function(){};O.prototype=q.sap.newObject(B.prototype);O.prototype.applyChange=function(c,C){if(!c){throw new Error("No change instance");}var o=c.getDefinition();if(!o.selector||!o.content||!o.content.orderGroups||o.content.orderGroups.length===0||Object.keys(o.selector).length!==1){throw new Error("Change format invalid");}if(!C||!C.getGroups){throw new Error("No control instance or wrong control instance supplied");}var g=C.getGroups();var G=g.length;var k=o.content.orderGroups;var K=k.length;var a={},b={};var s;var i;for(i=0;i<G;i++){b=g[i];if(!b.getId()){return;}s=b.getId();a[s]=b;}if(G>0){C.removeAllGroups();}for(i=0;i<G;i++){s=k[i];if(a[s]){C.insertGroup(a[s],i);a[s]=null;}}i=K;q.each(a,function(d,e){if(e!==null){i+=1;C.insertGroup(e,i);}});};O.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(s.orderGroups){if(!C.content){C.content={};}if(!C.content.orderGroups){C.content.orderGroups={};}C.content.orderGroups=s.orderGroups;}else{throw new Error("oSpecificChangeInfo.orderGroups attribute required");}};return O;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.RemoveField')){jQuery.sap.declare('sap.ui.fl.changeHandler.RemoveField');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/RemoveField",['jquery.sap.global','./Base'],function(q,B){"use strict";var R=function(){};R.prototype=q.sap.newObject(B.prototype);R.prototype.applyChange=function(c,f){if(f.getParent){var g=f.getParent();if(g.removeGroupElement){g.removeGroupElement(f);}}else{throw new Error("no GroupElement control provided for removing the field");}};R.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(!C.content){C.content={};}};return R;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.RemoveGroup')){jQuery.sap.declare('sap.ui.fl.changeHandler.RemoveGroup');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/RemoveGroup",['jquery.sap.global','./Base'],function(q,B){"use strict";var R=function(){};R.prototype=q.sap.newObject(B.prototype);R.prototype.applyChange=function(c,g){if(g.getParent){var f=g.getParent();if(f.removeGroup){f.removeGroup(g);}}else{throw new Error("no Group control provided for removing the group");}};R.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(!C.content){C.content={};}};return R;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.RenameField')){jQuery.sap.declare('sap.ui.fl.changeHandler.RenameField');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/RenameField",['sap/ui/fl/Utils','jquery.sap.global','./Base'],function(U,q,B){"use strict";var R=function(){};R.prototype=q.sap.newObject(B.prototype);R.prototype.applyChange=function(c,C){var o=c.getDefinition();if(o.texts&&o.texts.fieldLabel&&o.texts.fieldLabel.value){if(!C){throw new Error("no Control provided for renaming");}if(typeof C.setLabel==='function'){C.setLabel(o.texts.fieldLabel.value);}else if(typeof C.setTitle==='function'){C.setTitle(o.texts.fieldLabel.value);}else{throw new Error('Control does not support "renameField" change');}}else{U.log.error("Change does not contain sufficient information to be applied: ["+o.layer+"]"+o.namespace+"/"+o.fileName+"."+o.fileType);}};R.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(s.fieldLabel){this.setTextInChange(C,"fieldLabel",s.fieldLabel,"XFLD");}else{throw new Error("oSpecificChangeInfo.fieldLabel attribute required");}};return R;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.RenameGroup')){jQuery.sap.declare('sap.ui.fl.changeHandler.RenameGroup');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/RenameGroup",['sap/ui/fl/Utils','jquery.sap.global','./Base'],function(U,q,B){"use strict";var R=function(){};R.prototype=q.sap.newObject(B.prototype);R.prototype.applyChange=function(c,g){var C=c.getDefinition();if(C.texts&&C.texts.groupLabel&&C.texts.groupLabel.value){if(g&&g.setLabel){g.setLabel(C.texts.groupLabel.value);}else{throw new Error("no Group provided for renaming");}}else{U.log.error("Change does not contain sufficient information to be applied: ["+C.layer+"]"+C.namespace+"/"+C.fileName+"."+C.fileType);}};R.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(s.groupLabel){this.setTextInChange(C,"groupLabel",s.groupLabel,"XFLD");}else{throw new Error("oSpecificChangeInfo.groupLabel attribute required");}};return R;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.UnhideControl')){jQuery.sap.declare('sap.ui.fl.changeHandler.UnhideControl');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/UnhideControl",['jquery.sap.global','./Base'],function(q,B){"use strict";var U=function(){};U.prototype=q.sap.newObject(B.prototype);U.prototype.applyChange=function(c,C){if(C.setVisible){C.setVisible(true);}else{throw new Error("Provided control instance has no setVisible method");}};U.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(!C.content){C.content={};}};return U;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.core.FlexVisualizer')){jQuery.sap.declare('sap.ui.fl.core.FlexVisualizer');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/core/FlexVisualizer",["jquery.sap.global"],function(q){"use strict";var F=function(){};F.showDialog=function(a,i){};F.closeDialog=function(){};return F;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.fieldExt.Access')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2014-2015 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.fl.fieldExt.Access');sap.ui.define("sap/ui/fl/fieldExt/Access",[],function(){"use strict";var A=function(){};A.getBusinessContexts=function(s,e,E){var S=this._parseServiceName(s);var a=this._parseServiceVersion(s,S);var b=this._buildBusinessContextRetrievalUri(S,a,e,E);var m=this._getAjaxSettings();var p=this._executeAjaxCall(b,m,S,a,e,E);return p;};A._parseServiceName=function(s){var S=s.lastIndexOf("/")+1;var a=s.substring(S);var b;if(a.indexOf(";v=")!=-1){b=a.substring(0,a.indexOf(";v="));}else{b=a;}return b;};A._parseServiceVersion=function(s,S){if(s.indexOf(S+";v=")!=-1){var p=s.indexOf(S+";v=");var r=s.substring(p);var P=S.length+3;var v=r.slice(P,r.indexOf("/"));return v;}else{return"0001";}};A._buildBusinessContextRetrievalUri=function(s,S,e,E){if(e==null){e='';}if(E==null){E='';}if(((E.length==0)&&(e.length==0))||(!(E.length==0)&&!(e.length==0))){throw new Error("sap.ui.fl.fieldExt.Access._buildBusinessContextRetrievalUri()"+"Inconsistent input parameters EntityName: "+e+" EntitySet: "+E);}var b="/sap/opu/odata/SAP/APS_CUSTOM_FIELD_MAINTENANCE_SRV/GetBusinessContextsByEntityType?"+"EntitySetName=\'"+E+"\'"+"&EntityTypeName=\'"+e+"\'"+"&ServiceName=\'"+s+"\'"+"&ServiceVersion=\'"+S+"\'"+"&$format=json";return b;};A._executeAjaxCall=function(b,r,s,S,e,E){var t=this;var d=jQuery.Deferred();jQuery.ajax(b,r).done(function(a,c,j){var B=[];if(a){var B=t._extractBusinessContexts(a);}var R={BusinessContexts:B,ServiceName:s,ServiceVersion:S};d.resolve(R);}).fail(function(j,a,c){var f=t._getMessagesFromXHR(j);var o={errorOccured:true,errorMessages:f,serviceName:s,serviceVersion:S,entityType:e,entitySet:E};d.reject(o);});return d.promise();};A._getAjaxSettings=function(){var s={type:"GET",async:true,dataType:'json'};return s;};A._extractBusinessContexts=function(d){var r=null;var b=[];if(d&&d.d){r=d.d.results;}if(r!==null&&r.length>0){for(var i=0;i<r.length;i++){if(r[i].BusinessContext!==null){b.push(r[i].BusinessContext);}}}return b;};A._getMessagesFromXHR=function(x){var m=[];try{var E=JSON.parse(x.responseText);if(E&&E.error&&E.error.message&&E.error.message.value&&E.error.message.value!==''){m.push({severity:"error",text:E.error.message.value});}else{m.push({severity:"error",text:x.responseText});}}catch(e){}return m;};return A;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.library')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 * 
 * (c) Copyright 2009-2015 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.fl.library');jQuery.sap.require('sap.ui.core.Core');jQuery.sap.require('sap.ui.core.library');jQuery.sap.require('sap.ui.core.mvc.XMLView');jQuery.sap.require('sap.ui.core.mvc.View');sap.ui.define("sap/ui/fl/library",["sap/ui/core/Core","sap/ui/core/library","sap/ui/core/mvc/XMLView","sap/ui/core/mvc/View"],function(C,c,X,V){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.fl",version:"1.28.1",dependencies:["sap.ui.core"],noLibraryCSS:true});if(X.registerPreprocessor){X.registerPreprocessor('content',"sap.ui.fl.Preprocessor");}else{V._sContentPreprocessor="sap.ui.fl.PreprocessorImpl";}return sap.ui.fl;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.registry.ChangeRegistryItem')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2014-2015 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.fl.registry.ChangeRegistryItem');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/registry/ChangeRegistryItem",["sap/ui/fl/Utils","jquery.sap.global"],function(U,q){"use strict";var C=function(p){if(!p.changeTypeMetadata){U.log.error("sap.ui.fl.registry.ChangeRegistryItem: ChangeTypeMetadata required");}if(!p.controlType){U.log.error("sap.ui.fl.registry.ChangeRegistryItem: ControlType required");}this._changeTypeMetadata=p.changeTypeMetadata;this._controlType=p.controlType;if(p.permittedRoles){this._permittedRoles=p.permittedRoles;}if(p.dragTargets){this._dragTargets=p.dragTargets;}};C.prototype._changeTypeMetadata=undefined;C.prototype._controlType=undefined;C.prototype._permittedRoles={};C.prototype._dragTargets=[];C.prototype.getChangeTypeMetadata=function(){return this._changeTypeMetadata;};C.prototype.getChangeTypeName=function(){return this._changeTypeMetadata.getName();};C.prototype.getControlType=function(){return this._controlType;};C.prototype.getPermittedRoles=function(){return this._permittedRoles;};C.prototype.getDragTargets=function(){return this._dragTargets;};return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.registry.ChangeTypeMetadata')){jQuery.sap.declare('sap.ui.fl.registry.ChangeTypeMetadata');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/registry/ChangeTypeMetadata",["sap/ui/fl/Utils","jquery.sap.global"],function(U,q){"use strict";var C=function(p){if(!p.name){U.log.error("sap.ui.fl.registry.ChangeType: Name required");}if(!p.changeHandler){U.log.error("sap.ui.fl.registry.ChangeType: ChangeHandler required");}this._name=p.name;this._changeHandler=p.changeHandler;if(p.labelKey){this._labelKey=p.labelKey;}if(p.tooltipKey){this._tooltipKey=p.tooltipKey;}if(p.iconKey){this._iconKey=p.iconKey;}if(p.sortIndex){this._sortIndex=p.sortIndex;}};C.prototype._name="";C.prototype._changeHandler="";C.prototype._sortIndex=0;C.prototype._labelKey="";C.prototype._tooltipKey="";C.prototype._iconKey="";C.prototype.getName=function(){return this._name;};C.prototype.getChangeHandler=function(){return this._changeHandler;};C.prototype.getLabel=function(){return this._labelKey;};C.prototype.getTooltip=function(){return this._tooltipKey;};C.prototype.getIcon=function(){return this._iconKey;};C.prototype.getSortIndex=function(){return this._sortIndex;};return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.Cache')){jQuery.sap.declare('sap.ui.fl.Cache');sap.ui.define("sap/ui/fl/Cache",["sap/ui/fl/Utils"],function(U){"use strict";var C=function(){};C._isOn=true;C._entries={};C.isActive=function(){return C._isOn;};C.setActive=function(a){C._isOn=a;};C.getChangesFillingCache=function(l,c){if(!this.isActive()){return l.loadChanges(c);}var o=C._entries[c];if(!o){o=C._entries[c]={};}if(o.promise){return o.promise;}var a=l.loadChanges(c).then(function(m){if(o.file){U.log.error('sap.ui.fl.Cache: Cached changes for component '+c+' overwritten.');}o.file=m;return o.file;},function(e){delete o.promise;throw e;});o.promise=a;return a;};C._getChangeArray=function(c){var e=C._entries[c];if(e){if(e.file){return e.file.changes.changes;}}};C.addChange=function(c,o){var a=C._getChangeArray(c);if(!a){return;}a.push(o);};C.updateChange=function(c,o){var a=C._getChangeArray(c);if(!a){return;}for(var i=0;i<a.length;i++){if(a[i].fileName===o.fileName){a.splice(i,1,o);break;}}};C.deleteChange=function(c,o){var a=C._getChangeArray(c);if(!a){return;}for(var i=0;i<a.length;i++){if(a[i].fileName===o.fileName){a.splice(i,1);break;}}};return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.LrepConnector')){jQuery.sap.declare('sap.ui.fl.LrepConnector');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.thirdparty.URI');sap.ui.define("sap/ui/fl/LrepConnector",["jquery.sap.global","sap/ui/thirdparty/URI","sap/ui/fl/Utils"],function(q,u,F){"use strict";var C=function(p){this._initClientParam();this._initLanguageParam();if(p){this._sXsrfToken=p.XsrfToken;}};C.createConnector=function(p){return new C(p);};C.prototype.DEFAULT_CONTENT_TYPE="application/json";C.prototype._sClient=undefined;C.prototype._sLanguage=undefined;C.prototype._initClientParam=function(){var c=F.getClient();if(c){this._sClient=c;}};C.prototype._initLanguageParam=function(){var l;l=this._getUrlParameter('sap-language')||this._getUrlParameter('sap-ui-language');if(l){this._sLanguage=l;}};C.prototype._getAllUrlParameters=function(){return window.location.search.substring(1);};C.prototype._getUrlParameter=function(p){var U,s,i,c;s=this._getAllUrlParameters();U=s.split('&');for(i=0;i<U.length;i++){c=U[i].split('=');if(c[0]===p){return c[1];}}};C.prototype._resolveUrl=function(r){if(!q.sap.startsWith(r,"/")){r="/"+r;}var U=u(r).absoluteTo("");return U.toString();};C.prototype._getDefaultHeader=function(){var h={headers:{"X-CSRF-Token":this._sXsrfToken||"fetch"}};return h;};C.prototype._getDefaultOptions=function(m,c,d){var o;if(!c){c=this.DEFAULT_CONTENT_TYPE;}o=q.extend(true,this._getDefaultHeader(),{type:m,async:true,contentType:c,data:JSON.stringify(d),dataType:'json',processData:false,xhrFields:{withCredentials:true},headers:{"Content-Type":c}});if(m==='DELETE'){delete o.data;delete o.contentType;}return o;};C.prototype.send=function(U,m,d,o){m=m||"GET";m=m.toUpperCase();o=o||{};U=this._resolveUrl(U);if(o.success||o.error){var e="Success and error handler are not allowed in mOptions";throw new Error(e);}o=q.extend(true,this._getDefaultOptions(m,this.DEFAULT_CONTENT_TYPE,d),o);return this._sendAjaxRequest(U,o);};C.prototype._getMessagesFromXHR=function(x){var a,m,l,i;m=[];try{a=JSON.parse(x.responseText);if(a&&a.messages&&a.messages.length>0){l=a.messages.length;for(i=0;i<l;i++){m.push({severity:a.messages[i].severity,text:a.messages[i].text});}}}catch(e){}return m;};C.prototype._sendAjaxRequest=function(U,o){var t=this;var f="/sap/bc/lrep/actions/getcsrftoken/";var m={headers:{'X-CSRF-Token':'fetch'},type:"HEAD"};if(this._sClient){m.headers['sap-client']=this._sClient;}return new Promise(function(r,a){function h(R,s,x){var n=x.getResponseHeader("X-CSRF-Token");t._sXsrfToken=n||t._sXsrfToken;var d={status:s,response:R};r(d);}function b(R,s,x){t._sXsrfToken=x.getResponseHeader("X-CSRF-Token");o.headers=o.headers||{};o.headers["X-CSRF-Token"]=t._sXsrfToken;q.ajax(U,o).done(h).fail(function(x,s,e){var E=new Error(e);E.status="error";E.messages=t._getMessagesFromXHR(x);a(E);});}function c(x,s,e){if(x.status===403){q.ajax(f,m).done(b).fail(function(x,s,e){a({status:"error"});});}else{if(o&&o.type==="DELETE"&&x.status===404){r();}else{var d;d={status:"error"};d.messages=t._getMessagesFromXHR(x);a(d);}}}if(!t._sXsrfToken||t._sXsrfToken==="fetch"){q.ajax(f,m).done(b).fail(function(x,s,e){a({status:"error"});});}else{q.ajax(U,o).done(h).fail(c);}});};C.prototype.loadChanges=function(c){var r,p;var t=this;try{r=q.sap.getResourceName(c,"-changes.json");}catch(e){return Promise.reject(e);}p={async:true,dataType:"json",failOnError:true,headers:{"X-UI5-Component":c}};if(this._sClient){p.headers["sap-client"]=this._sClient;}return q.sap.loadResource(r,p).then(function(R){var a=t._condense(R.changes);R.changes=a;var b={changes:R,componentClassName:c};return b;});};C.prototype._condense=function(c){return c.reduce(function(r,e,a,b){for(var i=0;i<r.length;i++){if((e.changeType===r[i].changeType)&&(e.component===r[i].component)&&(e.fileType===r[i].fileType)&&(JSON.stringify(e.selector)===JSON.stringify(r[i].selector))&&(JSON.stringify(e.texts)===JSON.stringify(r[i].texts))&&(JSON.stringify(e.content)===JSON.stringify(r[i].content))){return r;}}r.push(e);return r;},[]);};C.prototype._buildParams=function(p){if(!p){p=[];}if(this._sClient){p.push({name:"sap-client",value:this._sClient});}if(this._sLanguage){p.push({name:"sap-language",value:this._sLanguage});}var r="";var l=p.length;for(var i=0;i<l;i++){if(i===0){r+="?";}else if(i>0&&i<l){r+="&";}r+=p[i].name+"="+p[i].value;}return r;};C.prototype._getUrlPrefix=function(i){if(i){return"/sap/bc/lrep/variants/";}return"/sap/bc/lrep/changes/";};C.prototype.create=function(p,c,i){var r=this._getUrlPrefix(i);var P=[];if(c){P.push({name:"changelist",value:c});}r+=this._buildParams(P);return this.send(r,"POST",p,null);};C.prototype.update=function(p,c,s,i){var r=this._getUrlPrefix(i);r+=c;var P=[];if(s){P.push({name:"changelist",value:s});}r+=this._buildParams(P);return this.send(r,"PUT",p,null);};C.prototype.deleteChange=function(p,i){var r=this._getUrlPrefix(i);r+=p.sChangeName;var P=[];if(p.sLayer){P.push({name:"layer",value:p.sLayer});}if(p.sNamespace){P.push({name:"namespace",value:p.sNamespace});}if(p.sChangelist){P.push({name:"changelist",value:p.sChangelist});}r+=this._buildParams(P);return this.send(r,"DELETE",{},null);};C.prototype.getStaticResource=function(n,N,t,i){var a="/sap/bc/lrep/content/";var r=a;r+=n+"/"+N+"."+t;var p=[];if(i===true){p.push({name:"rt",value:"true"});}r+=this._buildParams(p);return this.send(r,"GET",{},null);};C.prototype.getFileAttributes=function(n,N,t,l){var a="/sap/bc/lrep/content/";var r=a;r+=n+"/"+N+"."+t;var p=[];p.push({name:"metadata",value:"true"});if(l){p.push({name:"layer",value:l});}r+=this._buildParams(p);return this.send(r,"GET",{},null);};C.prototype.upsert=function(n,N,t,l,c){var a=this;return Promise.resolve(a._fileAction("PUT",n,N,t,l,c));};C.prototype.deleteFile=function(n,N,t,l,c){return this._fileAction("DELETE",n,N,t,l,c);};C.prototype._fileAction=function(m,n,N,t,l,c){var a="/sap/bc/lrep/content/";var r=a;r+=n+"/"+N+"."+t;var p=[];p.push({name:"layer",value:l});if(c){p.push({name:"changelist",value:c});}r+=this._buildParams(p);return this.send(r,m.toUpperCase(),{},null);};C.prototype.publish=function(o,n,t,O,T,s,c){var a="/sap/bc/lrep/actions/publish/";var r=a;r+=o+"/"+n+"."+t;var p=[];if(O){p.push({name:"layer",value:O});}if(T){p.push({name:"target-layer",value:T});}if(s){p.push({name:"target-namespace",value:s});}if(c){p.push({name:"changelist",value:c});}r+=this._buildParams(p);return this.send(r,"POST",{},null);};C.prototype.listContent=function(n,l){var r="/sap/bc/lrep/content/";r+=n;var p=[];if(l){p.push({name:"layer",value:l});}r+=this._buildParams(p);return this.send(r,"GET",{},null);};return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.Transports')){jQuery.sap.declare('sap.ui.fl.Transports');sap.ui.define("sap/ui/fl/Transports",["sap/ui/fl/LrepConnector","sap/ui/fl/Utils"],function(L,F){"use strict";var T=function(){};T.prototype.getTransports=function(p){var u,c,l,P;u='/sap/bc/lrep/actions/gettransports/';if(p['package']){u+='&package='+p['package'];}if(p.name){u+='&name='+p.name;}if(p.namespace){u+='&namespace='+p.namespace;}if(p.type){u+='&type='+p.type;}c=F.getClient();if(c){u+='&sap-client='+c;}u=u.replace('&','?');l=L.createConnector();P=l.send(u);return P.then(function(r){if(r.response){if(!r.response.localonly){r.response.localonly=false;}if(!r.response.errorCode){r.response.errorCode="";}return Promise.resolve(r.response);}else{return Promise.reject('response is empty');}});};T.prototype.makeChangesTransportable=function(p){var u,c,l;u='/sap/bc/lrep/actions/make_changes_transportable/';c=F.getClient();if(c){u+='?sap-client='+c;}if(!p.transportId){return Promise.reject(new Error("no transportId provided as attribute of mParameters"));}if(!p.changeIds){return Promise.reject(new Error("no changeIds provided as attribute of mParameters"));}l=L.createConnector();return l.send(u,'POST',p);};return T;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.AddField')){jQuery.sap.declare('sap.ui.fl.changeHandler.AddField');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/AddField",['jquery.sap.global','sap/ui/fl/Utils','./Base'],function(q,U,B){"use strict";var A=function(){};A.prototype=q.sap.newObject(B.prototype);A.prototype.applyChange=function(c,g){var C=c.getDefinition();if(C.texts&&C.texts.fieldLabel&&C.texts.fieldLabel.value&&C.content&&C.content.field&&C.content.field.id&&C.content.field.jsType&&C.content.field.value&&C.content.field.valueProperty){q.sap.require("sap.ui.comp.smartform.GroupElement");var G=new sap.ui.comp.smartform.GroupElement(C.content.field.id);if(G.setLabel){G.setLabel(C.texts.fieldLabel.value);}var V=this._getControlClass(C.content.field.jsType);var v=new V();if(v){v.bindProperty(C.content.field.valueProperty,C.content.field.value);if(C.content.field.entitySet&&v.setEntitySet){v.setEntitySet(C.content.field.entitySet);}G.addElement(v);}if(g&&g.insertGroupElement){g.insertGroupElement(G,C.content.field.index);}else{throw new Error("no parent group provided for adding the field");}}else{U.log.error("Change does not contain sufficient information to be applied: ["+C.layer+"]"+C.namespace+"/"+C.fileName+"."+C.fileType);}};A.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(s.fieldLabel){this.setTextInChange(C,"fieldLabel",s.fieldLabel,"XFLD");}else{throw new Error("oSpecificChangeInfo.fieldLabel attribute required");}if(!C.content){C.content={};}if(!C.content.field){C.content.field={};}if(s.fieldValue){C.content.field.value=s.fieldValue;}else{throw new Error("oSpecificChangeInfo.fieldValue attribute required");}if(s.valueProperty){C.content.field.valueProperty=s.valueProperty;}else{throw new Error("oSpecificChangeInfo.valueProperty attribute required");}if(s.newControlId){C.content.field.id=s.newControlId;}else{throw new Error("oSpecificChangeInfo.newControlId attribute required");}if(s.jsType){C.content.field.jsType=s.jsType;}else{throw new Error("oSpecificChangeInfo.jsType attribute required");}if(s.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required");}else{C.content.field.index=s.index;}if(s.entitySet){C.content.field.entitySet=s.entitySet;}};A.prototype._getControlClass=function(j){var r;q.sap.require(j);var s=j.split(".");var J=window;q.each(s,function(i,S){J=J[S];});if(typeof(J)=="function"){r=J;}return r;};return A;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.changeHandler.AddGroup')){jQuery.sap.declare('sap.ui.fl.changeHandler.AddGroup');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/changeHandler/AddGroup",['sap/ui/fl/Utils','jquery.sap.global','./Base'],function(U,q,B){"use strict";var A=function(){};A.prototype=q.sap.newObject(B.prototype);A.prototype.applyChange=function(c,f){var C=c.getDefinition();if(C.texts&&C.texts.groupLabel&&C.texts.groupLabel.value&&C.content&&C.content.group&&C.content.group.id){q.sap.require("sap.ui.comp.smartform.Group");var g=new sap.ui.comp.smartform.Group(C.content.group.id);if(g.setLabel){g.setLabel(C.texts.groupLabel.value);}if(f&&f.insertGroup){f.insertGroup(g,C.content.group.index);}else{throw new Error("no parent form provided for adding the group");}}else{U.log.error("Change does not contain sufficient information to be applied: ["+C.layer+"]"+C.namespace+"/"+C.fileName+"."+C.fileType);}};A.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(s.groupLabel){this.setTextInChange(C,"groupLabel",s.groupLabel,"XFLD");}else{throw new Error("oSpecificChangeInfo.groupLabel attribute required");}if(!C.content){C.content={};}if(!C.content.group){C.content.group={};}if(s.newControlId){C.content.group.id=s.newControlId;}else{throw new Error("oSpecificChangeInfo.newControlId attribute required");}if(s.index===undefined){throw new Error("oSpecificChangeInfo.index attribute required");}else{C.content.group.index=s.index;}};return A;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.registry.Settings')){jQuery.sap.declare('sap.ui.fl.registry.Settings');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.EventProvider');sap.ui.define("sap/ui/fl/registry/Settings",["jquery.sap.global","sap/ui/fl/LrepConnector","sap/ui/fl/Cache","sap/ui/fl/Utils","sap/ui/base/EventProvider"],function(q,L,C,U,E){"use strict";var S=function(s){E.apply(this);if(!s){throw new Error("no flex settings provided");}if(!s.features){s.features={"addField":["CUSTOMER","VENDOR"],"addGroup":["CUSTOMER","VENDOR"],"removeField":["CUSTOMER","VENDOR"],"removeGroup":["CUSTOMER","VENDOR"],"hideControl":["CUSTOMER","VENDOR"],"unhideControl":["CUSTOMER","VENDOR"],"renameField":["CUSTOMER","VENDOR"],"renameGroup":["CUSTOMER","VENDOR"],"moveFields":["CUSTOMER","VENDOR"],"moveGroups":["CUSTOMER","VENDOR"]};}this._oSettings=s;this._bFlexChangeMode=true;};S.prototype=q.sap.newObject(E.prototype);S.events={changeModeUpdated:"changeModeUpdated"};S._instances={};S.getInstance=function(c){return C.getChangesFillingCache(L.createConnector(),c).then(function(f){var s;if(S._instances[c]){s=S._instances[c];}else if(f.changes&&f.changes.settings){s=new S(f.changes.settings);S._instances[c]=s;}else{s=new S({});S._instances[c]=s;}return s;});};S.getInstanceOrUndef=function(c){var s;if(S._instances[c]){s=S._instances[c];}return s;};S.prototype.isKeyUser=function(){var i=false;if(this._oSettings.isKeyUser){i=this._oSettings.isKeyUser;}return i;};S.prototype.isModelS=function(){var i=false;if(this._oSettings.isAtoAvailable){i=this._oSettings.isAtoAvailable;}return i;};S.prototype.isAtoEnabled=function(){var i=false;if(this._oSettings.isAtoEnabled){i=this._oSettings.isAtoEnabled;}return i;};S.prototype.isChangeTypeEnabled=function(c,a){if(!a){a='USER';}var i=false;if(!this._oSettings.features[c]){i=true;}else{var A=q.inArray(a,this._oSettings.features[c]);if(A<0){i=false;}else{i=true;}}return i;};S.prototype.isFlexChangeMode=function(){var f=false;var F=this._isFlexChangeModeFromUrl();if(F===undefined){f=this._bFlexChangeMode;}else{f=F;}return f;};S.prototype._isFlexChangeModeFromUrl=function(){var f;var u=q.sap.getUriParameters();if(u&&u.mParams&&u.mParams['sap-ui-fl-changeMode']&&u.mParams['sap-ui-fl-changeMode'][0]){if(u.mParams['sap-ui-fl-changeMode'][0]==='true'){f=true;}else if(u.mParams['sap-ui-fl-changeMode'][0]==='false'){f=false;}}return f;};S.prototype.activateFlexChangeMode=function(){this._bFlexChangeMode=true;var p={bFlexChangeMode:true};this.fireEvent(S.events.changeModeUpdated,p);};S.prototype.leaveFlexChangeMode=function(){this._bFlexChangeMode=false;var p={bFlexChangeMode:false};this.fireEvent(S.events.changeModeUpdated,p);};S.prototype.isProductiveSystem=function(){var i=false;if(this._oSettings.isProductiveSystem){i=this._oSettings.isProductiveSystem;}return i;};return S;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.registry.SimpleChanges')){jQuery.sap.declare('sap.ui.fl.registry.SimpleChanges');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/registry/SimpleChanges",["jquery.sap.global","sap/ui/fl/changeHandler/RemoveField","sap/ui/fl/changeHandler/RemoveGroup","sap/ui/fl/changeHandler/RenameField","sap/ui/fl/changeHandler/RenameGroup","sap/ui/fl/changeHandler/AddField","sap/ui/fl/changeHandler/AddGroup","sap/ui/fl/changeHandler/OrderFields","sap/ui/fl/changeHandler/OrderGroups","sap/ui/fl/changeHandler/HideControl","sap/ui/fl/changeHandler/UnhideControl","sap/ui/fl/changeHandler/MoveFields","sap/ui/fl/changeHandler/MoveGroups"],function(q,R,a,b,c,A,d,O,e,H,U,M,f){"use strict";var S={removeField:{changeType:"removeField",changeHandler:R},removeGroup:{changeType:"removeGroup",changeHandler:a},renameField:{changeType:"renameField",changeHandler:b},renameGroup:{changeType:"renameGroup",changeHandler:c},addField:{changeType:"addField",changeHandler:A},addGroup:{changeType:"addGroup",changeHandler:d},orderFields:{changeType:"orderFields",changeHandler:O},orderGroups:{changeType:"orderGroups",changeHandler:e},hideControl:{changeType:"hideControl",changeHandler:H},unhideControl:{changeType:"unhideControl",changeHandler:U},moveFields:{changeType:"moveFields",changeHandler:M},moveGroups:{changeType:"moveGroups",changeHandler:f}};return S;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.Change')){jQuery.sap.declare('sap.ui.fl.Change');jQuery.sap.require('sap.ui.base.EventProvider');sap.ui.define("sap/ui/fl/Change",["sap/ui/base/EventProvider","sap/ui/fl/Utils","sap/ui/fl/registry/Settings"],function(E,U,S){"use strict";var C=function(f){E.apply(this);if(typeof(f)!=="object"){U.log.error("Constructor : sap.ui.fl.Change : oFile is not defined");}this._oDefinition=f;this._oOriginDefinition=JSON.parse(JSON.stringify(f));this._sRequest='';this._bIsDeleted=false;this._bUserDependent=(f.layer==="USER");};C.events={markForDeletion:"markForDeletion"};C.prototype=jQuery.sap.newObject(E.prototype);C.prototype.isValid=function(){var i=true;if(typeof(this._oDefinition)!=="object"){i=false;}if(!this._oDefinition.fileType){i=false;}if(!this._oDefinition.fileName){i=false;}if(!this._oDefinition.changeType){i=false;}if(!this._oDefinition.layer){i=false;}if(!this._oDefinition.originalLanguage){i=false;}return i;};C.prototype.isVariant=function(){return this._oDefinition.fileType==="variant";};C.prototype.getChangeType=function(){if(this._oDefinition){return this._oDefinition.changeType;}};C.prototype.getOriginalLanguage=function(){if(this._oDefinition&&this._oDefinition.originalLanguage){return this._oDefinition.originalLanguage;}return"";};C.prototype.getPackage=function(){return this._oDefinition.packageName;};C.prototype.getNamespace=function(){return this._oDefinition.namespace;};C.prototype.getId=function(){return this._oDefinition.fileName;};C.prototype.getContent=function(){return this._oDefinition.content;};C.prototype.setContent=function(c){this._oDefinition.content=c;};C.prototype.getSelector=function(){return this._oDefinition.selector;};C.prototype.getText=function(t){if(typeof(t)!=="string"){U.log.error("sap.ui.fl.Change.getTexts : sTextId is not defined");}if(this._oDefinition.texts){if(this._oDefinition.texts[t]){return this._oDefinition.texts[t].value;}}return"";};C.prototype.setText=function(t,n){if(typeof(t)!=="string"){U.log.error("sap.ui.fl.Change.setTexts : sTextId is not defined");return;}if(this._oDefinition.texts){if(this._oDefinition.texts[t]){this._oDefinition.texts[t].value=n;}}};C.prototype.isReadOnly=function(){var i=this._isReadOnlyDueToLayer();if(!i){i=this._isReadOnlyWhenNotKeyUser();}return i;};C.prototype._isReadOnlyWhenNotKeyUser=function(){var i=false;if(!this.isUserDependent()){var c=this.getDefinition().component;if(c){var s=S.getInstanceOrUndef(c);if(s){var I=s.isKeyUser();if(I===false){i=true;}}}}return i;};C.prototype.isLabelReadOnly=function(){if(this._isReadOnlyDueToLayer()){return true;}return this._isReadOnlyDueToOriginalLanguage();};C.prototype._isReadOnlyDueToLayer=function(){var c;c=U.getCurrentLayer(this._bUserDependent);return(this._oDefinition.layer!==c);};C.prototype._isReadOnlyDueToOriginalLanguage=function(){var c,o;o=this.getOriginalLanguage();if(!o){return false;}c=U.getCurrentLanguage();return(c!==o);};C.prototype.markForDeletion=function(){this._bIsDeleted=true;};C.prototype._isDirty=function(){var c=JSON.stringify(this._oDefinition);var o=JSON.stringify(this._oOriginDefinition);return(c!==o);};C.prototype.setRequest=function(r){if(typeof(r)!=="string"){U.log.error("sap.ui.fl.Change.setRequest : sRequest is not defined");}this._sRequest=r;};C.prototype.getRequest=function(){return this._sRequest;};C.prototype.getLayer=function(){return this._oDefinition.layer;};C.prototype.getComponent=function(){return this._oDefinition.component;};C.prototype.getCreation=function(){return this._oDefinition.creation;};C.prototype.isUserDependent=function(){return(this._bUserDependent);};C.prototype.getPendingAction=function(){if(this._bIsDeleted){return"DELETE";}else if(!this._oDefinition.creation){return"NEW";}else if(this._isDirty()===true){return"UPDATE";}return"NONE";};C.prototype.getDefinition=function(){return this._oDefinition;};C.prototype.setResponse=function(r){var R=JSON.stringify(r);if(R){this._oDefinition=JSON.parse(R);this._oOriginDefinition=JSON.parse(R);}};C.createInitialFileContent=function(p){if(!p){p={};}var n={fileName:p.id||jQuery.sap.uid().replace(/-/g,"_"),fileType:(p.isVariant)?"variant":"change",changeType:p.changeType||"",component:p.componentName||"",packageName:p.packageName||"",content:p.content||{},selector:p.selector||{},layer:U.getCurrentLayer(p.isUserDependent),texts:p.texts||{},namespace:p.namespace||"",creation:"",originalLanguage:U.getCurrentLanguage(),conditions:{},support:{generator:"Change.createInitialFileContent",service:p.service||"",user:""}};return n;};return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.ChangePersistence')){jQuery.sap.declare('sap.ui.fl.ChangePersistence');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/ChangePersistence",["sap/ui/fl/Change","sap/ui/fl/Utils","jquery.sap.global","sap/ui/fl/LrepConnector","sap/ui/fl/Cache"],function(C,U,$,L,a){"use strict";var b=function(c,l){this._sComponentName=c;if(!this._sComponentName){U.log.error("The Control does not belong to a SAPUI5 component. Personalization and changes for this control might not work as expected.");throw new Error("Missing component name.");}this._oConnector=l||this._createLrepConnector();this._aDirtyChanges=[];};b.prototype.getComponentName=function(){return this._sComponentName;};b.prototype._createLrepConnector=function(){return L.createConnector();};b.prototype.getChangesForComponent=function(){return a.getChangesFillingCache(this._oConnector,this._sComponentName).then(function(w){this._bHasLoadedChangesFromBackend=true;if(!w.changes||!w.changes.changes){return[];}var d=w.changes.changes;return d.filter(p).map(c);}.bind(this));function c(o){return new C(o);}function p(o){if(o.fileType!=='change'){return false;}if(o.changeType==='defaultVariant'){return false;}if(!o.selector||!o.selector.id){return false;}return true;}};b.prototype.getChangesForView=function(v){return this.getChangesForComponent().then(function(d){return d.filter(c);});function c(o){var s=o.getSelector().id;var S=s.slice(0,s.lastIndexOf('--'));return S===v;}};b.prototype.addChange=function(c){var n=new C(c);this._aDirtyChanges.push(n);return n;};b.prototype.saveDirtyChanges=function(){var c=this._sComponentName;var o=this._oConnector;var d=this._aDirtyChanges.slice(0);var D=this._aDirtyChanges;return d.reduce(function(s,e){var f=s.then(p(e));f.then(u(e));return f;},Promise.resolve());function p(e){return function(){if(e.getPendingAction()==='NEW'){return o.create(e.getDefinition(),e.getRequest());}if(e.getPendingAction()==='DELETE'){return o.deleteChange({sChangeName:e.getId(),sLayer:e.getLayer(),sNamespace:e.getNamespace(),sChangelist:e.getRequest()});}};}function u(e){return function(){if(e.getPendingAction()==='NEW'){a.addChange(c,e.getDefinition());}if(e.getPendingAction()==='DELETE'){a.deleteChange(c,e.getDefinition());}var i=D.indexOf(e);if(i>-1){D.splice(i,1);}};}};b.prototype.getDirtyChanges=function(){return this._aDirtyChanges;};b.prototype.deleteChange=function(c){var i=this._aDirtyChanges.indexOf(c);if(i>-1){if(c.getPendingAction()==='DELETE'){return;}this._aDirtyChanges.splice(i,1);return;}c.markForDeletion();this._aDirtyChanges.push(c);};return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.ChangePersistenceFactory')){jQuery.sap.declare('sap.ui.fl.ChangePersistenceFactory');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/ChangePersistenceFactory",["jquery.sap.global","sap/ui/fl/ChangePersistence","sap/ui/fl/Utils"],function(q,C,U){"use strict";var a={};a._instanceCache={};a.getChangePersistenceForComponent=function(c){var o;if(!a._instanceCache[c]){o=new C(c);a._instanceCache[c]=o;}return a._instanceCache[c];};a.getChangePersistenceForControl=function(c){var s;s=this._getComponentClassNameForControl(c);return a.getChangePersistenceForComponent(s);};a._getComponentClassNameForControl=function(c){return U.getComponentClassName(c);};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.DefaultVariant')){jQuery.sap.declare('sap.ui.fl.DefaultVariant');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/DefaultVariant",["jquery.sap.global","sap/ui/fl/Change"],function($,C){"use strict";var D=function(){};D.prototype.getDefaultVariantId=function(c){var d=this.getNewestDefaultVariantChangeDeleteTheRest(c);if(d){return d.getContent().defaultVariantName;}return"";};D.prototype.getNewestDefaultVariantChangeDeleteTheRest=function(c){var d=this.getDefaultVariantChanges(c).sort(function(a,b){var e=new Date(a.getCreation());var f=new Date(b.getCreation());if(isNaN(e.getDate())){return-1;}if(isNaN(f.getDate())){return 1;}return f-e;});var n=d.shift();d.forEach(function(o){o.markForDeletion();});return n;};D.prototype.getDefaultVariantChanges=function(c){if(!c||typeof c!=='object'){return[];}return Object.keys(c).map(a).filter(d);function a(s){return c[s];}function d(o){return o.getChangeType()==='defaultVariant';}};D.prototype.updateDefaultVariantId=function(c,n){var N=this.getNewestDefaultVariantChangeDeleteTheRest(c);if(N){N.getContent().defaultVariantName=n;}return N;};D.prototype._createChangeFile=function(p){var f;p.namespace=p.component+'/changes/default';p.componentName=p.component;p.changeType='defaultVariant';f=C.createInitialFileContent(p);f.content.defaultVariantName=p.defaultVariantId;f.layer='USER';return f;};D.prototype.createChangeObject=function(p){var f,c;f=this._createChangeFile(p);c=new C(f);return c;};return new D();},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.FakeLrepConnector')){jQuery.sap.declare('sap.ui.fl.FakeLrepConnector');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.thirdparty.URI');sap.ui.define("sap/ui/fl/FakeLrepConnector",["jquery.sap.global","sap/ui/thirdparty/URI","sap/ui/fl/Utils","sap/ui/fl/LrepConnector"],function(q,u,F,L){"use strict";var l=Object.create(L.prototype);var i;function a(I){this.sInitialComponentJsonPath=I;}for(var p in l){if(typeof l[p]==='function'){a.prototype[p]=(function(p){return function(){throw new Error('Method '+p+'() is not implemented in FakeLrepConnector.');};}(p));}}a.prototype.loadChanges=function(c){var b=this.sInitialComponentJsonPath;return new Promise(function(r,d){q.getJSON(b).done(function(R){R.changes=l._condense(R.changes);var e={changes:R,componentClassName:c};r(e);}).fail(function(e){d(e);});});};a.prototype.create=function(){return Promise.resolve();};a.prototype.deleteChange=function(){return Promise.resolve();};a.enableFakeConnector=function(I){a.enableFakeConnector.original=L.createConnector;L.createConnector=function(){if(!i){i=new a(I);}return i;};};a.disableFakeConnector=function(){if(a.enableFakeConnector.original){L.createConnector=a.enableFakeConnector.original;}};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.Persistence')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2014-2015 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.fl.Persistence');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/Persistence",["sap/ui/fl/Change","sap/ui/fl/DefaultVariant","sap/ui/fl/Utils","jquery.sap.global","sap/ui/fl/LrepConnector","sap/ui/fl/Cache"],function(C,d,U,$,L,a){"use strict";var P=function(c,s){this._oControl=c;this._bHasLoadedChangesFromBackend=false;this._sStableIdPropertyName=s||'id';this._sStableId=this._getStableId();this._sComponentName=U.getComponentClassName(c);if(!this._sComponentName){U.log.error("The Control does not belong to a SAPUI5 component. Variants and Changes for this control might not work as expected.");}this._oChanges={};this._oConnector=this._createLrepConnector();};P.prototype.getComponentName=function(){return this._sComponentName;};P.prototype.setComponentName=function(c){this._sComponentName=c;};P.prototype._createLrepConnector=function(){var x,p;x=U.getXSRFTokenFromControl(this._oControl);p={XsrfToken:x};return L.createConnector(p);};P.prototype._getStableId=function(){if(!this._oControl){return undefined;}if((this._sStableIdPropertyName)&&(this._sStableIdPropertyName!=='id')){var s;try{s=this._oControl.getProperty(this._sStableIdPropertyName);}catch(e){s="";}return s;}if(typeof this._oControl.getId!=='function'){return undefined;}return this._oControl.getId();};P.prototype.getChanges=function(){var t=this;var c=this._sComponentName;if(this._bHasLoadedChangesFromBackend===true){return Promise.resolve(this._oChanges);}return a.getChangesFillingCache(this._oConnector,c).then(function(f){t._fillRelevantChanges(f);t._bHasLoadedChangesFromBackend=true;return t._oChanges;});};P.prototype.getComponentChanges=function(){var t=this;return a.getChangesFillingCache(this._oConnector,this._sComponentName).then(function(f){var n=true;t._fillRelevantChanges(f,n);return t._oChanges;});};P.prototype._fillRelevantChanges=function(f,n){var c,l,o,s,b,j,e;var t=this;var g=function(k,h){U.log.error("key : "+k+" and text : "+h.value);};var A=function(i,v){if(n===true&&o.fileType==='change'||t._sStableId===v){b=new C(o);b.attachEvent(C.events.markForDeletion,t._onDeleteChange.bind(t));e=b.getId();if(b.isValid()){if(t._oChanges[e]&&b.isVariant()){U.log.error("Id collision - two or more variant files having the same id detected: "+e);jQuery.each(b.getDefinition().texts,g);U.log.error("already exists in variant : ");jQuery.each(t._oChanges[e].getDefinition().texts,g);}t._oChanges[e]=b;}return false;}};if(f&&f.changes&&f.changes.changes){c=f.changes.changes;l=c.length;for(j=0;j<l;j++){o=c[j];s=o.selector;if(s){jQuery.each(s,A);}}}};P.prototype.getChange=function(c){if(!c){U.log.error("sap.ui.fl.Persistence.getChange : sChangeId is not defined");return undefined;}return this._oChanges[c];};P.prototype.addChange=function(p){var f,i,I,c;if(!p){return undefined;}if(!p.type){U.log.error("sap.ui.fl.Persistence.addChange : type is not defined");}if(!p.ODataService){U.log.error("sap.ui.fl.Persistence.addChange : ODataService is not defined");}var s=jQuery.type(p.content);if(s!=='object'&&s!=='array'){U.log.error("mParameters.content is not of expected type object or array, but is: "+s,"sap.ui.fl.Persistence#addChange");}I={};if(typeof(p.texts)==="object"){jQuery.each(p.texts,function(b,t){I[b]={value:t,type:"XFLD"};});}i={changeType:p.type,service:p.ODataService,texts:I,content:p.content,componentName:this._sComponentName,isVariant:p.isVariant,namespace:this._sComponentName,packageName:p.packageName,isUserDependent:p.isUserDependent};i.selector=this._getSelector();f=C.createInitialFileContent(i);if(p.id){f.fileName=p.id;}c=this.addChangeFile(f);return c.getId();};P.prototype.addChangeFile=function(c){var o,s;o=new C(c);o.attachEvent(C.events.markForDeletion,this._onDeleteChange.bind(this));s=o.getId();this._oChanges[s]=o;return o;};P.prototype.removeChangeFromPersistence=function(c){if(c.getPendingAction()!=='NEW'){return;}var s=c.getId();delete this._oChanges[s];};P.prototype.putChange=function(c){c.attachEvent(C.events.markForDeletion,this._onDeleteChange.bind(this));var s=c.getId();this._oChanges[s]=c;};P.prototype._getSelector=function(){var s;s={};if(this._sStableIdPropertyName){s[this._sStableIdPropertyName]=this._sStableId;}return s;};P.prototype.getDefaultVariantId=function(){return this.getChanges().then(function(c){return d.getDefaultVariantId(c);});};P.prototype.getDefaultVariantIdSync=function(){return d.getDefaultVariantId(this._oChanges);};P.prototype.setDefaultVariantIdSync=function(D){var p,c;var s={};s[this._sStableIdPropertyName]=this._sStableId;p={defaultVariantId:D,component:this._sComponentName,selector:s};c=d.updateDefaultVariantId(this._oChanges,D);if(c){return c;}c=d.createChangeObject(p);c.attachEvent(C.events.markForDeletion,this._onDeleteChange.bind(this));var b=c.getId();this._oChanges[b]=c;return c;};P.prototype.setDefaultVariantId=function(D){var p,c;var t=this;return this.getChanges().then(function(o){var s={};s[t._sStableIdPropertyName]=t._sStableId;p={defaultVariantId:D,component:t._sComponentName,selector:s};c=d.updateDefaultVariantId(o,D);if(c){return c;}c=d.createChangeObject(p);c.attachEvent(C.events.markForDeletion,t._onDeleteChange.bind(t));o[c.getId()]=c;return c;});};P.prototype.saveAll=function(){var p=[];var t=this;jQuery.each(this._oChanges,function(i,c){switch(c.getPendingAction()){case"NEW":p.push(t._oConnector.create(c.getDefinition(),c.getRequest(),c.isVariant()).then(function(r){c.setResponse(r.response);if(a.isActive()){a.addChange(c.getComponent(),r.response);}return r;}));break;case"UPDATE":p.push(t._oConnector.update(c.getDefinition(),c.getId(),c.getRequest(),c.isVariant()).then(function(r){c.setResponse(r.response);if(a.isActive()){a.updateChange(c.getComponent(),r.response);}return r;}));break;case"DELETE":p.push(t._oConnector.deleteChange({sChangeName:c.getId(),sLayer:c.getLayer(),sNamespace:c.getNamespace(),sChangelist:c.getRequest()},c.isVariant()).then(function(r){var s=c.getId();var m={id:s};c.fireEvent(C.events.markForDeletion,m);if(a.isActive()){a.deleteChange(c.getComponent(),c.getDefinition());}return r;}));break;default:break;}});return Promise.all(p);};P.prototype._onDeleteChange=function(e){var c;c=e.getParameter("id");var o=this.getChange(c);if(o.getPendingAction()==="DELETE"){delete this._oChanges[c];}};P.prototype.isVariantDownport=function(){var l,i;l=U.getCurrentLayer();i=U.isHotfixMode();return((l==='VENDOR')&&(i));};return P;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.registry.ChangeRegistry')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2014-2015 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.fl.registry.ChangeRegistry');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/registry/ChangeRegistry",["sap/ui/fl/Utils","jquery.sap.global","sap/ui/fl/registry/ChangeRegistryItem","sap/ui/fl/registry/SimpleChanges","sap/ui/fl/registry/ChangeTypeMetadata","sap/ui/fl/registry/Settings"],function(U,q,C,S,a,b){"use strict";var c=function(){this._registeredItems={};this.simpleChanges=S;this.initSettings();};c._instance=undefined;c.getInstance=function(){if(!c._instance){c._instance=new c();}return c._instance;};c.prototype.registerControlForSimpleChange=function(s,o){var d;if(!s){return;}if(!o||!o.changeType||!o.changeHandler){return;}d=this._createChangeRegistryItemForSimpleChange(s,o);if(d){this.addRegistryItem(d);}};c.prototype._createChangeRegistryItemForSimpleChange=function(s,o){var p,d,e;p={name:o.changeType,changeHandler:o.changeHandler};d=new a(p);p={changeTypeMetadata:d,controlType:s};e=new C(p);return e;};c.prototype.addRegistryItem=function(r){var s,d;if(!r){return;}s=r.getChangeTypeName();d=r.getControlType();this._registeredItems[d]=this._registeredItems[d]||{};this._registeredItems[d][s]=r;};c.prototype.removeRegistryItem=function(p){if(!p.changeTypeName&&!p.controlType){U.log.error("sap.ui.fl.registry.ChangeRegistry: ChangeType and/or ControlType required");return;}if(p.controlType&&p.changeTypeName){if(this._registeredItems[p.controlType]){if(Object.keys(this._registeredItems[p.controlType]).length===1){delete this._registeredItems[p.controlType];}else{delete this._registeredItems[p.controlType][p.changeTypeName];}}}else if(p.controlType){if(this._registeredItems[p.controlType]){delete this._registeredItems[p.controlType];}}else if(p.changeTypeName){for(var d in this._registeredItems){var e=this._registeredItems[d];delete e[p.changeTypeName];}}};c.prototype.getRegistryItems=function(p){if(!p.changeTypeName&&!p.controlType){U.log.error("sap.ui.fl.registry.ChangeRegistry: Change Type Name and/or Control Type required");}var r=null;if(p.controlType&&p.changeTypeName){var d=this._registeredItems[p.controlType];if(d){if(d[p.changeTypeName]){r={};r[p.controlType]={};r[p.controlType][p.changeTypeName]=d[p.changeTypeName];}}}else if(p.controlType){if(this._registeredItems[p.controlType]){r={};r[p.controlType]={};q.each(this._registeredItems[p.controlType],function(s,R){r[p.controlType][s]=R;});}}else if(p.changeTypeName){r={};for(var e in this._registeredItems){if(this._registeredItems[e][p.changeTypeName]){r[e]={};r[e][p.changeTypeName]=this._registeredItems[e][p.changeTypeName];}}}this._filterChangeTypes(r,p.layer);return r;};c.prototype.initSettings=function(s){this._oSettings=b.getInstanceOrUndef(s);if(!this._oSettings){this._oSettings=new b({});}};c.prototype._filterChangeTypes=function(r,l){if(this._oSettings&&l&&r){var t=this;q.each(r,function(s,o){q.each(o,function(d,R){var i=t._oSettings.isChangeTypeEnabled(d,l);if(!i){delete o[d];}});});}};c.prototype.getDragInfo=function(s){var d=this._registeredItems[s];if(d){return d.getDragInfo();}return null;};return c;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.FlexController')){jQuery.sap.declare('sap.ui.fl.FlexController');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.mvc.View');sap.ui.define("sap/ui/fl/FlexController",["jquery.sap.global","sap/ui/fl/Persistence","sap/ui/fl/registry/ChangeRegistry","sap/ui/fl/Utils","sap/ui/fl/Change","sap/ui/fl/registry/Settings","sap/ui/fl/ChangePersistenceFactory","sap/ui/core/mvc/View"],function(q,P,C,U,a,F,b,V){"use strict";var c=function(s){this._oChangePersistence=undefined;this._sComponentName=s||"";if(this._sComponentName){this._createChangePersistence();}};c.prototype.setComponentName=function(s){this._sComponentName=s;this._createChangePersistence();};c.prototype.getComponentName=function(){return this._sComponentName;};c.prototype.addChange=function(o,d){var e,f,g,h;var s=this.getComponentName();o.componentName=s;o.namespace=s;o.packageName='$TMP';e=a.createInitialFileContent(o);f=this._oChangePersistence.addChange(e);g=this._getChangeHandler(f,d);if(g){h=new g();h.completeChangeContent(f,o);}else{throw new Error('Change handler could not be retrieved for change '+JSON.stringify(o));}return f;};c.prototype.createAndApplyChange=function(o,d){var e=this.addChange(o,d);try{this.applyChange(e,d);}catch(f){this._oChangePersistence.deleteChange(e);throw f;}};c.prototype.saveAll=function(){return this._oChangePersistence.saveDirtyChanges();};c.prototype.processView=function(v){var t=this;var h=this._hasSmartControls(v);if(!h){return Promise.resolve("No smart control found. Processing skipped.");}return F.getInstance(this.getComponentName()).then(function(s){return t._getChangesForView(v);}).then(function(d){d.forEach(function(o){var e=t._getControlByChange(o);t.applyChangeAndCatchExceptions(o,e);});})['catch'](function(e){U.log.error('Error processing view '+e);});};c.prototype.applyChangeAndCatchExceptions=function(o,d){try{this.applyChange(o,d);}catch(e){var f=o.getDefinition();U.log.error("Change could not be applied: ["+f.layer+"]"+f.namespace+"/"+f.fileName+"."+f.fileType+": "+e);}};c.prototype.applyChange=function(o,d){var e,f;e=this._getChangeHandler(o,d);if(!e){if(o&&d){U.log.warning("Change handler implementation for change not found - Change ignored");}return;}f=new e();if(f&&typeof f.applyChange==='function'){f.applyChange(o,d);}};c.prototype._getChangeHandler=function(o,d){var e,f;e=this._getChangeTypeMetadata(o,d);if(!e){return undefined;}f=e.getChangeHandler();return f;};c.prototype._getChangeTypeMetadata=function(o,d){var e,f;e=this._getChangeRegistryItem(o,d);if(!e||!e.getChangeTypeMetadata){return undefined;}f=e.getChangeTypeMetadata();return f;};c.prototype._getChangeRegistryItem=function(o,d){var s,e,f,l;if(!o||!d){return undefined;}s=o.getChangeType();e=U.getControlType(d);if(!s||!e){return undefined;}l=o.getLayer();f=this._getChangeRegistry().getRegistryItems({"changeTypeName":s,"controlType":e,"layer":l});if(f&&f[e]&&f[e][s]){return f[e][s];}else if(f&&f[e]){return f[e];}else{return f;}};c.prototype._getChangeRegistry=function(){var i=C.getInstance();i.initSettings(this.getComponentName());return i;};c.prototype._getControlByChange=function(o){var s;if(!o){return undefined;}s=o.getSelector();if(s&&typeof s.id==="string"){return sap.ui.getCore().byId(s.id);}return undefined;};c.prototype.getComponentChanges=function(){return this._oChangePersistence.getChangesForComponent();};c.prototype._getChangesForView=function(v){return this._oChangePersistence.getChangesForView(v.getId());};c.prototype._createChangePersistence=function(){this._oChangePersistence=b.getChangePersistenceForComponent(this.getComponentName());return this._oChangePersistence;};c.prototype.discardChanges=function(d){var A=U.getCurrentLayer(false);d.forEach(function(o){if(o&&o.getLayer&&o.getLayer()===A){this._oChangePersistence.deleteChange(o);}}.bind(this));return this._oChangePersistence.saveDirtyChanges();};c.prototype._hasSmartControls=function(p){var A,i,j,d,o;var h=false;var e=p.getMetadata().getAllAggregations();var f=Object.keys(e);for(i=0;i<f.length;i++){A=e[f[i]];if(A.type==='sap.ui.core.Control'){d=p.getAggregation(f[i]);if(d){for(j=0;j<d.length;j++){o=d[j];if(o.getMetadata().getName().indexOf('Smart')>=0){h=true;break;}else{h=this._hasSmartControls(o);if(h===true){break;}}}if(h===true){break;}}}}return h;};c.prototype.deleteChangesForControlDeeply=function(o){return Promise.resolve();};return c;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.FlexControllerFactory')){jQuery.sap.declare('sap.ui.fl.FlexControllerFactory');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/fl/FlexControllerFactory",["jquery.sap.global","sap/ui/fl/FlexController","sap/ui/fl/Utils"],function(q,F,U){"use strict";var a={};a._instanceCache={};a.create=function(c){var f=a._instanceCache[c];if(!f){f=new F(c);a._instanceCache[c]=f;}return f;};a.createForControl=function(c){var C=U.getComponentClassName(c);return a.create(C);};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.PreprocessorImpl')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2014-2015 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.fl.PreprocessorImpl');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Component');sap.ui.define("sap/ui/fl/PreprocessorImpl",['jquery.sap.global','sap/ui/core/Component','sap/ui/fl/FlexControllerFactory','sap/ui/fl/Utils'],function(q,C,F,U){'use strict';var a=function(){};a._getOwnerId=function(m){var o;if(m){o=C.getOwnerIdFor(m);if(!o&&m.getParent){o=a._getOwnerId(m.getParent());}}return o;};a.process=function(v){return Promise.resolve().then(function(){var o=a._getOwnerId(v);if(!o){var e="no owner ID found for "+v.getId();q.sap.log.error(e);throw new Error(e);}var c=sap.ui.getCore().getComponent(o).getMetadata().getName();if(c.indexOf(".Component")<0){c+='.Component';}var f=F.create(c);return f.processView(v);}).then(function(){q.sap.log.debug("flex processing view "+v.getId()+" finished");return v;})["catch"](function(e){var E="flex error processing view "+v.getId()+": "+e;q.sap.log.error(E);return v;});};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.core.EventDelegate')){
/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2014-2015 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.fl.core.EventDelegate');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.EventProvider');sap.ui.define("sap/ui/fl/core/EventDelegate",["jquery.sap.global","sap/ui/fl/Utils","sap/ui/base/EventProvider","sap/ui/fl/registry/ChangeRegistry","sap/ui/fl/core/FlexVisualizer"],function(q,U,E,C,F){"use strict";var a=function(c,s){if(!c){U.log.error("sap.ui.fl.core.EventDelegate: Control required");}if(!s){U.log.error("sap.ui.fl.core.EventDelegate: Supported registry items required");}E.apply(this);this._oControl=c;this._oSupportedRegistryItems=s;};a.prototype=q.sap.newObject(E.prototype);a.registerControl=function(c){if(c){var i=0;if(c.aDelegates){for(i=0;i<c.aDelegates.length;i++){var t="";if(c.aDelegates[i].oDelegate&&c.aDelegates[i].oDelegate.getType){t=(c.aDelegates[i].oDelegate.getType());}if(t==="Flexibility"){return;}}}a.registerExplicitChanges(c);}};a.registerExplicitChanges=function(c){var r=C.getInstance();var p={controlType:U.getControlType(c)};var s=r.getRegistryItems(p);if(Object.keys(s).length>0){c.addEventDelegate(new a(c,s));}};a.unregisterControl=function(){};a.prototype.onmouseover=function(e){e.stopPropagation();if(e.handled){return;}else{e.handled=true;}if(F.isPersonalizationMode()){if(this._oControl&&!q(this._oControl.getDomRef()).hasClass("sapuiflex-highlight")){F.showDialog(this._oControl);}}};a.prototype.onmouseout=function(e){if(F.isPersonalizationMode()){if(this._oControl){F.closeDialog();}}};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.fl.Preprocessor')){
/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2014-2015 SAP SE. All rights reserved
 */
jQuery.sap.declare('sap.ui.fl.Preprocessor');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.mvc.Preprocessor');sap.ui.define("sap/ui/fl/Preprocessor",['jquery.sap.global','sap/ui/core/mvc/Preprocessor','sap/ui/fl/PreprocessorImpl'],function(q,C,P){'use strict';var F=C.extend("sap.ui.fl.Preprocessor",{});F.process=function(v){return P.process(v);};return F;},true);};
