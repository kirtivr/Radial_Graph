/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2014-2015 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','./Base','sap/ui/fl/Utils'],function(q,B,F){"use strict";var M=function(){};M.prototype=q.sap.newObject(B.prototype);M.prototype.applyChange=function(c,s){if(!c){throw new Error("No change instance");}var C=c.getDefinition();if(!C.selector||!C.content||!C.content.moveGroups||C.content.moveGroups.length===0||Object.keys(C.selector).length!==1){throw new Error("Change format invalid");}if(!s||!s.getGroups){throw new Error("No smart form instance supplied");}var g=[];g=s.getGroups();if(g.length===0){return;}var G=g.length;var o={},m={};var a=C.content.moveGroups.length;var I;var i,j;for(i=0;i<a;i++){m=C.content.moveGroups[i];if(!m.id){throw new Error("Change format invalid - moveGroups element has no id attribute");}if(typeof(m.index)!=="number"){throw new Error("Change format invalid - moveGroups element index attribute is no number");}I=-1;for(j=0;j<G;j++){if(g[j].getId()===m.id){I=j;break;}}if(I===m.index||I===-1){continue;}o=g[I];g.splice(I,1);g.splice(m.index,0,o);}s.removeAllGroups();for(i=0;i<G;i++){s.insertGroup(g[i],i);}};M.prototype.completeChangeContent=function(c,s){var C=c.getDefinition();if(s.moveGroups){var m={};var i,l=s.moveGroups.length;if(l===0){throw new Error("MoveGroups array is empty");}for(i=0;i<l;i++){m=s.moveGroups[i];if(!m.id){throw new Error("MoveGroups element has no id attribute");}if(typeof(m.index)!=="number"){throw new Error("Index attribute at MoveGroups element is no number");}}if(!C.content){C.content={};}if(!C.content.moveGroups){C.content.moveGroups=[];}C.content.moveGroups=s.moveGroups;}else{throw new Error("oSpecificChangeInfo.moveGroups attribute required");}};return M;},true);
