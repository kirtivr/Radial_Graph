/*
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2014 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/m/P13nItem','sap/ui/base/ManagedObject','./Util','sap/ui/table/Table'],function(q,P,M,U,T){"use strict";var B=M.extend("sap.ui.comp.personalization.BaseController",{metadata:{"abstract":true,publicMethods:["getPanel"],library:"sap.ui.comp",properties:{type:{type:"sap.m.P13nPanelType",group:"Misc",defaultValue:null},model:{type:"sap.ui.model.json.JSONModel",group:"Misc",defaultValue:null},persistentDataRestore:{type:"object",group:"Misc",defaultValue:null,visibility:"hidden"}},associations:{table:{type:"sap.ui.core.Control",multiple:false}},events:{beforePotentialTableChange:{},afterPotentialTableChange:{}}}});B.prototype.init=function(){};B.prototype.setModelFunction=function(){var t=this;var f=function(){if(!this.getModel()){this.setModel(t.getModel());}};return f;};B.prototype.getTable=function(){var t=this.getAssociation("table");if(typeof t==="string"){t=sap.ui.getCore().byId(t);}return t;};B.prototype.createPersistentStructure=function(i){i=i||[];var p={};p[this.getType()]={};p[this.getType()][this.getType()+"Items"]=i;return p;};B.prototype.getPersistentData=function(){var d=this.getModel().getData();var p={};if(!d.persistentData[this.getType()]){p=this.createPersistentStructure();}else{p[this.getType()]=d.persistentData[this.getType()];}return p;};B.prototype.setPersistentData=function(d){var D=this.getModel().getData();D.persistentData[this.getType()]=d[this.getType()];};B.prototype.getPersistentDataItems=function(){return this.getPersistentData()[this.getType()][this.getType()+"Items"];};B.prototype.setPersistentDataItems=function(i){this.setPersistentData(this.createPersistentStructure(i));};B.prototype.getTransientData=function(){var d=this.getModel().getData();var t={};if(!d.transientData[this.getType()]){t[this.getType()]={};t[this.getType()].title=this.getTitleText();t[this.getType()].items=[];}else{t[this.getType()]=d.transientData[this.getType()];}return t;};B.prototype.setTransientData=function(d){var D=this.getModel().getData();D.transientData[this.getType()]=d[this.getType()];};B.prototype.initializeModel=function(m){this.setModel(m);this.setTransientData(this.getTransientData());this.setPersistentData(this.getPersistentData());};B.prototype.createTableRestoreJson=function(){this.setPersistentDataRestore(this._getTable2Json());};B.prototype.getTableRestoreJson=function(){return U.copy(this.getPersistentDataRestore());};B.prototype.reducePersistentModel=function(){var t=this.getTable();if(!t){return;}var c=t.getColumns();var i=[];this.getPersistentDataItems().forEach(function(I){var C=U.getColumn(I.columnKey,c);if(C){i.push(I);}});this.setPersistentDataItems(i);};B.prototype._getTable2Json=function(){};B.prototype.syncTable2PersistentModel=function(){this.setPersistentData(this._getTable2Json());};B.prototype.syncTable2TransientModel=function(){};B.prototype.getPanel=function(){};B.prototype.onAfterSubmit=function(p){this.syncJsonModel2Table(this.getModel().getData().persistentData);};B.prototype.onAfterReset=function(p){};B.prototype.syncJsonModel2Table=function(j){};B.prototype.getChangeType=function(p,o){};B.prototype.getChangeData=function(p,o){};B.prototype.getUnionData=function(p,o){};B.prototype.exit=function(){};return B;},true);
