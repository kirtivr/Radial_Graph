/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2015 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/m/Label','sap/ui/comp/library','./BindingUtil'],function(q,L,l,B){"use strict";var S=L.extend("sap.ui.comp.smartfield.SmartLabel",{metadata:{library:"sap.ui.comp"}});S.prototype.init=function(){this._oSmartField=null;this._sSmartFieldId=null;};S.prototype._bindProperties=function(){var b=new B();var i=this._oSmartField.getBindingInfo("visible");if(i){this.bindProperty("visible",b.toBinding(i));}else{this.setVisible(this._oSmartField.getVisible());}i=this._oSmartField.getBindingInfo("mandatory");if(i){this.bindProperty("required",b.toBinding(i));}else{this.setRequired(this._oSmartField.getMandatory());}i=this._oSmartField.getBindingInfo("textLabel");if(i){this.bindProperty("text",b.toBinding(i));}else{this.setText(this._oSmartField.getTextLabel());}i=this._oSmartField.getBindingInfo("tooltipLabel");if(i){this.bindProperty("tooltip",b.toBinding(i));}else{this.setTooltip(this._oSmartField.getTooltipLabel());}};S.prototype.getLabelInfo=function(){var m,o;if(this._oSmartField){this._bindProperties();m=this._oSmartField.getDataProperty();if(m){o=this._getLabelInfo(m);if(o){if(o.text){if(!this._oSmartField.getTextLabel()){this.setText(o.text);}}if(o.quickinfo){if(!this._oSmartField.getTooltipLabel()){this.setTooltip(o.quickinfo);}}}}if(!o||!o.quickinfo){if(!this._oSmartField.getTooltipLabel()){this.setTooltip(this.getText());}}}};S.prototype.setLabelFor=function(s){if(s){if(typeof s==='string'){this._oSmartField=sap.ui.getCore().getControl(s);if(!this._oSmartField){this._sSmartFieldId=s;}}else{this._oSmartField=s;}this._setLabelFor();}};S.prototype._setLabelFor=function(){var d;if(this._oSmartField){if(this._oSmartField.getDataProperty){d=this._oSmartField.getDataProperty();if(d){this.getLabelInfo();}else{this._oSmartField.attachInitialise(q.proxy(this.getLabelInfo,this));}}sap.m.Label.prototype.setLabelFor.apply(this,[this._oSmartField]);}};S.prototype._getLabelInfo=function(p){if(p){var t=null;if(p.extensions["sap:label"]){t=p.extensions["sap:label"].value?p.extensions["sap:label"].value:p.extensions["sap:label"];}var Q=null;if(p.extensions["sap:quickinfo"]){Q=p.extensions["sap:quickinfo"].value?p.extensions["sap:quickinfo"].value:p.extensions["sap:quickinfo"];}return{text:t?t:null,quickinfo:Q?Q:null};}};S.prototype.onBeforeRendering=function(){if(this._sSmartFieldId){this._oSmartField=sap.ui.getCore().getControl(this._sSmartFieldId);this._setLabelFor();this._sSmartFieldId=null;}};S.prototype.destroy=function(s){this._oSmartField=null;this._sSmartFieldId=null;L.prototype.destroy.apply(this,[s]);};return S;},true);
