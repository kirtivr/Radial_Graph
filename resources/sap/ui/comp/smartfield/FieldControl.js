/*
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2015 SAP SE. All rights reserved
 */
sap.ui.define(["jquery.sap.global","sap/ui/comp/smartfield/BindingUtil","sap/ui/model/ParseException"],function(q,B,P){"use strict";var F=function(p){this._oBinding=new B();this._oParent=p;};F.prototype.getControlProperties=function(m,b){var M,n,r={};if(m&&b){for(n in b){M="_get"+n.substring(0,1).toUpperCase()+n.substring(1);if(this[M]){r[n]=this[M](m,this._oParent.getBindingInfo(n));}}}return r;};F.prototype._getEnabled=function(m,b){var p,l=0,i=-1,e=-1,a=-1,o,t=this;o=this._getAttributes(m.entitySet,"extensions",{"updatable":true,"updatable-path":true});if(!b){p=this._oParent.getEnabled();}return{path:function(){var c=[];if(!t._getEnabledStatic(o,m)){return c;}if(m.property.extensions["sap:field-control"]){c.push(t._toPath(m,m.property.extensions["sap:field-control"]));i=l;l++;}if(o["updatable-path"]){c.push(o["updatable-path"]);e=l;l++;}if(b){c.push(t._oBinding.toBindingPath(b));a=l;l++;}return c;},formatter:function(c,d,f){var A=[];if(!t._getEnabledStatic(o,m)){return false;}if(i>-1){A.push(arguments[i]!==1);}if(e>-1){A.push(!!arguments[e]);}if(a>-1){A.push(!!arguments[a]);}else{A.push(p);}return t._compare(A,false,true);}};};F.prototype._getEnabledStatic=function(p,m){if(p.updatable==="false"){return false;}if(m.property.extensions["sap:updatable"]==="false"){return false;}return true;};F.prototype._compare=function(a,p,d){var i,l=a.length;for(i=0;i<l;i++){if(a[i]===p){return p;}}return d;};F.prototype._getVisible=function(m,b){var p,l=0,i=-1,a=-1,t=this;if(!b){p=this._oParent.getVisible();}return{path:function(){var c=[];if(m.property.extensions["sap:field-control"]){c.push(t._toPath(m,m.property.extensions["sap:field-control"]));a=l;l++;}if(b){c.push(t._oBinding.toBindingPath(b));i=l;l++;}if(l>0){return c;}return[""];},formatter:function(c,d){var A=[];if(l>0){if(a>-1){A.push(arguments[a]!==0);}if(i>-1){A.push(!!arguments[i]);}else{A.push(p);}return t._compare(A,false,true);}if(m.property.extensions["sap:visible"]){return(m.property.extensions["sap:visible"]==="true");}return true;}};};F.prototype._getMandatory=function(m,b){var p,l=0,i=-1,a=-1,t=this;if(!b){p=this._oParent.getMandatory();}return{path:function(){var c=[];if(m.property.extensions["sap:field-control"]){c.push(t._toPath(m,m.property.extensions["sap:field-control"]));a=l;l++;}if(b){c.push(t._oBinding.toBindingPath(b));i=l;l++;}if(l>0){return c;}return[""];},formatter:function(c,d){var A=[];if(l>0){if(a>-1){A.push(arguments[a]===7);}if(i>-1){A.push(!!arguments[i]);}else{A.push(p);}return t._compare(A,true,false);}if(m.property.property.nullable&&m.property.property.nullable==="false"){return true;}return false;}};};F.prototype._toPath=function(m,p){if(m.property.complex){return m.path.replace(m.property.property.name,p);}return p;};F.prototype._getAttributes=function(o,a,p){var r={},n,c=0,l,A;if(o&&a&&p){l=o[a].length;for(n in p){if(p[n]){c++;}}while(l--){if(c===0){return r;}A=o[a][l];if(p[A.name]){r[A.name]=A.value;c--;}}}return r;};F.prototype.getMandatoryCheck=function(p){var r,t=this;if(p){switch(p.property.type){case"Edm.DateTimeOffset":case"Edm.DateTime":case"Edm.String":r=function(v){if(t._oParent.getMandatory()&&!v){throw new P(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("VALUEHELPVALDLG_FIELDMESSAGE"));}};break;case"Edm.Decimal":case"Edm.Double":case"Edm.Float":case"Edm.Single":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":case"Edm.Byte":case"Edm.SByte":r=function(v){if(t._oParent.getMandatory()&&(v===null||v===undefined)){throw new P(sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("VALUEHELPVALDLG_FIELDMESSAGE"));}};break;default:break;}}return r;};F.prototype.destroy=function(){if(this._oBinding){this._oBinding.destroy();}this._oBinding=null;this._oParent=null;};return F;},true);
